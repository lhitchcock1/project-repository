var theTakeBaseUrl="https://d160accw6snlyf.cloudfront.net",ttBetaGroupId=-1,probablyMobile=/android/gi.test(navigator.appVersion)||/iphone|ipad|ipod/gi.test(navigator.appVersion)||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),isIPad=/ipad/gi.test(navigator.appVersion);window.ttdev="";
if(window.ttInjectedDevScript)(function(){for(var a=document.getElementsByTagName("script"),b=a.length-1;0<=b;b--)if(-1!==a[b].src.indexOf("injector.thetake-api.com")||-1!==a[b].src.indexOf("thetake-injector")){var d=a[b].src.replace("https://","http://").indexOf("/",7);6<d&&(theTakeBaseUrl=a[b].src.replace("https://","http://").slice(0,d).replace("http:",""));break}})();else switch(window.ttdev=function(){var a=function(a){a=((a?a+"":a)||"").trim().toLocaleLowerCase();switch(a){case "true":return!0;
case "local":case "live":return a;default:return null}},b=a(window.ttdev),d="",c="";if(!b){try{d=function(){for(var a=document.cookie.split(";"),c=0;c<a.length;c++){var b=a[c].trim().toLocaleLowerCase();if(0===b.indexOf("ttdev\x3d"))return b.substring(6,b.length)}return""}()}catch(e){}b=a(d);if(!b){try{c=localStorage.ttDev}catch(f){}b=a(c);if(!b)for(d=window.location.search.substring(1).toLocaleLowerCase().split("\x26"),c=d.length-1;0<=c;c--){var h=d[c].split("\x3d");if("ttdev"===h[0]){b=a(h[1]);
break}}}}return b}(),window.ttdev+""){case "true":theTakeBaseUrl="https://thetake-dev.ngrok.io";break;case "local":theTakeBaseUrl="http://localhost:9000"}-1!==theTakeBaseUrl.indexOf("localhost")?0!==theTakeBaseUrl.indexOf("http")&&(theTakeBaseUrl="http:"+theTakeBaseUrl):0!==theTakeBaseUrl.indexOf("http")&&(theTakeBaseUrl="https:"+theTakeBaseUrl);
if(-1!=window.location.host.indexOf("watchhallmarktv.com")||-1!=window.location.host.indexOf("hallmarkchanneleverywhere.com")||-1!=window.location.host.indexOf("prelive.crownmediadev.com"))ttBetaGroupId=probablyMobile?-1:function(){var a=-1,a=1;if(/Version\/\d+\.\d+(\.\d+)?.*Safari/.test(navigator.userAgent))localStorage.setItem("ttBetaUserGroupId",a);else{var b;b=new Date;b.setTime(b.getTime()+12096E5);b="; expires\x3d"+b.toGMTString();document.cookie="ttBetaUserGroupId\x3d"+a+b+"; path\x3d/"}return a}();
if(0<ttBetaGroupId||!window.ttInjectedDevScript&&("local"===window.ttdev||!0===window.ttdev)){var scriptUrl="";0<ttBetaGroupId?(window.ttInjectedBetaScript=!0,scriptUrl=theTakeBaseUrl+"/public/js/thetake-injector-beta.js"):!0===window.ttdev?scriptUrl="https://thetake-dev.ngrok.io/public/js/thetake-injector.js":"local"===window.ttdev&&(scriptUrl="http://localhost:9000/public/js/thetake-injector.js");for(var scripts=document.getElementsByTagName("script"),scriptAlreadyLoaded=!1,i=0;i<scripts.length;i++)if(scripts[i].href===
scriptUrl){scriptAlreadyLoaded=!0;break}scriptAlreadyLoaded||(window.ttInjectedDevScript||-1===scriptUrl.indexOf("localhost")||-1===scriptUrl.indexOf("ngrok")||(window.ttInjectedDevScript=!0),document.head.appendChild(document.createElement("script")).src=scriptUrl)}else if(!window.ttInjectedProdScript){var formatTime=function(a){parseInt(10*a%10/10*1E3+.5);a=parseInt(a,10);var b=Math.floor(a/3600),d=Math.floor((a-3600*b)/60);a=a-3600*b-60*d;return d+":"+(10>a?"0"+a:""+a)},getURLParameter=function(a,
b){var d=location.search;void 0!=b&&null!=b&&0<b.length&&(d=0<b.indexOf("?")?b.substring(b.indexOf("?")):b);return decodeURIComponent(((new RegExp("[?|\x26]"+a+"\x3d([^\x26;]+?)(\x26|#|;|$)")).exec(d)||[,""])[1].replace(/\+/g,"%20"))||null},getHashParams=function(){if(null==window.location.hash||0==window.location.hash.length)return{};try{return JSON.parse(window.location.hash.substring(1))}catch(a){return{}}},getSessionId=function(){var a;TheTake=TheTake||{};TheTake.user=TheTake.user||{};TheTakeMetaOverlay=
TheTakeMetaOverlay||{};TheTakeMetaOverlay.user=TheTakeMetaOverlay.user||{};if(TheTakeMetaOverlay.user.sessionId&&-1!==TheTakeMetaOverlay.user.sessionId&&0<TheTakeMetaOverlay.user.sessionId.length&&"-1"!==TheTakeMetaOverlay.user.sessionId)return TheTake.user.sessionId=TheTakeMetaOverlay.user.sessionId;if(TheTake.user.sessionId&&-1!==TheTake.user.sessionId&&0<TheTake.user.sessionId.length&&"-1"!==TheTake.user.sessionId)return TheTakeMetaOverlay.user.sessionId=TheTake.user.sessionId;try{a=TheTakeMetaOverlay.util.guid();
var b=sessionStorage.getItem("ttSessionId");if(!b&&(b=a,sessionStorage.setItem("ttSessionId",b),sessionStorage.getItem("ttSessionId")!==b))throw b;TheTakeMetaOverlay.user.sessionId=b;TheTake.user.sessionId=TheTakeMetaOverlay.user.sessionId;return b}catch(d){b=-1;console.warn("TT - sessionStorage failed",a);try{b=TheTakeMetaOverlay.util.getCookie("ttSessionId"),TheTakeMetaOverlay.util.isCookieSessionOnly("ttSessionId")||TheTakeMetaOverlay.util.setCookie("ttSessionId",b,!0)}catch(c){console.warn("TT - Read session cookie failed",
a)}if(-1===b)try{if(b=a,TheTakeMetaOverlay.util.setCookie("ttSessionId",b,!0),TheTakeMetaOverlay.util.getCookie("ttSessionId")!==b)throw b;}catch(e){b="page-"+b,console.warn("TT - Set session cookie failed",b)}TheTakeMetaOverlay.user.sessionId=b;TheTake.user.sessionId=TheTakeMetaOverlay.user.sessionId;return b}},getClientId=function(){var a,b="-1";TheTake=TheTake||{};TheTake.user=TheTake.user||{};TheTakeMetaOverlay=TheTakeMetaOverlay||{};TheTakeMetaOverlay.user=TheTakeMetaOverlay.user||{};if(ttClientId&&
-1!==ttClientId&&0<ttClientId.length&&"-1"!==ttClientId)return TheTake.user.clientId=ttClientId,TheTakeMetaOverlay.user.clientId=ttClientId;if(TheTakeMetaOverlay.user.clientId&&-1!==TheTakeMetaOverlay.user.clientId&&0<TheTakeMetaOverlay.user.clientId.length&&"-1"!==TheTakeMetaOverlay.user.clientId)return ttClientId=TheTakeMetaOverlay.user.clientId,TheTake.user.clientId=TheTakeMetaOverlay.user.clientId;if(TheTake.user.clientId&&-1!==TheTake.user.clientId&&0<TheTake.user.clientId.length&&"-1"!==TheTake.user.clientId)return ttClientId=
TheTake.user.clientId,TheTakeMetaOverlay.user.clientId=TheTake.user.clientId;try{a=TheTakeMetaOverlay.util.guid();var d=localStorage.getItem("ttClientId");if(!d&&(d=a,localStorage.setItem("ttClientId",d),localStorage.getItem("ttClientId")!==d))throw d;b=d}catch(c){d=-1;console.warn("TT - localStorage failed",a);try{d=TheTakeMetaOverlay.util.getCookie("ttClientId")}catch(e){console.warn("TT - Read client cookie failed",a)}if(-1===d)try{d=a;TheTakeMetaOverlay.util.setCookie("ttClientId",d,!1);if(TheTakeMetaOverlay.util.getCookie("ttClientId")!==
d)throw d;b=d}catch(f){console.warn("TT - Set client cookie failed",d)}else b=d}ttClientId=b;TheTake.user.clientId=ttClientId;TheTakeMetaOverlay.user.clientId=ttClientId;return b},recordAnalyticsAction=function(a,b,d,c,e){var f=jQuery;"undefined"==typeof d&&(d={});if(optedOut||disabledViaOptOut)d.opted_out="1";"undefined"!=typeof animationTestVariation&&2332==videoId?d.test_group="f1NvRSToTcGvuznPIKRpxQ_"+animationTestVariation:"undefined"==typeof animationTestVariation||"xkgYnkmvTYeuglT3oCpmUQ"!==
ttGoogleAnalyticsExperimentId&&"hyBXImgPQ8aAdgenHbuZbQ"!==ttGoogleAnalyticsExperimentId||(d.test_group=ttGoogleAnalyticsExperimentId+"_"+animationTestVariation);0<=ttUserGroupId&&(d.test_group_tt=ttUserGroupId);0<=ttCardsGroupId&&(d.cards_group_tt=ttCardsGroupId);0<=ttIntroGroupId&&(d.intro_group_tt=ttIntroGroupId);0<=ttBetaGroupId&&(d.beta_grp_tt=ttBetaGroupId);0>b.indexOf("fullscreen")&&("undefined"===typeof d.fullscreen&&(d.fullscreen=document.isFullscreen()),showFsOutfits&&"undefined"===typeof d.outfit_mode&&
(d.outfit_mode=0<f("#ttFsOutfits .multipleOutfits").length));TheTakeMetaOverlay.isAd&&"undefined"===typeof d.ad_playing&&(d.ad_playing=TheTakeMetaOverlay.isAd);null==c&&(c=0);var h="",k;for(k in d)h+=k+": "+d[k]+" | ";h=h.substring(0,h.length-3);"undefined"!=typeof ga&&"hover bubble time"!=b&&ga("TheTakeTracker.send","event",a,b,h,c);c=window.location.hostname+window.location.pathname;-1==window.location.host.indexOf("thetake.com")&&-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&
-1==window.location.host.indexOf("localhost")||-1==window.location.pathname.indexOf("/embed")?-1==window.location.host.indexOf("thetake.com")&&-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&-1==window.location.host.indexOf("localhost")||-1==window.location.pathname.indexOf("/twitter_embed")?-1==window.location.host.indexOf("thetake.com")&&-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&-1==window.location.host.indexOf("localhost")&&-1==window.location.host.indexOf("thetake-dev.ngrok.io")||
-1==window.location.pathname.indexOf("/video_embed")&&-1==window.location.pathname.indexOf("/ytEmbed")||(c=0<window.document.referrer.length?window.document.referrer:window.location.href):c=probablyMobile?"Twitter Mobile":"Twitter":c="Facebook Mobile";var g={source:analyticsSource,page:c,category:a,action:b,sessionId:getSessionId(),clientId:ttClientId};for(k in d)g["params."+k]=d[k];console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d RECORD ACTION \x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\n"+
JSON.stringify(g).replace(RegExp(",","g"),"\n").replace("{","").replace("}",""));a={source:analyticsSource,page:c,category:a,action:b,sessionId:getSessionId(),clientId:ttClientId,params:d};f.ajax({async:!e,type:"POST",url:"https://tfs23fre84.execute-api.us-east-1.amazonaws.com/prod/recordaction",contentType:"application/json",data:JSON.stringify(a),dataType:"text json",success:function(a){},error:function(a){console.log("[TT] API GATEWAY FAILED TO RECEIVE ANALYTICS EVENT - SEND THROUGH INJECTOR SERVER");
f.ajax({type:"POST",url:theTakeBaseUrl+"/analytics/recordAction",data:g,async:!e,success:function(a){console.log("[TT] BACKUP SEND SUCCESS: ",a)}})}});if(2374==videoId){var m=new Image;m.addEventListener?m.addEventListener("load",function(){m=null}):m.attachEvent("onload",function(){m=null});a="";-1!=b.indexOf("overlay open - bubble when")?a="http://www.pixelsite.info/track/t27746.gif":"progress"==b&&"0"==d.percent?a="http://www.pixelsite.info/track/t27747.gif":"player hover in"==b&&(a="http://www.pixelsite.info/track/t27748.gif");
m.src=a+"?cb\x3d"+Math.round(Date.now()/1E3)}},recordFavorite=function(a,b,d){if("undefined"!==typeof b&&null!=b){var c=b.purchaseLink.split("/")[2];0===c.indexOf("www.")&&(c=c.substr(4));b={vid:videoId,video_time:videoTime,video_title:b.movieName,pid:b.product_id,brand:b.brand,name:b.name,retailer:c,actor:b.actorName,category:b.primaryCategoryName+(0<b.secondaryCategory?", "+b.secondaryCategoryName:"")+(0<b.tertiaryCategory?", "+b.tertiaryCategoryName:""),fullscreen:document.isFullscreen()};for(var e in d)b[e]=
d[e];recordAnalyticsAction("favorites",a,b)}},recordModalInteraction=function(a,b,d){if("undefined"!==typeof b&&null!=b){mostRecentModalProduct=b;var c=b.purchaseLink.split("/")[2];0===c.indexOf("www.")&&(c=c.substr(4));b={vid:videoId,video_time:videoTime,video_title:b.movieName,pid:b.product_id,type:"video player",brand:b.brand,name:b.name,retailer:c,actor:b.actorName,category:b.primaryCategoryName+(0<b.secondaryCategory?", "+b.secondaryCategoryName:"")+(0<b.tertiaryCategory?", "+b.tertiaryCategoryName:
""),fullscreen:document.isFullscreen()};-1!=a.indexOf("overlay open -")&&(b.oo_type=a.substring(15),a="overlay open");for(var e in d)b[e]=d[e];recordAnalyticsAction("navigation",a,b)}},recordBuy=function(a,b,d,c,e,f,h,k,g,m,l,r,q,u,B,p){isPaused||ttPauseVideo();temporaryPause=!1;jQuery(document).trigger("ttBuyClick",[B]);l=l?parseInt(l.replace(/[^0-9-.]/g,""),10):0;r=r.split("/")[2];0===r.indexOf("www.")&&(r=r.substr(4));b={vid:videoId,pid:b,type:"video player",video_title:d,video_time:c,brand:e,
name:f,match:k,click_target:u,sponsored:g,buy_status:m,retailer:r,actor:h,category:q,click_location:B,fullscreen:document.isFullscreen()};for(var s in p)b[s]=p[s];recordAnalyticsAction("buy",a,b,l,!0)},affiliateUrl=function(a,b,d,c,e){-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e="http://"+e);var f;f="Bravo"==analyticsSource?"70":"Oxygen"==analyticsSource?"79":"Hallmark"==analyticsSource?"80":"ITG"==analyticsSource?"81":"BIB"==analyticsSource?"82":null!=getURLParameter("partner")?getURLParameter("partner"):
"0";a="v"+videoId+"p"+a+"pv"+b+(0<d?"c"+d+"cv"+c:"")+"partner"+f;b="the006c-20";"70"==f?b="the006c-20":"77"==f?b="uphe-20":"80"==f?b="hallmark0b-20":"81"==f?b="itg0b-20":"82"==f&&(b="bib08-20");d="68795X1542322";"80"==f&&(d="68795X1552823");return-1!=e.indexOf("amazon")?(f=null,1<e.split("dp/").length?f=e.split("dp/")[1]:1<e.split("gp/product/").length&&(f=e.split("gp/product/")[1]),null!=f?(f=f.substring(0,10),"http://www.amazon.com/dp/"+f+"/?tag\x3d"+b+"\x26ascsubtag\x3d"+a):"http://go.redirectingat.com/?id\x3d"+
d+"\x26xcust\x3d"+a+"\x26xs\x3d1\x26url\x3d"+encodeURIComponent(e)):-1!=e.indexOf("api.shopstyle.com")||-1!=e.indexOf("r.popshops.com")||-1!=e.indexOf("shop-links.co")||-1!=e.indexOf("linktrack.info")?e:"Zalora"==analyticsSource?app?e.replace("http://",""):e:"http://go.redirectingat.com/?id\x3d"+d+"\x26xcust\x3d"+a+"\x26xs\x3d1\x26url\x3d"+encodeURIComponent(e)},getvideoModalComp=function(a,b,d,c,e){var f;f='\x3cdiv class\x3d"similar-horizontal"\x3e'+('\x3ca class\x3d"video-modal-comp-link" data-type\x3d"image" href\x3d"'+
c+'" target\x3d"_blank"\x3e')+'\x3cdiv class\x3d"similar-thumb border1"\x3e';f+='\x3cdiv class\x3d"similar-thumb-container" style\x3d"width:100px;height:100px;position:relative;overflow:hidden;background-color:#fff;"\x3e';f+='\x3cdiv style\x3d"overflow:hidden;border:1px solid rgba(0,0,0,0.0);"\x3e';f+='\x3cimg src\x3d"'+e+'" class\x3d"image-fill" nopin\x3d"nopin" style\x3d"position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);"\x3e';
f+="\x3c/div\x3e";f+="\x3c/div\x3e";f+="\x3c/div\x3e";f+="\x3c/a\x3e";f+='\x3cdiv class\x3d"similar-name"\x3e';f+='\x3ca class\x3d"video-modal-comp-link" data-type\x3d"text" href\x3d"'+c+'" target\x3d"_blank"\x3e'+b+" - "+a+"\x3c/a\x3e";f+="\x3c/div\x3e";f+='\x3cdiv class\x3d"similar-price"\x3e';f+='\x3ca class\x3d"video-modal-comp-link" data-type\x3d"text" href\x3d"'+c+'" target\x3d"_blank"\x3e'+d+"\x3c/a\x3e";f+="\x3c/div\x3e";return f+="\x3c/div\x3e"},getOutfitHtmlMobile=function(a){for(var b=
"",d=0;d<outfits[a].length;d++)if(outfits[a][d].isCropProduct){b=outfits[a][d]["500pxCropLink"];break}for(var c='\x3cdiv class\x3d"outfit-container"\x3e\x3cdiv class\x3d"outfit" data-id\x3d"'+a+'"\x3e\x3cdiv class\x3d"slides" data-slide-id\x3d"0"\x3e\x3cdiv class\x3d"slide"\x3e\x3cdiv class\x3d"content"\x3e\x3cdiv class\x3d"home-slide-img" style\x3d"background-image:url(\''+b+'\');" alt\x3d""\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"swipe-to-shop"\x3e\x3cdiv\x3e\x3cimg src\x3d"'+theTakeBaseUrl+
'/public/images/l-arrow.svg"\x3e\x3c/div\x3e\x3cdiv class\x3d"dir"\x3eswipe to shop\x3c/div\x3e\x3cdiv\x3e\x3cimg src\x3d"'+theTakeBaseUrl+'/public/images/r-arrow.svg"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',d=0;d<outfits[a].length;d++){var e=affiliateUrl(outfits[a][d].product_id,outfits[a][d].currentVersionNumber,-1,-1,outfits[a][d].purchaseLink),f;f=outfits[a][d].unavailable||outfits[a][d].customMade?"MORE INFO":outfits[a][d].soldOut?"SOLD OUT":/\d/.test(outfits[a][d].price)?outfits[a][d].price:
"MORE INFO";c+='\x3cdiv class\x3d"slide" data-id\x3d"'+outfits[a][d].product_id+'"\x3e\x3cdiv class\x3d"content"\x3e\x3ca class\x3d"featured-image-link" href\x3d"'+e+'" target\x3d"_blank"\x3e\x3cdiv class\x3d"product-image" style\x3d"background-image:url(\''+outfits[a][d].productImageLarge+'\')"\x3e\x3c/div\x3e\x3c/a\x3e\x3cdiv class\x3d"product-details"\x3e\x3cdiv class\x3d"brand-match"\x3e'+(outfits[a][d].verified?'\x3cdiv class\x3d"verified-match exact-dot"\x3eEXACT MATCH\x3c/div\x3e':'\x3cdiv class\x3d"verified-match close-dot"\x3eCLOSE MATCH\x3c/div\x3e')+
'\x3cdiv class\x3d"brand"\x3e'+outfits[a][d].brand+'\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"featured-image-link" href\x3d"'+e+'" target\x3d"_blank"\x3e\x3cbutton class\x3d"buy-btn"\x3e'+f+'\x3c/button\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"similar-styles"\x3e\x3cdiv class\x3d"similar-heading"\x3eSimilar Styles\x3c/div\x3e\x3cdiv class\x3d"similar-style"\x3e\x3ca target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-image"\x3e\x3cimg src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3ca target\x3d"_blank"\x3e\x3cdiv class\x3d"brand-buy-contain"\x3e\x3cdiv class\x3d"brand"\x3e\x3c/div\x3e\x3cdiv class\x3d"price"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"similar-style"\x3e\x3ca target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-image"\x3e\x3cimg src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3ca target\x3d"_blank"\x3e\x3cdiv class\x3d"brand-buy-contain"\x3e\x3cdiv class\x3d"brand"\x3e\x3c/div\x3e\x3cdiv class\x3d"price"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bottom-bg"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'}c+=
'\x3c/div\x3e\x3cdiv class\x3d"bubbles-nav home-slide"\x3e\x3cdiv class\x3d"bubble-container selected" style\x3d"background-image:url(\''+b+"')\"\x3e\x3c/div\x3e";for(b=0;b<outfits[a].length;b++)c+='\x3cdiv class\x3d"bubble-container" style\x3d"background-image:url(\''+outfits[a][b].productImageLarge+"')\"\x3e\x3c/div\x3e";return c+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"},getFavoriteSvg=function(){return showFavorites?'\x3csvg class\x3d"ttFavorite" width\x3d"24px" height\x3d"19px" viewBox\x3d"0 0 24 19" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3cg class\x3d"ttFavorite-empty" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cpath d\x3d"M20.5459836,8.6526 L12.0001047,16.4067714 L3.45478382,8.6526 C2.59274483,7.8831 2.25925937,6.87148571 2.25925937,5.80314286 C2.25925937,4.73534286 2.45153676,3.85917143 3.31357575,3.09021429 C4.07515051,2.41001429 5.09765322,2.03571429 6.19187623,2.03571429 C7.28721552,2.03571429 8.30943916,2.68144286 9.07129298,3.36137143 L12.0006628,5.84032857 L14.9289163,3.36137143 C15.6904911,2.68144286 16.7129938,2.03571429 17.808054,2.03571429 C18.9031142,2.03571429 19.9256169,2.41001429 20.6871917,3.09021429 C21.5492307,3.85917143 21.7409499,4.73534286 21.7415081,5.80314286 C21.7415081,6.87148571 21.4080226,7.8831 20.5459836,8.6526 M22.0317381,1.5618 C19.6990143,-0.5206 15.9170937,-0.5206 13.5840908,1.5618 L12.0001047,2.97567143 L10.4155603,1.5618 C8.08311555,-0.5206 4.30119505,-0.5206 1.96847121,1.5618 C-0.656157068,3.90422857 -0.656157068,7.7026 1.96847121,10.0450286 L12.0001047,19 L22.0317381,10.0450286 C24.6560873,7.7026 24.6560873,3.90422857 22.0317381,1.5618"\x3e\x3c/path\x3e\x3c/g\x3e\x3cg class\x3d"ttFavorite-hover" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cg\x3e\x3cpath class\x3d"ttFavorite-hover-inside" d\x3d"M22.031936,1.56159085 C19.6991985,-0.520530284 15.9175351,-0.520530284 13.5842396,1.56159085 L12.0002442,2.97572866 L10.4156907,1.56159085 C8.08351139,-0.520530284 4.30128982,-0.520530284 1.96827335,1.56159085 C-0.656091116,3.90428248 -0.656091116,7.70236892 1.96827335,10.0450606 L12.0002442,19 L22.031936,10.0450606 C24.6560213,7.70236892 24.6560213,3.90428248 22.031936,1.56159085"\x3e\x3c/path\x3e\x3cpath class\x3d"ttFavorite-hover-border" d\x3d"M20.5459836,8.6526 L12.0001047,16.4067714 L3.45478382,8.6526 C2.59274483,7.8831 2.25925937,6.87148571 2.25925937,5.80314286 C2.25925937,4.73534286 2.45153676,3.85917143 3.31357575,3.09021429 C4.07515051,2.41001429 5.09765322,2.03571429 6.19187623,2.03571429 C7.28721552,2.03571429 8.30943916,2.68144286 9.07129298,3.36137143 L12.0006628,5.84032857 L14.9289163,3.36137143 C15.6904911,2.68144286 16.7129938,2.03571429 17.808054,2.03571429 C18.9031142,2.03571429 19.9256169,2.41001429 20.6871917,3.09021429 C21.5492307,3.85917143 21.7409499,4.73534286 21.7415081,5.80314286 C21.7415081,6.87148571 21.4080226,7.8831 20.5459836,8.6526 M22.0317381,1.5618 C19.6990143,-0.5206 15.9170937,-0.5206 13.5840908,1.5618 L12.0001047,2.97567143 L10.4155603,1.5618 C8.08311555,-0.5206 4.30119505,-0.5206 1.96847121,1.5618 C-0.656157068,3.90422857 -0.656157068,7.7026 1.96847121,10.0450286 L12.0001047,19 L22.0317381,10.0450286 C24.6560873,7.7026 24.6560873,3.90422857 22.0317381,1.5618"\x3e\x3c/path\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e':
""},getOutfitModal=function(){return'\x3cdiv id\x3d"outfitProductModal" data-id\x3d"-1"\x3e\x3cdiv id\x3d"outfitModalCropImage"/\x3e\x3cdiv class\x3d"left-side"\x3e\x3cdiv id\x3d"featuredStyle" class\x3d"featured-product"\x3e\x3ca class\x3d"featured-image-link" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"featured-image"\x3e\x3cimg id\x3d"featuredImage" src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3cdiv class\x3d"featured-details"\x3e\x3cdiv class\x3d"verified-match"\x3e\x3c/div\x3e\x3cdiv class\x3d"brand"\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e\x3c/div\x3e'+
(universalCart?'\x3cdiv class\x3d"price"\x3e\x3c/div\x3e':"")+'\x3ca class\x3d"featured-image-link" href\x3d"" target\x3d"_blank"\x3e\x3cbutton target\x3d"_blank" class\x3d"buy-button buyPrice"\x3e\x3c/button\x3e\x3c/a\x3e'+getFavoriteSvg()+'\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"similarStyles" class\x3d"similar-styles"\x3e\x3ch3\x3eSimilar Styles\x3c/h3\x3e'+(huluSponsored?'\x3cimg src\x3d"'+theTakeBaseUrl+'/public/images/presented-by-nordstrom-modal@2x.png" /\x3e':"")+'\x3cdiv class\x3d"similar-container"\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-image" data-id\x3d"0"\x3e\x3cimg src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-details" data-id\x3d"0"\x3e\x3cspan class\x3d"brand"\x3e\x3c/span\x3e\x3cspan class\x3d"name"\x3e\x3c/span\x3e\x3cdiv class\x3d"price"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"similar-container"\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-image" data-id\x3d"1"\x3e\x3cimg src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-details" data-id\x3d"1"\x3e\x3cspan class\x3d"brand"\x3e\x3c/span\x3e\x3cspan class\x3d"name"\x3e\x3c/span\x3e\x3cdiv class\x3d"price"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"similar-container"\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-image" data-id\x3d"2"\x3e\x3cimg src\x3d"" alt\x3d""\x3e\x3c/div\x3e\x3c/a\x3e\x3ca class\x3d"comp1PurchaseLink" href\x3d"#" target\x3d"_blank"\x3e\x3cdiv class\x3d"similar-details" data-id\x3d"2"\x3e\x3cspan class\x3d"brand"\x3e\x3c/span\x3e\x3cspan class\x3d"name"\x3e\x3c/span\x3e\x3cdiv class\x3d"price"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"outfit-list-container"\x3e\x3cdiv class\x3d"complete-look"\x3e\x3cspan\x3eWear It With\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"outfitList"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'},
getOutfitHtmlDesktop=function(a,b){var d="";1===b.length?d="one":2===b.length?d="two":3===b.length?d="three":4===b.length?d="four":5===b.length?d="five":6===b.length?d="six":7===b.length?d="seven":8===b.length?d="eight":8<b.length&&(d="eightPlus");for(var c="",e=[],f=0;f<b.length;f++)if(e.push(b[f]["500pxCropLink"]),b[f]["500pxCropLink"]&&b[f].isCropProduct){c=b[f]["500pxCropLink"];break}0===c.length&&(c=(e[0]||{})["500pxCropLink"]||"");e=f="";c?f='\x3cdiv class\x3d"outfit-crop-container"\x3e\x3cimg class\x3d"outfitCrop" data-id\x3d"'+
b[0].product_id+'" src\x3d"'+c+'"\x3e\x3c/div\x3e':e=" no-outfit-crop";d='\x3cdiv class\x3d"outfit '+d+e+'" data-id\x3d"'+a+'"\x3e\x3cdiv class\x3d"character-heading"\x3e\x3cspan\x3e'+b[0].characterName.trim()+"\x3c/span\x3e\x3c/div\x3e"+f+'\x3cdiv class\x3d"outfit-right-side"\x3e';for(f=0;f<b.length;f++){var e=b[f].verified?"exact-dot":"close-dot",h=b[f].verified?"EXACT MATCH":"CLOSE MATCH",d=d+('\x3cdiv class\x3d"product-thumb-container'+(5>=b.length&&0===f||2===b.length&&1===f?" primary":"")+(isTouchDevice()?
"":" hover")+'" data-id\x3d"'+b[f].product_id+'"\x3e\x3cdiv class\x3d"more-info-btn"\x3eMORE INFO\x3c/div\x3e\x3cdiv class\x3d"verified-match-container"\x3e\x3cdiv class\x3d"verified-match '+e+'"\x3e'+h+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"product" style\x3d"background-image: url(\''+b[f].productImageLarge+"');\"\x3e\x3c/div\x3e"+getFavoriteSvg()+'\x3cdiv class\x3d"p-container"\x3e\x3cp\x3e\x3cspan class\x3d"brand"\x3e'+b[f].brand+"\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e");if(c&&6===
f&&8<b.length||!c&&8===f&&10<b.length)d+='\x3cdiv data-it\x3d"'+f+'" class\x3d"showMore product-thumb-container'+(isTouchDevice()?"":" hover")+'" style\x3d"display: block;"\x3e\x3cdiv class\x3d"show-more-text"\x3eSHOW ALL...\x3c/div\x3e\x3c/div\x3e'}return d+"\x3c/div\x3e\x3c/div\x3e"},slugify=function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},placeUrl=function(a){return"/location/"+(a.product_id?a.product_id:a.id)+"/"+slugify(a.name+" "+a.brand+" "+a.movieName)},productUrl=
function(a){return"/product/"+(a.product_id?a.product_id:a.id)+"/"+slugify((a.actorName?a.actorName+" ":"")+a.brand+" "+a.name+" "+a.movieName)},hideControls=function(a){var b=jQuery;isTouchDevice()&&0!=a||(void 0!=hideControlsTimer&&(clearTimeout(hideControlsTimer),hideControlsTimer=void 0),hideControlsTimer=setTimeout(function(){playingSnipe||bubblesExpanded||(controlsHidden=!0,b("#ttControls, #ttVideoBlocker div").stop().animate({opacity:"0.0"},600),delayUpdateForMinimalTransition=!0,document.isFullscreen()&&
b(playerRoot).addClass("inactive"));hideControlsTimer=void 0},a))},unhideControls=function(){var a=jQuery;void 0!=hideControlsTimer&&(clearTimeout(hideControlsTimer),hideControlsTimer=void 0);controlsHidden&&(controlsHidden=!1,a(playerRoot).removeClass("inactive"),a("#ttControls, #ttVideoBlocker div").stop().animate({opacity:"1.0"},300))},hideBubbles=function(a){var b=jQuery;bubblesExpanded||(void 0==a&&(a=bubbleHideDelay),void 0!=hideBubblesTimer&&(clearTimeout(hideBubblesTimer),hideBubblesTimer=
void 0),hideBubblesTimer=setTimeout(function(){playingSnipe||bubblesExpanded||(bubblesHidden=!0,b("#ttVideoProductsContainerOuter").stop().animate({opacity:"0.0"},600),b(document).trigger("ttHideBubbles",[600]),delayUpdateForMinimalTransition=!0);hideBubblesTimer=void 0},a))},unhideBubbles=function(){var a=jQuery;void 0!=hideBubblesTimer&&(clearTimeout(hideBubblesTimer),hideBubblesTimer=void 0);bubblesHidden&&(bubblesHidden=!1,a("#ttVideoProductsContainerOuter").stop().animate({opacity:"1.0"},300),
a(document).trigger("ttUnhideBubbles",[300]))},shrinkBubbles=function(a){var b=jQuery;isTouchDevice()&&0!=a||bubblesExpanded||(void 0==a&&(a=bubbleShrinkDelay),void 0!=shrinkBubblesTimer&&(clearTimeout(shrinkBubblesTimer),shrinkBubblesTimer=void 0),shrinkBubblesTimer=setTimeout(function(){playingSnipe||(b("#ttVideoProductsContainerOuter").removeClass("player-hover"),b(document).trigger("ttShrinkBubbles"),isPaused||(delayUpdateForMinimalTransition=!0));shrinkBubblesTimer=void 0},a))},enlargeBubbles=
function(){var a=jQuery;void 0!=shrinkBubblesTimer&&(clearTimeout(shrinkBubblesTimer),shrinkBubblesTimer=void 0);a("#ttVideoProductsContainerOuter").addClass("player-hover")},showBuyNow=function(){var a=jQuery;ttHasBuyNow&&a("#buyMovieModal").css("display","block")},animateBubblesIn=function(){var a=jQuery;hideBubbleInfo();a("#ttVideoProductsContainer").scrollTop(0);void 0!=scrollInterval&&(ttClearInterval(scrollInterval),scrollInterval=void 0);a(playerRoot).removeClass("tt-bub-list tt-bub-popout");
a("#ttVideoProductsContainer").removeClass("expanded");setTimeout(function(){bubblesExpanded||playingSnipe||(a("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","130px"),a("#ttVideoProductsContainer").css("width","150px"))},150);playingSnipe||a("#ttControls").removeClass("hidden");a(".bubbles-arrow").hide();a("#ttVideoProductsContainerInner").css("height",bubbleSpacing+bubbleHeight+5*(2>a(".ttBubble").length-1?a(".ttBubble").length-1:2)+"px");a("#tt-buy-now").hide();bubblesExpanded=
!1;0!=a(".ttBubble").length&&(bubblesAnimating=!0,a(".ttBubble").each(function(b){a(this).stop(!0,!1).animate({top:bubbleSpacing+(2>b?b:2)*unexpandedBubbleHeight+"px"},300,"swing",function(){bubblesAnimating=!1;b==a(".ttBubble").length-1&&(a(".ttBubbleImage").css("background-image","none"),a(".ttBubble").last().find(".ttBubbleImage").css("background-image","url('"+a(".ttBubble").last().attr("data-background-image")+"')"),bamNeedToClearProductsAfterIntro&&(bamNeedToClearProductsAfterIntro=!1,a("#ttVideoProductsContainerInner").empty(),
showBubblesForFrame(videoTime)),isPaused&&temporaryPause&&ttPlayVideo())})}),a(document).trigger("ttBubblesIn",[300]),a(".tt-product-divider").each(function(b){a(this).css("opacity","0.0");a(this).css("top","0px")}))},animateBubblesOut=function(){var a=jQuery;bubblesExpanded=!0;if(0!=a(".ttBubble").length){bubblesAnimating=!0;enlargeBubbles();a(playerRoot).addClass("tt-bub-list");a("#ttVideoProductsContainer").addClass("expanded");a("#ttControls").addClass("hidden");var b=a(".tt-product-divider").length;
a("#ttVideoProductsContainerInner").css("height",2*bubbleSpacing+bubbleHeight+(a(".ttBubble").length-1)*(bubbleHeight+bubbleSpacing)+b*dividerExtraSpacing+(ttHasBuyNow?30:0)+"px");a("#ttVideoProductsContainerInner").height()>a("#ttVideoProductsContainer").height()+50&&a(".bubbles-arrow").show();var d=0,c=0;a("#ttVideoProductsContainerInner \x3e div").each(function(e){a(this).hasClass("tt-product-divider")?d++:ttHasBuyNow&&a(this).hasClass("tt-product-btn")?a(this).show():(a(this).find(".ttBubbleImage").css("background-image",
"url('"+a(this).attr("data-background-image")+"')"),e=-25+(10+80*(a(".ttBubble").length-1-c)+(b-d)*dividerExtraSpacing+(ttHasBuyNow?30:0)),1==ttUserGroupId&&(e-=10),a(this).stop(!0,!1).animate({top:e+"px"},300,"swing",function(){bubblesAnimating=!1}),a(this).next().hasClass("tt-product-divider")&&(a(this).next().css("opacity","0.9"),a(this).next().css("top",e-(bubbleSpacing+dividerExtraSpacing)/2-2+"px")),c++)});a(document).trigger("ttBubblesOut",[300]);showBubbleInfoCollapsed.bind(a(".ttBubble:last"))()}},
playFeaturedProductAnimation=function(a){function b(){$(".ttBubble:last .ttBubbleImage").css("background-image","url('"+$(".ttFeaturedProductImage:not(.out):first").attr("data-background-image")+"')");$(".ttFeaturedProductImage.out").each(function(a,c){$(c).animate({left:parseInt($(c).css("left"))+83+"px"},400)});setTimeout(function(){$(".ttFeaturedProductImage:not(.out):first").css({height:"auto",width:"40.92px",opacity:"0.5"});$(".ttFeaturedProductImage:not(.out):first").animate({opacity:"1",width:"76px",
left:"0px",top:"0px"},500);1==$(".ttFeaturedProductImage:not(.out)").length&&$("#ttVideoProductsContainerInner").animate({opacity:"0"},500);setTimeout(function(){$(".ttBubble:last .ttBubbleImage").css("background-image","none");$(".ttFeaturedProductImage:not(.out):first").addClass("out");0<$(".ttFeaturedProductImage:not(.out)").length?b():($(".ttFeaturedProductText").animate({top:"130px",opacity:"1"},450),setTimeout(function(){$(".ttFeaturedProductText").animate({top:"79px",opacity:"0"},450);setTimeout(function(){$("#ttVideoProductsContainerInner").animate({opacity:"1"},
300);d()},450)},5E3))},500)},400)}function d(){$(".ttFeaturedProductImage.out").each(function(a,c){a!=$(".ttFeaturedProductImage.out").length-1&&$(c).animate({left:parseInt($(c).css("left"))-83+"px"},500)});$(".ttBubble:last .ttBubbleImage").css("background-image","url('"+$(".ttFeaturedProductImage.out:last").attr("data-background-image")+"')");$(".ttFeaturedProductImage.out:last").css({height:$(".ttFeaturedProductImage.out:last").height()+"px",width:"auto"});$(".ttFeaturedProductImage.out:last").animate({height:"70px",
top:"11px",left:"16px",opacity:"0"},350);setTimeout(function(){$(".ttFeaturedProductImage.out:last").removeClass("out");0<$(".ttFeaturedProductImage.out").length?d():($(".ttBubble:last .ttBubbleImage").css("background-image","url('"+$(".ttBubble:last").attr("data-background-image")+"')"),$("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","130px"),$("#ttVideoProductsContainer").css("width","150px"),$("#ttVideoProductsContainerInner").removeClass("no-interaction"),hideBubbles(3E3),
endSnipe())},500)}var c=3;void 0==a.image_2_square&&(c=2);$(".ttFeaturedProductContainer").empty().append("\x3cimg class\x3d'ttFeaturedProductImage' data-background-image\x3d'"+a.image_0_square+"' style\x3d'position:absolute;width:auto;height:70px;left:16px;top:12px;opacity:0;' src\x3d'"+a.image_0_rect+"' /\x3e\x3cimg class\x3d'ttFeaturedProductImage' data-background-image\x3d'"+a.image_1_square+"' style\x3d'position:absolute;width:auto;height:70px;left:16px;top:12px;opacity:0;' src\x3d'"+a.image_1_rect+
"' /\x3e"+(3==c?"\x3cimg class\x3d'ttFeaturedProductImage' data-background-image\x3d'"+a.image_2_square+"' style\x3d'position:absolute;width:auto;height:70px;left:16px;top:12px;opacity:0;' src\x3d'"+a.image_2_rect+"' /\x3e":"")+(3==c?"\x3cimg class\x3d'ttFeaturedProductText' style\x3d'position:absolute;z-index:-1;top:79px;left:15px;width:209px;opacity:0;' src\x3d'http://i.imgur.com/nIUyZlc.png' /\x3e":"\x3cimg class\x3d'ttFeaturedProductText' style\x3d'position:absolute;z-index:-1;top:79px;left:10px;width:150px;opacity:0;' src\x3d'http://i.imgur.com/nIUyZlc.png' /\x3e"));
$("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","430px");$("#ttVideoProductsContainer").css("width","450px");$("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").addClass("no-transition");$("#ttVideoProductsContainerOuter").addClass("player-hover");$("#ttVideoProductsContainerOuter, #ttVideoProductsContainer").animate({opacity:"1"},500);$("#ttVideoBlocker").animate({opacity:"0.5"},1500);$("#ttVideoProductsContainerInner").addClass("no-interaction");
b()},cancelIntroAnimation=function(){var a=jQuery;console.log("[TT] cancel intro animation");isPaused&&(temporaryPause=!0);a("#ttCoachMarkContainer").css({display:"none",opacity:"0"});isTouchDevice||(hideControls(0),shrinkBubbles(0),hideBubbles(0));a("#ttControls").removeClass("hidden");a("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").removeClass("no-transition");a("#ttIntroHeader").remove();if(useWaterfallFormat){a(".ttBubble").remove();for(var a=[],b=[],d=0;d<productFrames.length&&
5>a.length;d++)b.includes(productFrames[d].product_id)||(a.splice(0,0,productFrames[d]),b.push(productFrames[d].product_id));showBubblesFromList(a)}else showBubblesForFrame(videoTime)},playIntroAnimationNew=function(){function a(){d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttFeaturedProductImage:not(.out):first").attr("data-background-image")+"')");d(".ttFeaturedProductImage.out").each(function(a,b){d(b).animate({left:parseInt(d(b).css("left"))+83+"px"},400)});setTimeout(function(){d(".ttFeaturedProductImage:not(.out):first").css({height:"auto",
width:"40.92px",opacity:"0.5"});d(".ttFeaturedProductImage:not(.out):first").animate({opacity:"1",width:"76px",left:"16px",top:"0px"},500);1==d(".ttFeaturedProductImage:not(.out)").length&&d("#ttVideoProductsContainerInner").animate({opacity:"0"},500);setTimeout(function(){d(".ttBubble:last .ttBubbleImage").css("background-image","none");d(".ttFeaturedProductImage:not(.out):first").addClass("out");0<d(".ttFeaturedProductImage:not(.out)").length?a():(setTimeout(function(){d("#ttOptOutBox").animate({left:"110px",
opacity:"1"},350)},300),setTimeout(function(){d(".ttFeaturedProductContainer").addClass("no-interaction");d("#ttOptOutBox").animate({left:"27px",opacity:"0"},350);setTimeout(function(){d("#ttVideoProductsContainerInner").animate({opacity:"1"},300);b()},500)},5E3))},500)},400)}function b(){d(".ttFeaturedProductImage.out").each(function(a,b){a!=d(".ttFeaturedProductImage.out").length-1&&d(b).animate({left:parseInt(d(b).css("left"))-83+"px"},500)});d(".ttBubble:last .ttBubbleImage").css("background-image",
"url('"+d(".ttFeaturedProductImage.out:last").attr("data-background-image")+"')");d(".ttFeaturedProductImage.out:last").css({height:d(".ttFeaturedProductImage.out:last").height()+"px",width:"auto"});d(".ttFeaturedProductImage.out:last").animate({height:"70px",top:"12px",left:"31px",opacity:"0"},350);setTimeout(function(){d(".ttFeaturedProductImage.out:last").removeClass("out");0<d(".ttFeaturedProductImage.out").length?b():(d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttBubble:last").attr("data-background-image")+
"')"),d("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","130px"),d("#ttVideoProductsContainer").css("width","150px"),endSnipe(),d("#ttVideoProductsContainerInner").removeClass("no-interaction"),d(".ttFeaturedProductContainer").addClass("no-interaction"),optedOut?(d("#ttVideoProductsContainerOuter, #ttCoachMarkContainer, #ttVideoBlocker, #ttControls").remove(),resetPage()):shrinkBubbles(2500))},500)}var d=jQuery;d("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width",
"430px");d("#ttVideoProductsContainer").css("width","450px");d("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").addClass("no-transition");d("#ttVideoProductsContainerOuter").addClass("player-hover");d("#ttVideoProductsContainerOuter, #ttVideoProductsContainer").animate({opacity:"1"},500);d("#ttVideoProductsContainerInner").addClass("no-interaction");d(".ttFeaturedProductContainer").removeClass("no-interaction");d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttFeaturedProductImage:not(.out):first").attr("data-background-image")+
"')");d("#ttCoachMarkContainer").css({top:"32px",left:"75px",opacity:"1",display:"block"});d("#ttCoachMarkContainer div").css({width:"255px",left:"-100px"});setTimeout(function(){d("#ttCoachMarkContainer div").animate({left:"25px",opacity:"1"},300)},650);setTimeout(function(){d("#ttCoachMarkContainer div").animate({left:"-100px",opacity:"0"},300)},3500);setTimeout(function(){a()},4E3)},playIntroAnimation=function(a){var b=jQuery;jQuery.cookieStorage.set("ttDoneIntroAnimation",!0);"undefined"===typeof a&&
(a=!0);2269!=videoId&&2331!=videoId&&2298!=videoId&&"Hallmark"!=analyticsSource&&0>ttIntroGroupId&&a&&ttPauseVideo();if(isBamPublisher){if(useWaterfallFormat){for(var d=[],c=[],e=0;e<productFrames.length&&5>d.length;e++)c.includes(productFrames[e].product_id)||(d.splice(0,0,productFrames[e]),c.push(productFrames[e].product_id));showBubblesFromList(d)}b("\x3cdiv id\x3d'ttIntroHeader' style\x3d'opacity:0;position:absolute;top:8px;left:14px;font-size:10px;font-family:HelveticaNeue-Medium, sans-serif;letter-spacing:0;text-shadow:0px 2px 4px rgba(0,0,0,0.25);width:70px;color:white;text-align:center;line-height:13px;z-index:9;'\x3eSHOPPING PREVIEW\x3c/div\x3e").insertAfter(b("#ttVideoProductsContainerOuter"));
b(".tt-product-divider:last").css("display","none")}else 1==ttUserGroupId&&b("#ttCoachMarkContainer").css({"margin-top":"3px","margin-left":"-10px"});setTimeout(function(){b("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").addClass("no-transition");b("#ttVideoProductsContainerOuter").addClass("player-hover");b("#ttVideoProductsContainerOuter, #ttVideoProductsContainer").animate({opacity:"1"},500);b(".ttBubble:last .ttBubbleInfo-inner").css({width:"0%",overflow:"hidden"});animateBubblesOut();
b(document).trigger("ttBubblesOutIntro",[300]);b("#ttCoachMarkContainer").css({top:isBamPublisher?"46px":"65px",left:"100px",opacity:"1",display:"block"});b("#ttCoachMarkContainer *").css({width:"255px",left:"-100px"});b("#ttIntroHeader").animate({opacity:"1"},300);snipeTimers.push(setTimeout(function(){b("#ttCoachMarkContainer *").animate({left:"35px",opacity:"1"},300)},650));snipeTimers.push(setTimeout(function(){b("#ttCoachMarkContainer *").animate({left:"-100px",opacity:"0"},300)},2900));snipeTimers.push(setTimeout(function(){b(".ttBubble:last .ttBubbleInfo-inner").animate({width:"100%"},
400);b("#ttCoachMarkContainer").animate({opacity:"0"},250)},3300));snipeTimers.push(setTimeout(function(){b(".ttBubble:last .ttBubbleInfo-inner").animate({width:"0%"},400)},5300));snipeTimers.push(setTimeout(function(){b(".ttBubble:last").css("margin-top","");snipeTimers.push(setTimeout(function(){b(".ttBubble:last .ttBubbleInfo-inner").css({width:"100%",overflow:"visible"});b("#ttIntroHeader").remove()},300));b("#ttIntroHeader").animate({opacity:"0"},300);b("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").removeClass("no-transition");
animateBubblesIn();b(document).trigger("ttBubblesInIntro");b("#ttControls").removeClass("hidden");hideBubbles(1E4);hideControls(controlsHideDelay);a&&ttPlayVideo();endSnipe()},5750))},2E3)},playOptOutAnimation=function(){function a(){d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttFeaturedProductImage:not(.out):first").attr("data-background-image")+"')");d(".ttFeaturedProductImage.out").each(function(a,c){d(c).animate({left:parseInt(d(c).css("left"))+83+"px"},400)});setTimeout(function(){d(".ttFeaturedProductImage:not(.out):first").css({height:"auto",
width:"40.92px",opacity:"0.5"});d(".ttFeaturedProductImage:not(.out):first").animate({opacity:"1",width:"76px",left:"16px",top:"0px"},500);1==d(".ttFeaturedProductImage:not(.out)").length&&d("#ttVideoProductsContainerInner").animate({opacity:"0"},500);setTimeout(function(){d(".ttBubble:last .ttBubbleImage").css("background-image","none");d(".ttFeaturedProductImage:not(.out):first").addClass("out");0<d(".ttFeaturedProductImage:not(.out)").length?a():(d("#ttOptOutBox").animate({top:"4px",opacity:"1"},
350),c=setTimeout(function(){d(".ttFeaturedProductContainer").addClass("no-interaction");d("#ttOptOutBox").animate({top:"-50px",opacity:"0"},350);setTimeout(function(){d("#ttVideoProductsContainerInner").animate({opacity:"1"},300);b()},500)},1E4))},500)},400)}function b(){d(".ttFeaturedProductImage.out").each(function(a,c){a!=d(".ttFeaturedProductImage.out").length-1&&d(c).animate({left:parseInt(d(c).css("left"))-83+"px"},500)});d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttFeaturedProductImage.out:last").attr("data-background-image")+
"')");d(".ttFeaturedProductImage.out:last").css({height:d(".ttFeaturedProductImage.out:last").height()+"px",width:"auto"});d(".ttFeaturedProductImage.out:last").animate({height:"70px",top:"12px",left:"31px",opacity:"0"},350);setTimeout(function(){d(".ttFeaturedProductImage.out:last").removeClass("out");0<d(".ttFeaturedProductImage.out").length?b():(d(".ttBubble:last .ttBubbleImage").css("background-image","url('"+d(".ttBubble:last").attr("data-background-image")+"')"),d("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width",
"130px"),d("#ttVideoProductsContainer").css("width","150px"),endSnipe(),d("#ttVideoProductsContainerInner").removeClass("no-interaction"),d(".ttFeaturedProductContainer").addClass("no-interaction"),optedOut?(d("#ttVideoProductsContainerOuter, #ttCoachMarkContainer, #ttVideoBlocker, #ttControls").remove(),resetPage()):shrinkBubbles(2500))},500)}var d=jQuery;d("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","430px");d("#ttVideoProductsContainer").css("width","450px");d("#ttVideoProductsContainerLogo, #ttVideoProductsContainerLogo img").addClass("no-transition");
d("#ttVideoProductsContainerOuter").addClass("player-hover");d("#ttVideoProductsContainerOuter, #ttVideoProductsContainer").animate({opacity:"1"},500);d("#ttVideoProductsContainerInner").addClass("no-interaction");d(".ttFeaturedProductContainer").removeClass("no-interaction");var c=void 0;setTimeout(function(){a()},1500);d("#ttOptOutAcceptButton").click(function(){clearTimeout(c);d("#ttOptOutBox").animate({top:"-50px",opacity:"0"},350);setTimeout(function(){d("#ttVideoProductsContainerInner").animate({opacity:"1"},
300);b()},500)});d("#ttOptOutRejectButton").click(function(){clearTimeout(c);d("#ttOptOutBox").animate({top:"-50px",opacity:"0"},350);setTimeout(function(){d("#ttVideoProductsContainerInner").animate({opacity:"1"},300);b()},500);recordAnalyticsAction("navigation","opt out",{vid:videoId,video_time:videoTime,fullscreen:document.isFullscreen()});optedOut=!0})},endSnipe=function(){"undefined"!==typeof currentSnipe&&(currentSnipe.finished=!0);currentSnipe&&"intro"==currentSnipe.type&&isBamPublisher&&useWaterfallFormat&&
(bamNeedToClearProductsAfterIntro=!0);currentSnipe=void 0;playingSnipe=!1;jQuery(document).trigger("ttSnipeEnded")},cancelSnipe=function(){playingSnipe=!1;for(var a=0;a<snipeTimers.length;a++)clearTimeout(snipeTimers[a]);"intro"==currentSnipe.type&&cancelIntroAnimation();endSnipe()},playSnipe=function(a){1==a.finished||playingSnipe||(playingSnipe=!0,currentSnipe=a,console.log("[TT] PLAY SNIPE: ",a),jQuery(document).trigger("ttSnipeStarted"),"intro"==a.type?playIntroAnimation(!1!==a.autoPause):"intro new"==
a.type?playIntroAnimationNew(a):"featured outfit"==a.type&&playFeaturedProductAnimation(a))},showBubblesFromList=function(a){var b=jQuery;b("#ttVideoProductsContainerOuter").css("display","block");for(var d={},c=0;c<a.length;c++){var e=a[c].product_id;useWaterfallFormat&&0<b(".ttBubble \x3e a[data-id\x3d'"+e+"']").length&&b(".ttBubble \x3e a[data-id\x3d'"+e+"']").parent().remove();e=products[e];e.characterName||(e.characterName="Unknown");null==d[e.characterName]&&(d[e.characterName]=[]);d[e.characterName].push(e)}a=
[];for(var f in d){c=-1;for(e in d[f])e.trendingScore>c&&(c=e.trendingScore);a.push({actor:f,trendingScore:c})}a.sort(function(a,c){return c.trendingScore-a.trendingScore});for(e=0;e<a.length;e++){f=a[e].actor;c=d[f];c.sort(function(a,c){return c.trendingScore-a.trendingScore});var h=c[0].characterName;10<h.length&&(h=c[0].characterName.substring(0,0<c[0].characterName.indexOf(" ")?c[0].characterName.indexOf(" "):c[0].characterName.length));"Unknown"==h&&(h="Extras");useWaterfallFormat&&0!=b(".tt-product-divider").length||
!(2480!=videoId||2480==videoId&&102250<videoTime||0==b(".tt-product-divider").length)||b("#ttVideoProductsContainerInner").prepend(b("\x3cdiv class\x3d'tt-product-divider' style\x3d'opacity:0;top:0px;'\x3e\x3cdiv\x3e"+h+"\x3c/div\x3e\x3c/div\x3e"));for(h=0;h<c.length;h++){var k="\x3cdiv class\x3d'ttBubble"+(TheTakeMetaOverlay.isProductFavorite(c[h].product_id)?" favorite":"")+"' data-actor\x3d'"+f+"' data-background-image\x3d'"+c[h].productImage+"'\x3e\x3cdiv class\x3d'ttBubbleImage' style\x3d'background-color:white;background-image:url(\""+
c[h].productImage+"\");'\x3e\x3c/div\x3e\x3ca href\x3d'#' data-id\x3d'"+c[h].product_id+"'\x3e\x3c/a\x3e\x3cdiv class\x3d'ttBubbleInfo' style\x3d''\x3e\x3cdiv class\x3d'ttBubbleInfo-inner'\x3e\x3cdiv class\x3d'ttBubbleInfo-inner-collapsed"+(152==c[h].primaryCategory?" location":"")+"'\x3e\x3cdiv class\x3d'ttBubbleMatchType'\x3e"+(c[h].verified?"EXACT":"CLOSE")+"\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-image-click-target'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-left'\x3e\x3cdiv class\x3d'ttBubbleInfo-brand'\x3e"+
c[h].brand+"\x3c/div\x3e"+(0<ttUserGroupId?"\x3cdiv class\x3d'ttBubbleInfo-name'\x3e"+c[h].name+"\x3c/div\x3e":useWaterfallFormat||universalCart?"\x3cdiv class\x3d'ttBubbleInfo-name'\x3e"+c[h].name+"\x3c/div\x3e":"\x3cdiv class\x3d'ttBubbleInfo-name' style\x3d'display:none'\x3e"+c[h].name+"\x3c/div\x3e")+"\x3cdiv class\x3d'ttBubbleInfo-more videoModalPrice'\x3e"+TheTakeMetaOverlay.localizedPrice(c[h].price)+"\x3c/div\x3e"+getFavoriteSvg()+"\x3c/div\x3e\x3cdiv class\x3d'ttCompDivider' style\x3d'"+
(152==c[h].primaryCategory?"visibility:hidden;":"")+"width:1px;height:100%;display:inline-block;background-color:rgba(255,255,255,0.15);vertical-align:middle;'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-right'\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comps-title'\x3e"+ttCompsTitleText+"\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comps-container'\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp ttBubbleInfo-comp1'\x3e"+(0<ttUserGroupId?"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-info' data-type\x3d'text'\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-brand'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-name'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-buy' data-type\x3d'text'\x3e$49.99\x3c/div\x3e\x3c/div\x3e":
"")+"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-image' data-type\x3d'image'\x3e\x3cdiv\x3e\x3cdiv\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-text' data-type\x3d'text'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"+(0<ttUserGroupId?"":"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-buy' data-type\x3d'text'\x3e$49.99\x3c/div\x3e")+"\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp ttBubbleInfo-comp2'\x3e"+(0<ttUserGroupId?"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-info' data-type\x3d'text'\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-brand'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-name'\x3e\x3c/div\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-buy' data-type\x3d'text'\x3e$49.99\x3c/div\x3e\x3c/div\x3e":
"")+"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-image' data-type\x3d'image'\x3e\x3cdiv\x3e\x3cdiv\x3e\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-text' data-type\x3d'text'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"+(0<ttUserGroupId?"":"\x3cdiv class\x3d'ttBubbleInfo-collapsed-comp-buy' data-type\x3d'text'\x3e$49.99\x3c/div\x3e")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";useWaterfallFormat?b("#ttVideoProductsContainerInner").append(b(k)):
b("#ttVideoProductsContainerInner").prepend(b(k));(function(a){a.unavailable||a.customMade?b(this).find(".ttBubbleInfo-more").html("MORE INFO"):a.soldOut?b(this).find(".ttBubbleInfo-more").html("SOLD OUT"):/\d/.test(a.price)||b(this).find(".ttBubbleInfo-more").html("MORE INFO");hidePrices?b(this).find(".ttBubbleInfo-more").html("Shop"):universalCart&&b(this).find(".ttBubbleInfo-more").html("ADD TO CART");b(this).find(".ttBubbleInfo-more").off();b(this).find(".ttBubbleInfo-more").click(function(c){c.preventDefault();
recordBuy("main product click",a.product_id,a.movieName,parseInt(videoTime),a.brand,a.name,a.actorName,a.verified?"exact":"close","N",a.unavailable||a.customMade?"unavailable":a.soldOut?"sold out":a.price,a.price,a.purchaseLink,a.primaryCategoryName+(0<a.secondaryCategory?", "+a.secondaryCategoryName:"")+(0<a.tertiaryCategory?", "+a.tertiaryCategoryName:""),b(this).hasClass("videoModalPrice")?"button":"image","video");universalCart?(b(this).html("ADDED"),b("#ttCartButton \x3e span").html(parseInt(b("#ttCartButton \x3e span").html())+
1),b("#tt-bag-notification-image").css("background-image","url("+a.productImage+")"),b("#tt-bag-notification").stop().animate({opacity:"1"},500),setTimeout(function(){b("#tt-bag-notification").stop().animate({opacity:"0"},500)},3500),ttCart.push({url:a.purchaseLink})):(window.open(affiliateUrl(a.product_id,a.currentVersionNumber,-1,-1,a.purchaseLink)),animateBubblesIn(),enableScrollbar())});b(this).find(".ttFavorite").click(function(){var c=b(this).parents(".ttBubble");c.hasClass("favorite")?(TheTakeMetaOverlay.removeProductFavorite(TheTakeMetaOverlay.getOutfitIdFromBubbles(a),
a.product_id),c.removeClass("favorite"),recordFavorite("remove favorite",a,{location:"bubbles"})):(TheTakeMetaOverlay.addProductFavorite(TheTakeMetaOverlay.getOutfitIdFromBubbles(a),a.product_id,!1),c.addClass("favorite"),recordFavorite("add favorite",a,{location:"bubbles"}))})}).call(b(useWaterfallFormat?".ttBubble:last":".ttBubble:first"),c[h])}}useWaterfallFormat&&b(".tt-product-divider").detach().appendTo(b("#ttVideoProductsContainerInner"));bubblesExpanded||(b(".ttBubbleImage").css("background-image",
"none"),b(".ttBubble").last().find(".ttBubbleImage").css("background-image","url('"+b(".ttBubble").last().attr("data-background-image")+"')"));var g=0,m=b(".tt-product-divider").length,l=0;b("#ttVideoProductsContainerInner \x3e div").each(function(a){if(b(this).hasClass("tt-product-divider"))l++;else if(ttHasBuyNow&&b(this).hasClass("tt-product-btn"))b(this).click(function(a){a.stopPropagation();a.preventDefault();recordAnalyticsAction("navigation","buy movie button clicked - when "+(temporaryPause?
"hovered":"paused"),{vid:videoId,video_time:videoTime,video_title:products[0].movieName,type:"video player"});!probablyMobile||bubblesExpanded||isPaused?(temporaryPause=!1,console.log("[TT] Launch buy movie modal"),showBuyNow(),b(".ttBubble").removeClass("selected").removeClass("highlighted"),isIOS&&!isIPad&&window!==window.parent||b("#ttVideoProductsContainer").addClass("selected")):ttPauseVideo()});else{b(this).css("top",(bubblesExpanded?-25:0)+bubbleSpacing+(bubblesExpanded?b(".ttBubble").length-
1-g:2>g?g:2)*(bubblesExpanded?bubbleHeight+bubbleSpacing:unexpandedBubbleHeight)+(bubblesExpanded?(m-l)*dividerExtraSpacing:0)+(ttHasBuyNow&&bubblesExpanded?30:0)+"px");if(isTouchDevice())b(this).off().on("click",function(a){b(a.target).hasClass("ttBubbleInfo-more")||b(a.target).hasClass(".ttBubbleInfo-collapsed-comp-buy")||b(a.target).hasClass(".ttBubbleInfo-collapsed-comp-image")||b(a.target).hasClass(".ttBubbleInfo-collapsed-comp-text")||a.stopPropagation();a.preventDefault();bubblesExpanded?b(this).hasClass("hover")||
(hideBubbleInfo(),showBubbleInfoCollapsed.bind(this)()):(playingSnipe&&cancelSnipe(),ttPauseVideo(),animateBubblesOut(),b(document).trigger("ttBubblesOutShowBubblesForFrameTouch",[300]))});isTouchDevice()||(b(this).find(".ttBubbleInfo-image-click-target")[0].onclick=function(a){a.stopPropagation();a.preventDefault();a=b(this).closest(".ttBubble").find("a").attr("data-id");a=products[a];ttPauseVideo();recordBuy("main product click",a.product_id,a.movieName,parseInt(videoTime),a.brand,a.name,a.actorName,
a.verified?"exact":"close","N",a.unavailable||a.customMade?"unavailable":a.soldOut?"sold out":a.price,a.price,a.purchaseLink,a.primaryCategoryName+(0<a.secondaryCategory?", "+a.secondaryCategoryName:"")+(0<a.tertiaryCategory?", "+a.tertiaryCategoryName:""),"image","video");universalCart?(b(this).closest(".ttBubble").find(".ttBubbleInfo-more").html("ADDED"),b("#ttCartButton \x3e span").html(parseInt(b("#ttCartButton \x3e span").html())+1),b("#tt-bag-notification-image").css("background-image","url("+
a.productImage+")"),b("#tt-bag-notification").stop().animate({opacity:"1"},500),setTimeout(function(){b("#tt-bag-notification").stop().animate({opacity:"0"},500)},3500),ttCart.push({url:a.purchaseLink})):(window.open(affiliateUrl(a.product_id,a.currentVersionNumber,-1,-1,a.purchaseLink)),animateBubblesIn(),enableScrollbar())});g++}});bubblesExpanded?b(".tt-product-divider").each(function(a){b(this).css("opacity","0.9");b(this).css("top",parseInt(b(this).prev().css("top"))-(bubbleSpacing+dividerExtraSpacing)/
2-2+"px")}):b(".bubbles-arrow").hide();b("#ttVideoProductsContainerInner").css("height",2*bubbleSpacing+bubbleHeight+(bubblesExpanded?g-1:2>g?g:2)*(bubblesExpanded?bubbleHeight+bubbleSpacing:unexpandedBubbleHeight)+(bubblesExpanded?m*dividerExtraSpacing:0)+"px");0===numBubblesPrev&&0<g?b(document).trigger("ttBubblesNonZero"):0<numBubblesPrev&&0===g&&b(document).trigger("ttBubblesZero");numBubblesPrev=g},showBubblesForFrame=function(a){var b=jQuery;if(delayUpdateForMinimalTransition)delayUpdateForMinimalTransition=
!1;else if(!playingSnipe&&void 0!=productFrames&&0!=productFrames.length&&!temporaryPause){b("#ttVideoProductsContainerOuter").css("display","block");var d=0,c=0,e=0,f=0,h=-1,k=-1;a<latestTimecode&&(latestFrameIndex=latestTimecode=0);for(var g=latestFrameIndex;g<productFrames.length&&999999999>productFrames[g].time;g++)if(a==productFrames[g].time){k=g;h=productFrames[g].time;latestFrameIndex=g;latestTimecode=productFrames[g].time;break}else if(a>productFrames[g].time)for(c=g,d=productFrames[g].time;g+
1<productFrames.length&&productFrames[g].time==productFrames[g+1].time;)g++;else{f=g;e=productFrames[g].time;break}if(0>k&&0>h)if(h=Math.abs(d-a),k=Math.abs(e-a),latestFrameIndex=c,latestTimecode=d,h<=k&&1E3>=h||0==e)k=c,h=d;else if(1E3>=k||3E4>k&&a>productFrames[0].time)k=f,h=e;else{useWaterfallFormat&&0!=b(".ttBubble").length||(b("#ttVideoProductsContainerOuter").css("display","none"),0<numBubblesPrev&&b(document).trigger("ttBubblesZero"),numBubblesPrev=0);return}useWaterfallFormat||b("#ttVideoProductsContainerInner \x3e *").not("#tt-buy-now").remove();
a=[];for(g=k;g<productFrames.length&&productFrames[g].time==h;g++)a.push(productFrames[g]);showBubblesFromList(a)}},resetPage=function(){var a=jQuery;console.log("[TT] Resetting page");playingSnipe=isExperienceEnabled=!1;for(var b=0;b<snipeTimers.length;b++)clearTimeout(snipeTimers[b]);snipeTimers=[];products={};productFrames=[];comps={};"hidden"==a("body").css("overflow")&&a("body").css("overflow","auto");a(playerRoot).children(".fluid-width-video-wrapper").show();a("#ttVideoProductsContainerOuter").css("display",
"none");a("#ttVideoProductsContainerInner \x3e *").not("#tt-buy-now").remove();a("#ttVideoProductsContainer").removeClass("selected");animateBubblesIn();a(".iOSPlayer").hide();probablyMobile||a("#dotHoverPreviewImage").hide();a("#tile-container").css("max-height","800px");a("#tiles").html("");a("#tilesExpand").hide();a("#tile-container \x3e img.ttLoadingCircle").show();a("#shop-looks-container").hide();a("#ttPreviewContainer").remove();a("#powered-by-thetake").fadeOut(500)},getVideoData=function(a,
b,d){var c=jQuery;if(0==b&&(0==d||-1==d)){resetPage();if(0>a){isExperienceEnabled=!1;return}isExperienceEnabled=!0;c("#powered-by-thetake").fadeIn(1500)}if(0!=b||0!=d){var e=getFrameProductsUrl+a+"\x26start\x3d"+b+"\x26length\x3d"+(-1==d?99999999:d);console.log("[TT] Getting overlay data: "+e);c.get(e).done(function(a){if(isExperienceEnabled)if("[object String]"==Object.prototype.toString.call(a)&&(a=c.parseJSON(a)),console.info("Found "+a.frame_products.length+" overlay result"+(1==a.frame_products.length?
"":"s")),0==a.frame_products.length)console.error("No results were found");else{productFrames=a.frame_products;latestFrameIndex=latestTimecode=0;var b=[],d;for(d in a.products)products[d]||(products[d]=a.products[d]),(products[d].actorName&&0===products[d].actorName.indexOf("Music")||products[d].characterName&&0===products[d].characterName.indexOf("Music")||products[d].character_id&&4608===products[d].character_id)&&b.push(products[d].product_id);productOutfits={};for(a=0;a<productFrames.length;a++)if(TheTakeMetaOverlay.contains(b,
productFrames[a].product_id))productFrames.splice(a,1),a--;else for(119965==productFrames[a].product_id&&(products[productFrames[a].trendingScore]=99999999),152==products[productFrames[a].product_id].primaryCategory&&(products[productFrames[a].product_id].characterName=products[productFrames[a].product_id].actorName="Locations",products[productFrames[a].product_id].trendingScore=0),d=a+1;d<productFrames.length&&productFrames[d].time==productFrames[a].time;d++)products[productFrames[a].product_id].characterName==
products[productFrames[d].product_id].characterName&&(null==productOutfits[productFrames[a].product_id]&&(productOutfits[productFrames[a].product_id]={}),null==productOutfits[productFrames[d].product_id]&&(productOutfits[productFrames[d].product_id]={}),productOutfits[productFrames[a].product_id][productFrames[d].product_id]=products[productFrames[d].product_id],productOutfits[productFrames[d].product_id][productFrames[a].product_id]=products[productFrames[a].product_id]);console.log(productOutfits);
c("#dotHoverPreviewImage").hide();c(document).trigger("ttGotBubbleData")}else console.log("[TT] Experience disabled while getting overlay data")}).fail(function(){isExperienceEnabled=!1;console.error("Can't get overlay data");resetPage()})}0!=b||-1!=d&&0!=d||(c("#tiles").html(""),c("#tile-container \x3e img.ttLoadingCircle").show(),c("#tile-container").css("max-height","800px"),autoShowOutfits&&c("#shop-looks-container").show(),outfitQueryUrl=getOutfitsUrl+a,console.log("[TT] Getting outfit data: "+
outfitQueryUrl),c.get(outfitQueryUrl).done(function(a){if(isExperienceEnabled)if("[object String]"==Object.prototype.toString.call(a)&&(a=c.parseJSON(a)),console.info("Found "+a.length+" outfit result"+(1==a.length?"":"s")),0==a.length)console.error("No results were found");else{outfits=a;for(a=0;a<outfits.length;a++)for(var b=0;b<outfits[a].length;b++){if("Zalora"==analyticsSource){var d=outfits[a][b].purchaseLink.split("||")[app?1:0],d=d.replace("video_name","videoname").replace("[videoname]",ep.epName),
d=d.replace("[placement]",app?"app":probablyMobile?"mSite":"dSite"),e=document.referrer;c("body").hasClass("mobile")&&(e=window.parent.document.referrer);var m=getURLParameter("utm_source",e),e=getURLParameter("utm_medium",e),d=d.replace("utm_source\x3dHDILA","utm_source\x3d"+(null==m?"HDILA":m)),d=d.replace("utm_medium\x3dVideo","utm_medium\x3d"+(null==e?"Video":e));outfits[a][b].purchaseLink=d;console.log(d)}products[outfits[a][b].product_id]=outfits[a][b]}c(document).trigger("ttGotTileData");if(!probablyMobile||
isIPad){c("#tile-container").addClass("multipleOutfits").css("max-height","1000px").html(getOutfitModal()).append('\x3ca class\x3d"outfit-modal-close" href\x3d"javascript:void(0)"\x3e\x26times;\x3c/a\x3e').append('\x3cdiv class\x3d"character-selector"\x3e\x3c/div\x3e');showFavorites&&(c("#tile-container").append('\x3cdiv id\x3d"favoriteOutfits" style\x3d"display:none"\x3e'+getFavoriteSvg()+'\x3ch2 class\x3d"card-list__title"\x3eFavorites\x3c/h2\x3e\x3cdiv class\x3d"products"\x3e\x3c/div\x3e\x3c/div\x3e\x3ch2 id\x3d"ttMoreOutfitsTitle" class\x3d"card-list__title" style\x3d"display:none"\x3eMore Outfits\x3c/h2\x3e'),
c("html").addClass("tt-favorite-products"));showFsOutfits&&c("html").addClass("tt-fullscreen-outfits");c("body").append('\x3cdiv id\x3d"outfitGreyBackground"\x3e\x3c/div\x3e');b=[];m="";d=c(".multipleOutfits .character-selector");showAllCharactersBubble&&d.append('\x3cdiv class\x3d"character-image'+(isTouchDevice()?" no-hover":"")+' selected" data-id\x3d"0"\x3e\x3cdiv class\x3d"character-image-container" style\x3d"background-image:url(\''+outfits[0][0].productImageLarge+'\')"\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3eAll\x3c/div\x3e\x3c/div\x3e');
for(a=0;a<outfits.length;a++)1<outfits[a][0].character_id&&("undefined"===typeof b[outfits[a][0].character_id]||null===b[outfits[a][0].character_id])&&(m=outfits[a][0].characterName.trim(),e=outfits[a][0].characterImageSmall||outfits[a][0].productImageLarge,m='\x3cdiv class\x3d"character-image'+(isTouchDevice()?" no-hover":"")+'" data-id\x3d"'+outfits[a][0].character_id+'"\x3e\x3cdiv class\x3d"character-image-container" style\x3d"background-image:url(\''+e+'\')"\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+
m+"\x3c/div\x3e\x3c/div\x3e",d.append(m),b[outfits[a][0].character_id]=outfits[a][0]);d.find(".character-image").length<(showAllCharactersBubble?3:2)&&d.remove();var l=function(a){var b=c("#outfitProductModal .similar-container").eq(0),d=c("#outfitProductModal .similar-container").eq(1),p=c("#outfitProductModal .similar-container").eq(2),s=products[a],e=affiliateUrl(s.product_id,s.currentVersionNumber,comps[a][0].id,comps[a][0].currentVersionNumber,comps[a][0].purchaseLink);b.find(".comp1PurchaseLink").attr("href",
e).attr("data-num-product","0").attr("data-source","thetake").attr("data-id",comps[a][0].id).attr("data-pc-id",comps[a][0].product_comp_id);b.find("img").attr("src",comps[a][0]["250pxLink"]);b.find(".brand").text(comps[a][0].brand);b.find(".name").text(comps[a][0].name);b.find(".price").text(comps[a][0].price);e=affiliateUrl(s.product_id,s.currentVersionNumber,comps[a][1].id,comps[a][1].currentVersionNumber,comps[a][1].purchaseLink);d.find(".comp1PurchaseLink").attr("href",e).attr("data-num-product",
"1").attr("data-source","thetake").attr("data-id",comps[a][1].id).attr("data-pc-id",comps[a][1].product_comp_id);d.find("img").attr("src",comps[a][1]["250pxLink"]);d.find(".brand").text(comps[a][1].brand);d.find(".name").text(comps[a][1].name);d.find(".price").text(comps[a][1].price);e=affiliateUrl(s.product_id,s.currentVersionNumber,comps[a][2].id,comps[a][2].currentVersionNumber,comps[a][2].purchaseLink);p.find(".comp1PurchaseLink").attr("href",e).attr("data-num-product","2").attr("data-source",
"thetake").attr("data-id",comps[a][2].id).attr("data-pc-id",comps[a][2].product_comp_id);p.find("img").attr("src",comps[a][2]["250pxLink"]);p.find(".brand").text(comps[a][2].brand);p.find(".name").text(comps[a][2].name);p.find(".price").text(comps[a][2].price);c("#outfitProductModal .similar-container").off().on("click","a",function(b){var d=c(this).parents(".similar-container").index()-1;universalCart&&(b.preventDefault(),c("#ttCartButton \x3e span").html(parseInt(c("#ttCartButton \x3e span").html())+
1),c("#tt-bag-notification-image").css("background-image","url("+comps[a][d]["250pxLink"]+")"),c("#tt-bag-notification").stop().animate({opacity:"1"},500),setTimeout(function(){c("#tt-bag-notification").stop().animate({opacity:"0"},500)},3500),ttCart.push({url:comps[a][d].purchaseLink}));recordBuy("similar style click",comps[a][d].id,s.movieName,parseInt(videoTime),comps[a][d].brand,comps[a][d].name,s.actorName,s.verified?"exact":"close","N",comps[a][d].price,comps[a][d].price,comps[a][d].purchaseLink,
s.primaryCategoryName+(0<s.secondaryCategory?", "+s.secondaryCategoryName:"")+(0<s.tertiaryCategory?", "+s.tertiaryCategoryName:""),0<c(this).find(".similar-image").length?"image":"text","tiles"+(showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length?"-fullscreen":""),{comp_index:d})})},r=function(a){"undefined"===typeof comps[a]||null===comps[a]||3>comps[a].length?c.get(listProductComps+a).done(function(b){b=c.parseJSON(b);comps[a]=b;l(a)}):l(a)};ttLoadOutfitModalContent=function(a,b){var d=
affiliateUrl(b.product_id,b.currentVersionNumber,-1,-1,b.purchaseLink);c("#outfitProductModal").attr("data-id",b.product_id);c("#outfitProductModal").attr("data-outfit-id",a);c("#outfitProductModal #featuredImage").attr("src",b.productImageLarge);c("#outfitProductModal .featured-image-link").attr("href",d);b.verified?(c("#outfitProductModal .featured-details .verified-match").text("EXACT MATCH"),c("#outfitProductModal .featured-details .verified-match").removeClass("close-dot"),c("#outfitProductModal .featured-details .verified-match").addClass("exact-dot")):
(c("#outfitProductModal .featured-details .verified-match").text("CLOSE MATCH"),c("#outfitProductModal .featured-details .verified-match").removeClass("exact-dot"),c("#outfitProductModal .featured-details .verified-match").addClass("close-dot"));c("#outfitProductModal .featured-details .brand").text(b.brand);c("#outfitProductModal .featured-details .name").text(b.name);universalCart?(c("#outfitProductModal .featured-details .price").text(b.price),c("#outfitProductModal .featured-details .buy-button.buyPrice").text("ADD TO CART")):
b.unavailable||b.customMade?c("#outfitProductModal .featured-details .buy-button.buyPrice").text("MORE INFO"):b.soldOut?c("#outfitProductModal .featured-details .buy-button.buyPrice").text("SOLD OUT"):/\d/.test(b.price)?c("#outfitProductModal .featured-details .buy-button.buyPrice").text(b.price):c("#outfitProductModal .featured-details .buy-button.buyPrice").text("MORE INFO");TheTakeMetaOverlay.isProductFavorite(b.product_id,a)?c("#outfitProductModal").addClass("favorite"):c("#outfitProductModal").removeClass("favorite");
var d=c("#outfitProductModal .similar-container").eq(0),p=c("#outfitProductModal .similar-container").eq(1),e=c("#outfitProductModal .similar-container").eq(2);d.find(".comp1PurchaseLink").attr("href","");d.find("img").attr("src","");d.find(".brand").text("");d.find(".name").text("");d.find(".price").text("");p.find(".comp1PurchaseLink").attr("href","");p.find("img").attr("src","");p.find(".brand").text("");p.find(".name").text("");p.find(".price").text("");e.find(".comp1PurchaseLink").attr("href",
"");e.find("img").attr("src","");e.find(".brand").text("");e.find(".name").text("");e.find(".price").text("");r(b.product_id);c("#outfitProductModal .outfitList .outfit-product").removeClass("selected");c("#outfitProductModal .outfitList .outfit-product[data-id\x3d'"+b.product_id+"']").addClass("selected");d=c(".outfit[data-id\x3d'"+a+"'] .outfitCrop");d=0<d.length?d.attr("src"):"";p=c("#outfitProductModal");d?(c("#outfitModalCropImage",p).css("background-image","url('"+d+"')"),p.removeClass("no-outfit-crop")):
(p.addClass("no-outfit-crop"),c("#outfitModalCropImage",p).css("background-image",""))};c("#outfitProductModal").on("click",".featured-image-link",function(a){var b=products[c("#outfitProductModal").attr("data-id")];universalCart&&(a.preventDefault(),0<c(this).find("button").length&&c(this).find("button").html("ADDED"),c("#ttCartButton \x3e span").html(parseInt(c("#ttCartButton \x3e span").html())+1),c("#tt-bag-notification-image").css("background-image","url("+b.productImage+")"),c("#tt-bag-notification").stop().animate({opacity:"1"},
500),setTimeout(function(){c("#tt-bag-notification").stop().animate({opacity:"0"},500)},3500),ttCart.push({url:b.purchaseLink}));recordBuy("main product click",b.product_id,b.movieName,parseInt(videoTime),b.brand,b.name,b.actorName,b.verified?"exact":"close","N",b.unavailable||b.customMade?"unavailable":b.soldOut?"sold out":b.price,b.price,b.purchaseLink,b.primaryCategoryName+(0<b.secondaryCategory?", "+b.secondaryCategoryName:"")+(0<b.tertiaryCategory?", "+b.tertiaryCategoryName:""),0<c(this).find(".buy-button").length?
"button":"image","tiles"+(showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length?"-fullscreen":""))});(function(a,b){for(var d=0;d<a.length;d++)c("#tile-container").append(getOutfitHtmlDesktop(d,a[d])),c("#tile-container .outfit[data-id\x3d'"+d+"'] .product-thumb-container[data-id]").click(function(){var b=parseInt(c(this).parents(".outfit").first().data("id"),10),d=c(this).index();c(this).siblings(".showMore").length&&c(this).siblings(".showMore").index()<d&&d--;var e=a[b][d];showFsOutfits&&
0<c("#ttFsOutfits .multipleOutfits").length||(TheTakeMetaOverlay.pauseOnModalOpen&&ttPauseVideo(),c("#tilesExpand").click());recordModalInteraction("overlay open - click outfit product",e,{to_index:d,outfit_index:b});c(".outfit .outfit-crop-container").css("z-index",ttCropZindexLow);450<c(this).position().top?(c("#outfitProductModal").css("top",c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top+"px"),c("a.outfit-modal-close").css("top",
c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top-5+"px")):(c("#outfitProductModal").css("top",c(this).parents(".outfit").offset().top+1-c("#outfitProductModal").closest(".multipleOutfits").offset().top+"px"),c("a.outfit-modal-close").css("top",c(this).parents(".outfit").offset().top-c("#outfitProductModal").closest(".multipleOutfits").offset().top-4+"px"));c("#outfitProductModal").attr("data-id",e.product_id);c("#outfitProductModal").attr("data-outfit-id",
b);ttLoadOutfitModalContent(b,e);c("#outfitProductModal").attr("data-favtile",!1);c("#outfitProductModal .outfitList").empty();for(d=0;d<a[b].length;d++)c("#outfitProductModal .outfitList").append("\x3cdiv"+(TheTakeMetaOverlay.isProductFavorite(a[b][d].product_id,b)?' class\x3d"favorite"':"")+'\x3e\x3cimg class\x3d"outfit-product'+(a[b][d].product_id===e.product_id?" selected":"")+'" data-id\x3d"'+a[b][d].product_id+'" src\x3d"'+a[b][d].productImageLarge+'"\x3e'+getFavoriteSvg()+"\x3c/div\x3e");c("#outfitProductModal .outfitList .outfit-product").click(function(){c(this).hasClass("selected")||
(recordModalInteraction("overlay open - video outfit thumbnail",a[b][c(this).parent().index()],{from_index:c(".outfit-product.selected").index(),to_index:c(this).parent().index(),outfit_index:b}),ttLoadOutfitModalContent(c("#outfitProductModal").attr("data-outfit-id"),a[b][c(this).parent().index()]))});c("#outfitGreyBackground").fadeIn();c("#at4-share").css("z-index","1");450>c(this).position().top&&c(".outfit[data-id\x3d'"+b+"'] .outfit-crop-container").css("z-index","51");c("#outfitProductModal,.outfit-modal-close").addClass("modal-visible")});
c("#tile-container .outfit .product-thumb-container[data-id] .ttFavorite").click(function(b){b.stopPropagation();b=a[parseInt(c(this).parents(".outfit").attr("data-id"),10)][0].outfit_id;var d=parseInt(c(this).parent().attr("data-id"),10);c(this).parent().hasClass("favorite")?(TheTakeMetaOverlay.removeProductFavorite(b,d,!1),recordFavorite("remove favorite",products[d],{location:"tiles"})):(TheTakeMetaOverlay.addProductFavorite(b,d,!1),recordFavorite("add favorite",products[d],{location:"tiles"}))});
c(".character-image").click(function(){showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length||(ttPauseVideo(),c("#tilesExpand").click());var b=parseInt(c(this).attr("data-id"),10),d=c("#favoriteOutfits .product-thumb-container"),e=c(this).hasClass("selected");if(0==b)e||(c("#tile-container .outfit").removeClass("hideName").show(),c(".character-image").removeClass("selected").removeClass("not-selected"),c(this).addClass("selected"),0<d.length?(c("#favoriteOutfits,#tile-container \x3e h2").css({display:"block"}),
d.show()):(c("#favoriteOutfits,#tile-container \x3e h2").css({display:"none"}),d.hide()),recordAnalyticsAction("navigation","character filter show all",{vid:videoId,video_time:videoTime}));else if(e)c("#tile-container .outfit").removeClass("hideName").show(),c(".character-image").removeClass("selected").removeClass("not-selected"),showAllCharactersBubble&&c(".character-image:first").addClass("selected"),0<d.length?(c("#favoriteOutfits,#tile-container \x3e h2").css({display:"block"}),d.show()):(c("#favoriteOutfits,#tile-container \x3e h2").css({display:"none"}),
d.hide()),recordAnalyticsAction("navigation","cancel character filter",{vid:videoId,video_time:videoTime,character_id:b});else{c(".character-image").removeClass("selected").addClass("not-selected");c(this).addClass("selected").removeClass("not-selected");for(e=0;e<a.length;e++)a[e][0].character_id===b?c("#tile-container .outfit[data-id\x3d'"+e+"']").addClass("hideName").show():c("#tile-container .outfit[data-id\x3d'"+e+"']").removeClass("hideName").hide();0<d.length?(c("#favoriteOutfits,#tile-container \x3e h2").css({display:"block"}),
d.each(function(d){d=parseInt(c(this).attr("data-outfit-id"),10);a[d][0].character_id===b?c(this).show():c(this).hide()}),1>d.filter(":visible").length&&c("#favoriteOutfits,#tile-container \x3e h2").css({display:"none"})):c("#favoriteOutfits,#tile-container \x3e h2").css({display:"none"});c("#tile-container .outfit.hideName").first().removeClass("hideName");recordAnalyticsAction("navigation","character filter",{vid:videoId,video_time:videoTime,character_id:b})}});c("#outfitGreyBackground,.outfit-modal-close").click(function(){c("#outfitProductModal,.outfit-modal-close").removeClass("modal-visible");
c(".outfit .outfit-crop-container").css("z-index",ttCropZindexLow);c("#outfitGreyBackground").fadeOut();c("#at4-share").css("z-index","100020")});c("#tilesExpand").off().click(function(a){a.preventDefault();c(this).hide();c("#tile-container").css("overflow","visible").css("max-height","none");recordAnalyticsAction("navigation","expand tiles",{vid:videoId});c(this).off();ttPauseVideo()});c("#tile-container .outfit").on("click",".product-thumb-container.showMore",function(){parseInt(c(this).parents(".outfit").first().data("id"),
10);c(this).parents(".outfit").first().find(".product-thumb-container[data-id]").show();c(this).parents(".outfit").first().addClass("moreShown");c(this).remove();c("#tilesExpand").click()});c(".ttLoadingCircle").remove();c("#tilesExpand").show();c("#tilesExpand .view-more").css("z-index","51")})(outfits,0);changeOutfitProductTiles=function(a){var b=c(window).width();a='\x3cdiv class\x3d"showMore product-thumb-container'+(isTouchDevice()?"":" hover")+'" style\x3d"display: block;"\x3e\x3cdiv class\x3d"show-more-text"\x3eSHOW ALL...\x3c/div\x3e\x3c/div\x3e';
if(showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length){var d=0,d=c(window).height(),e;e=0;var f,n=0;1190<=b?(e=2*ttVideoPadding,n=ttVideoPadding,c(ttPlayerDiv).add("#ttPlayerContent").removeClass("condensed")):c(ttPlayerDiv).add("#ttPlayerContent").addClass("condensed");864>=b?(e=512-e,f=.5625*e,c(ttPlayerDiv).css({right:"",left:n+"px",width:e+"px",height:f+"px",top:(d-f)/2+"px"}),c("#ttPlayerContent").css({right:"",width:"512px"}),d=b-512,c("#ttFsOutfits").css({width:"auto",right:0,left:"512px"}),
c(".multipleOutfits #outfitProductModal .outfit-list-container").css({display:"none"}),c(".multipleOutfits #outfitProductModal .left-side").css({"padding-right":0}),c("#ttFsOutfits").removeClass("oneCol twoCol threeCol")):864<b&&1230>=b?(e=b-352-e,f=.5625*e,c(ttPlayerDiv).css({right:"352px",left:n+"px",width:e+"px",height:f+"px",top:(d-f)/2+"px"}),c("#ttPlayerContent").css({right:"352px",width:b-352+"px"}),d=352,c("#ttFsOutfits").css({width:"352px",right:0,left:"auto"}),c(".multipleOutfits #outfitProductModal .outfit-list-container").css({display:"none"}),
c(".multipleOutfits #outfitProductModal .left-side").css({"padding-right":0}),c("#ttFsOutfits").removeClass("twoCol threeCol").addClass("oneCol")):1004<b&&1580>=b?(e=b-492-e,f=.5625*e,c(ttPlayerDiv).css({right:"492px",left:n+"px",width:e+"px",height:f+"px",top:(d-f)/2+"px"}),c("#ttPlayerContent").css({right:"492px",width:b-492+"px"}),d=492,c("#ttFsOutfits").css({width:"492px",right:0,left:"auto"}),c(".multipleOutfits #outfitProductModal .outfit-list-container").css({display:"none"}),c(".multipleOutfits #outfitProductModal .left-side").css({"padding-right":0}),
c("#ttFsOutfits").removeClass("oneCol threeCol").addClass("twoCol")):(e=b-632-e,f=.5625*e,c(ttPlayerDiv).css({right:"632px",left:n+"px",width:e+"px",height:f+"px",top:(d-f)/2+"px"}),c("#ttPlayerContent").css({right:"632px",width:b-632+"px"}),d=632,c("#ttFsOutfits").css({width:"632px",right:0,left:"auto"}),c(".multipleOutfits #outfitProductModal .outfit-list-container").css({display:""}),c(".multipleOutfits #outfitProductModal .left-side").css({"padding-right":""}),c("#ttFsOutfits").removeClass("oneCol twoCol").addClass("threeCol"));
var d=d-20-getScrollBarWidth(),h=Math.floor((d-162)/140),g=Math.floor(fsMode.tileAreaWidthNoCrop/(fsMode.smallTile+fsMode.tileMargin));302>d?c("#ttFsOutfits").addClass("squeeze"):c("#ttFsOutfits").removeClass("squeeze");950>d?c("#ttFsOutfits #tile-container").addClass("condensed"):c("#ttFsOutfits #tile-container").removeClass("condensed");for(b=0;b<outfits.length;b++){var n=c("#tile-container .outfit[data-id\x3d'"+b+"']"),k=!n.hasClass("no-outfit-crop"),k=k?h:g;n.hasClass("moreShown")||(0<k&&302<=
d?outfits[b].length<=2*k?(n.find(".product-thumb-container.showMore").remove(),outfits[b].length<=2*k-3?(n.find(".product-thumb-container").eq(0).css({width:"270px",height:"270px"}).children(".product").css({height:"240px"}),outfits[b].length<=2*k-6?n.find(".product-thumb-container").eq(1).css({width:"270px",height:"270px"}).children(".product").css({height:"240px"}):n.find(".product-thumb-container").eq(1).css({width:"",height:""}).children(".product").css({height:""})):(n.find(".product-thumb-container").eq(0).css({width:"",
height:""}).children(".product").css({height:""}),n.find(".product-thumb-container").eq(1).css({width:"",height:""}).children(".product").css({height:""}))):(n.find(".product-thumb-container").eq(0).css({width:"",height:""}).children(".product").css({height:""}),n.find(".product-thumb-container").eq(1).css({width:"",height:""}).children(".product").css({height:""}),0<n.find(".product-thumb-container.showMore").length?n.find(".product-thumb-container.showMore").index()!==2*k-1&&n.find(".product-thumb-container.showMore").insertBefore(n.find(".product-thumb-container[data-id]").eq(2*
k-1)):c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(2*k-1))):(n.find(".product-thumb-container.showMore").remove(),n.find(".product-thumb-container").eq(0).css({width:"",height:""}).children(".product").css({height:""}),n.find(".product-thumb-container").eq(1).css({width:"",height:""}).children(".product").css({height:""})))}c("#outfitProductModal").attr("data-outfit-id")&&"false"===c("#outfitProductModal").attr("data-favtile")&&($selectedTile=c(".multipleOutfits .outfit[data-id\x3d'"+
c("#outfitProductModal").attr("data-outfit-id")+"']").find(".product-thumb-container[data-id\x3d'"+c("#outfitProductModal").attr("data-id")+"']"),450<$selectedTile.position().top?(c("#outfitProductModal").css("top",c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top+"px"),c("a.outfit-modal-close").css("top",c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top-5+"px")):(c("#outfitProductModal").css("top",
$selectedTile.parents(".outfit").offset().top+1-c("#outfitProductModal").closest(".multipleOutfits").offset().top+"px"),c("a.outfit-modal-close").css("top",$selectedTile.parents(".outfit").offset().top-c("#outfitProductModal").closest(".multipleOutfits").offset().top-4+"px")));c(window).trigger("scroll");return{vidWidth:e,vidHeight:f}}e=c("#tile-container").width();for(b=0;b<outfits.length;b++)n=c("#tile-container .outfit[data-id\x3d'"+b+"']"),k=!n.hasClass("no-outfit-crop"),n.hasClass("moreShown")||
(n.find(".product-thumb-container.showMore").remove(),k?1088<=e?8<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(7)):872<=e?6<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(5)):688<=e?4<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(3)):464<=e&&2<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(1)):1088<=e?10<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(9)):
872<=e?8<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(7)):688<=e?6<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(5)):464<=e&&4<outfits[b].length&&c(a).insertBefore(n.find(".product-thumb-container[data-id]").eq(3)));c(window).trigger("scroll")};c("#outfitProductModal .ttFavorite").click(function(){var a=c("#outfitProductModal");c("a.outfit-modal-close");c("#tile-container");showFsOutfits&&c("#ttFsOutfits .multipleOutfits");
parseInt(a.css("top"),10);a.hasClass("favorite")?(TheTakeMetaOverlay.removeProductFavorite(outfits[parseInt(a.attr("data-outfit-id"),10)][0].outfit_id,a.attr("data-id")),a.removeClass("favorite"),recordFavorite("remove favorite",products[a.attr("data-id")],{location:"modal"})):(TheTakeMetaOverlay.addProductFavorite(outfits[parseInt(a.attr("data-outfit-id"),10)][0].outfit_id,a.attr("data-id"),!1),a.addClass("favorite"),recordFavorite("add favorite",products[a.attr("data-id")],{location:"modal"}))});
c(window).resize(changeOutfitProductTiles);changeOutfitProductTiles();showFavorites&&(c("#ttAllOutfitsBtn .ttFavorite").hide(),TheTakeMetaOverlay.displayStoredProductFavorites())}else{c("#tile-container").empty().append('\x3cdiv id\x3d"outfits"\x3e\x3c/div\x3e');c("#outfits").append('\x3cdiv class\x3d"character-selector"\x3e\x3c/div\x3e');showAllCharactersBubble&&(c(".character-selector").append('\x3cdiv class\x3d"character-image selected" data-id\x3d"0"\x3e\x3cdiv class\x3d"character-image-container" style\x3d"background-color:#EEE;padding-top:20px;font-size:9px;font-weight:800;white-space:normal;"\x3eALL CHARACTERS\x3c/div\x3e\x3cdiv class\x3d"name"\x3e\x3c/div\x3e\x3c/div\x3e'),
c(".character-image[data-id\x3d'0']").click(function(){c(this).hasClass("selected")||(c(".character-image").removeClass("selected").removeClass("not-selected"),c(this).addClass("selected"),c(".outfit").show(),recordAnalyticsAction("navigation","character filter show all",{vid:videoId,video_time:videoTime}))}));l=function(a,b){$comps=c(".outfit[data-id\x3d'"+a+"'] .slide[data-id\x3d'"+b+"'] .similar-style");for(var d=products[b],e=0;e<comps[b].length&&2>e;e++){var f=affiliateUrl(d.product_id,d.currentVersionNumber,
comps[b][e].id,comps[b][e].currentVersionNumber,comps[b][e].purchaseLink);$comps.eq(e).find("a").attr("href",f).attr("data-num-product",e).attr("data-source","thetake").attr("data-id",comps[b][e].id).attr("data-pc-id",comps[b][e].product_comp_id);$comps.eq(e).find("img").attr("src",comps[b][e]["250pxLink"]);$comps.eq(e).find("img").attr("alt",comps[b][e].brand+" - "+comps[b][e].name);$comps.eq(e).find(".brand").text(comps[b][e].brand);$comps.eq(e).find(".price").text(comps[b][e].price);$comps.eq(e).on("click",
"a",function(a){a=c(this).parents(".similar-style").index()-1;recordBuy("similar style click",comps[b][a].id,d.movieName,parseInt(videoTime),comps[b][a].brand,comps[b][a].name,d.actorName,d.verified?"exact":"close","N",comps[b][a].price,comps[b][a].price,comps[b][a].purchaseLink,d.primaryCategoryName+(0<d.secondaryCategory?", "+d.secondaryCategoryName:"")+(0<d.tertiaryCategory?", "+d.tertiaryCategoryName:""),0<c(this).find(".similar-image").length?"image":"text","tiles"+(showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length?
"-fullscreen":""),{comp_index:a})})}};d=function(a,b){"undefined"===typeof comps[b]||null===comps[b]||3>comps[b].length?c.get(listProductComps+b).done(function(d){d=c.parseJSON(d);comps[b]=d;l(a,b)}):l(a,b)};m=function(a,b,d){b='\x3cdiv class\x3d"character-image" data-id\x3d"'+a+'"\x3e\x3cdiv class\x3d"character-image-container" style\x3d"background-image:url(\''+d+'\')"\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+b+"\x3c/div\x3e\x3c/div\x3e";c(".character-selector").append(b);c(".character-selector .character-image[data-id\x3d'"+
a+"']").click(function(){ttPauseVideo();c("#tilesExpand").click();var a=c(this).data("id");if(c(this).hasClass("selected"))c(".character-selector .character-image").removeClass("selected").removeClass("not-selected"),showAllCharactersBubble&&c(".character-image:first").addClass("selected"),c(".outfit").show(),recordAnalyticsAction("navigation","cancel character filter",{vid:videoId,video_time:videoTime,character_id:a});else{c(".character-selector .character-image").removeClass("selected").addClass("not-selected");
c(this).addClass("selected").removeClass("not-selected");for(var b=0;b<outfits.length;b++)outfits[b][0].character_id===a?c(".outfit[data-id\x3d'"+b+"']").show():c(".outfit[data-id\x3d'"+b+"']").hide();recordAnalyticsAction("navigation","character filter",{vid:videoId,video_time:videoTime,character_id:a})}})};b=[];e=function(a,b){for(var c=!1,d=0;d<b.length;d++)if(b[d]===a){c=!0;break}return c};for(a=0;a<outfits.length;a++)!e(outfits[a][0].character_id,b)&&1<outfits[a][0].character_id&&(b.push(outfits[a][0].character_id),
m(outfits[a][0].character_id,outfits[a][0].characterName,outfits[a][0].characterImageSmall));m=function(a){var b=getOutfitHtmlMobile(a);c("#outfits").append(b);b=new Hammer(c(".outfit[data-id\x3d'"+a+"'] .slides")[0],{domEvents:!0});b.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});b.on("pan",function(a){var b=c(a.srcEvent.currentTarget).parents(".outfit"),d=c(".slide",b);parseInt(b.data("id"),10);b=-95*parseInt(c(a.srcEvent.currentTarget).attr("data-slide-id"),10)+a.deltaX/c(window).width()*
100;0<b&&(b=0);b<-95*(d.length-1)&&(b=-95*(d.length-1));if(Math.abs(a.deltaX)>.15*c(window).width()&&(40>Math.abs(a.angle)||140<Math.abs(a.angle))){if(window.screen&&window.screen.width)TheTakeMetaOverlay.mobileWidth=window.screen.width;else{a=c(window).width();var e=c(window).height();TheTakeMetaOverlay.mobileWidth=a<e?a:e}b=TheTakeMetaOverlay.mobileWidth*b/100;d.first().css("margin-left",b+"px")}});b.on("panend pancancel",function(a){var b=a.deltaX,e=c(a.target||a.srcEvent.target||a.srcEvent.srcElement||
a.srcEvent.toElement||a.srcEvent.currentTarget);e.hasClass("slide")||(0<e.find(".slide").length?e=e.find(".slide").first():0<e.parents(".slide").length&&(e=e.parents(".slide").first()));var f=e.parents(".outfit").first(),h=parseInt(f.attr("data-id"),10),e=parseInt(e.index(),10);Math.abs(b)>.15*c(window).width()&&(40>Math.abs(a.angle)||140<Math.abs(a.angle))&&(0>b?e++:e--);a=c(".bubble-container.selected",f).index();b=e;a!=b&&(0==b?recordAnalyticsAction("navigation","slide to outfit crop",{vid:videoId,
video_time:videoTime,from_index:a,to_index:"0",outfit_index:h}):recordModalInteraction("overlay open - slide to outfit product",outfits[h][b-1],{from_index:a,to_index:b,outfit_index:h}),d(h,e,75))});var d=function(a,b,d,e){e||ttPauseVideo();c("#tilesExpand").click();e=c(".outfit[data-id\x3d'"+a+"']");0>b&&(b=0);var f=c(".slide",e);b>f.length-1&&(b=f.length-1);a=c(window).width();var h=c(window).height();TheTakeMetaOverlay.mobileWidth=a<h?a:h;h=-.95*b*TheTakeMetaOverlay.mobileWidth+"px";a=c(".bubble-container",
e);a.removeClass("selected");f.first().stop(!0,!1).animate({"margin-left":h},d);a.eq(b).addClass("selected");c(".slides",e).attr("data-slide-id",b);e=c(".bubbles-nav",e);0==b?e.addClass("home-slide"):e.removeClass("home-slide");e.stop(!0,!1);f=e.scrollLeft();h=f+e.outerWidth(!0);a=a.outerWidth(!0);var g=b*a;if(f>g)g=b*a;else if(h<g+a)g=g+a-e.outerWidth(!0);else return;e.animate({scrollLeft:g},d)};c(".outfit[data-id\x3d'"+a+"'] .bubble-container").click(function(){var a=parseInt(c(this).parents(".outfit").first().data("id"),
10),b=c(".outfit[data-id\x3d'"+a+"'] .bubble-container.selected").index(),e=c(this).index();d(a,c(this).index(),250);0==e?recordAnalyticsAction("navigation","tap outfit crop",{vid:videoId,video_time:videoTime,from_index:b,to_index:"0",outfit_index:a}):recordModalInteraction("overlay open - tap outfit product",outfits[a][e-1],{from_index:b,to_index:e,outfit_index:a})})};for(a=0;a<outfits.length;a++)for(m(a),b=0;b<outfits[a].length;b++)d(a,outfits[a][b].product_id);c("#outfits").on("click",".featured-image-link",
function(a){a=products[c(this).parents(".slide").attr("data-id")];recordBuy("main product click",a.product_id,a.movieName,parseInt(videoTime),a.brand,a.name,a.actorName,a.verified?"exact":"close","N",a.unavailable||a.customMade?"unavailable":a.soldOut?"sold out":a.price,a.price,a.purchaseLink,a.primaryCategoryName+(0<a.secondaryCategory?", "+a.secondaryCategoryName:"")+(0<a.tertiaryCategory?", "+a.tertiaryCategoryName:""),0<c(this).find(".buy-btn").length?"button":"image","tiles"+(showFsOutfits&&
0<c("#ttFsOutfits .multipleOutfits").length?"-fullscreen":""))});c("#tilesExpand").off().click(function(a){a.preventDefault();c(this).hide();c("#tile-container").css("max-height","none");recordAnalyticsAction("navigation","expand tiles",{vid:videoId});c(this).off();ttPauseVideo()});c(".ttLoadingCircle").remove();c("#tilesExpand").show();c("#tile-container").css("max-height","1050px");a=function(a){console.log("[TT] orientation change",a);c(".slides","#outfits").each(function(){var a=parseInt(c(this).parent().attr("data-id"),
10)||0,b=parseInt(c(this).attr("data-slide-id"),10)||0;slideTo(a,b,1,!0)})};if(DeviceOrientationEvent)c(window).off("orientationchange resize",a).on("orientationchange",a);else c(window).off("orientationchange resize",a).on("resize",a)}"function"==typeof ttOutfitsLoaded&&ttOutfitsLoaded()}else console.log("[TT] Experience disabled while getting outfit data")}),e=listThumbnailsUrl+a,console.log("[TT] Getting thumbnails: "+e),c.get(e).done(function(a){"[object String]"==Object.prototype.toString.call(a)&&
(a=c.parseJSON(a));thumbnails=a}))},showBubbleInfoCollapsed=function(){function a(a){for(var d=0;d<a.length&&2>d;d++){var e=a[d],g=b(this).find(".ttBubbleInfo-comp"+(d+1));g.find(".ttBubbleInfo-collapsed-comp-info, .ttBubbleInfo-collapsed-comp-buy, .ttBubbleInfo-collapsed-comp-image, .ttBubbleInfo-collapsed-comp-text").attr("data-index",d);g.find(".ttBubbleInfo-collapsed-comp-image \x3e div \x3e div").css("background-image","url("+(e.productImage?e.productImage:e["250pxLink"])+")");0<ttUserGroupId?
(g.find("div.ttBubbleInfo-collapsed-comp-brand").html(universalCart?"ADD TO CART":e.brand),g.find("div.ttBubbleInfo-collapsed-comp-name").html(e.name)):"Zalora"==analyticsSource?g.find(".ttBubbleInfo-collapsed-comp-text \x3e div").html(TheTakeMetaOverlay.localizedPrice(e.price)):g.find(".ttBubbleInfo-collapsed-comp-text \x3e div").html(universalCart?"ADD TO CART":e.brand);g.find(".ttBubbleInfo-collapsed-comp-buy").html(hidePrices?"Shop":TheTakeMetaOverlay.localizedPrice(e.price));g.off().on("click"+
(isIOS?" tap":""),".ttBubbleInfo-collapsed-comp-info, .ttBubbleInfo-collapsed-comp-buy, .ttBubbleInfo-collapsed-comp-image, .ttBubbleInfo-collapsed-comp-text",function(d){d=a[parseInt(b(this).attr("data-index"))];recordBuy("similar style click",d.id,c.movieName,parseInt(videoTime),d.brand,d.name,c.actorName,c.verified?"exact":"close","N",d.price,d.price,d.purchaseLink,c.primaryCategoryName+(0<c.secondaryCategory?", "+c.secondaryCategoryName:"")+(0<c.tertiaryCategory?", "+c.tertiaryCategoryName:""),
b(this).attr("data-type"),"video",{comp_index:b(this).parents(".ttBubbleInfo-collapsed-comp").index()});universalCart?(b(this).parents(".ttBubbleInfo-collapsed-comp").find(".ttBubbleInfo-collapsed-comp-text \x3e div").html("ADDED"),b("#ttCartButton \x3e span").html(parseInt(b("#ttCartButton \x3e span").html())+1),b("#tt-bag-notification-image").css("background-image","url("+(d.productImage?d.productImage:d["250pxLink"])+")"),b("#tt-bag-notification").stop().animate({opacity:"1"},500),setTimeout(function(){b("#tt-bag-notification").stop().animate({opacity:"0"},
500)},3500),ttCart.push({url:d.purchaseLink})):(window.open(affiliateUrl(c.product_id,c.currentVersionNumber,d.compProduct_id_comps,d.currentVersionNumber,d.purchaseLink)),animateBubblesIn(),enableScrollbar())})}}var b=jQuery;if(!b(this).hasClass("hover")&&(hideBubbleInfo(),b("#ttVideoProductsContainer").hasClass("expanded"))){var d=parseInt(b(this).find("a[data-id]").first().data("id"),10),c=products[d];hoverTime=performance.now();430>b(window).width()?(b("#ttVideoProductsContainerOuter").css("width",
b(window).width()+"px"),b("#ttVideoProductsContainerInner").css("width",b(window).width()-30+"px"),b("#ttVideoProductsContainer").css("width",b(window).width()+22+"px")):(b("#ttVideoProductsContainerOuter, #ttVideoProductsContainerInner").css("width","430px"),b("#ttVideoProductsContainer").css("width","450px"));b(this).find(".ttBubbleInfo").css("pointer-events","all");b(".ttBubble").removeClass("hover");b(this).addClass("hover");b(document).trigger("ttBubbleHover",[d]);b(this).css("pointer-events",
"none");b(".ttBubble:not(.hover)").css("pointer-events","all");b(".move-up").removeClass("move-up");b(".move-down").removeClass("move-down");b(this).nextAll().addClass("move-up");b(this).prevAll().addClass("move-down");if(void 0!=comps[b(this).find("a").attr("data-id")])a.bind(b(this))(comps[b(this).find("a").attr("data-id")]);else{var e=b(this);b.get(listProductComps+d).done(function(c){c=b.parseJSON(c);if("Zalora"==analyticsSource)for(var h=0;h<c.length;h++){var k=c[h].purchaseLink.split("||")[app?
1:0],k=k.replace("video_name","videoname").replace("[videoname]",ep.epName),k=k.replace("[placement]",app?"app":probablyMobile?"mSite":"dSite"),g=document.referrer;b("body").hasClass("mobile")&&(g=window.parent.document.referrer);var m=getURLParameter("utm_source",g),g=getURLParameter("utm_medium",g),k=k.replace("utm_source\x3dHDILA","utm_source\x3d"+(null==m?"HDILA":m)),k=k.replace("utm_medium\x3dVideo","utm_medium\x3d"+(null==g?"Video":g));c[h].purchaseLink=k}comps[d]=c;0<e.length&&a.bind(e)(c)})}isTouchDevice()&&
(b(".ttBubbleInfo").hide(),b(this).find(".ttBubbleInfo").show());b(playerRoot).addClass("tt-bub-popout")}},hideBubbleInfo=function(){var a=jQuery;if(!playingSnipe&&void 0!=hoverTime){var b=parseInt(performance.now()-hoverTime),d=a(".ttBubble.hover a").attr("data-id"),c=products[d];333<b&&recordAnalyticsAction("navigation","hover bubble time",{vid:videoId,video_time:videoTime,duration:b,pid:d,fullscreen:document.isFullscreen()});1E3<b&&(temporaryPause?recordModalInteraction("overlay open - bubble when hovered",
c,{duration:b}):recordModalInteraction("overlay open - bubble when paused",c,{duration:b}));a(document).trigger("ttBubbleHoverOut",[b])}a(".ttBubbleInfo").css("pointer-events","none");a(".ttBubble").css("pointer-events","");a(".move-up").removeClass("move-up");a(".move-down").removeClass("move-down");a(".ttBubble.hover").removeClass("hover");isTouchDevice()&&a(".ttBubbleInfo").hide()},loadedMiniInjector=function(){function a(a){0===a.data.indexOf("TT_Analytics\x3d")&&(a=b.parseJSON(a.data.substr(13)),
recordAnalyticsAction(a.category,a.action,a.parameters,a.value,a.sync))}var b=jQuery;b("\x3clink\x3e").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href",theTakeBaseUrl+"/public/css/thetake-injector-bubbles.css");0<ttUserGroupId&&b("\x3clink\x3e").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href",theTakeBaseUrl+"/public/css/thetake-injector-bam.css");ttVideoProductsContainerString="\x3cdiv id\x3d'ttVideoProductsContainerOuter' class\x3d'minimal'\x3e"+(optedIn?
"\x3cdiv id\x3d'ttBubbleOptOut'\x3e\x26#10005;\x3c/div\x3e":"")+"\x3cdiv id\x3d'ttVideoProductsContainer'\x3e\x3cdiv class\x3d'ttFeaturedProductContainer no-interaction' style\x3d'pointer-events:all;z-index:3;position:absolute;width:100%;height:100%;top:6px;left:30px;overflow:hidden;'\x3e\x3c/div\x3e"+(isBamPublisher?"\x3cdiv id\x3d'ttVideoProductsContainerLogo'\x3e\x3cimg style\x3d'max-width:0px' src\x3d'https://img.thetake.com/injector/shop.png'/\x3e\x3c/div\x3e":"\x3cdiv id\x3d'ttVideoProductsContainerLogo'\x3e\x3cimg style\x3d'max-width:0px' src\x3d'https://img.thetake.com/injector/thetake-logo-circle-500.png'/\x3e\x3c/div\x3e")+
"\x3cdiv id\x3d'ttVideoProductsContainerInner'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'bubbles-arrow' style\x3d'display:none;'\x3e\x3c/div\x3e\x3c/div\x3e"+(isBamPublisher?"\x3cdiv id\x3d'ttCoachMarkContainer' style\x3d'opacity:1.0;pointer-events:none;position:absolute;z-index:10;overflow:hidden;width:300px;height:200px;'\x3e\x3cdiv style\x3d'line-height:initial !important;white-space:nowrap;position:relative;opacity:0;color:white;font-size:24px;font-family:HelveticaNeue-Medium, sans-serif;text-shadow:0px 2px 4px rgba(0,0,0,0.25);letter-spacing:0;margin-top:21px;margin-left:-14px;'\x3eHover to shop the video\x3c/div\x3e\x3c/div\x3e":
"\x3cdiv id\x3d'ttCoachMarkContainer' style\x3d'opacity:1.0;pointer-events:none;position:absolute;z-index:10;overflow:hidden;width:300px;height:200px;'\x3e\x3cimg src\x3d'"+theTakeBaseUrl+"/public/images/hover-to-shop.png' style\x3d'width:100px;height:auto;position:relative;opacity:0;'/\x3e\x3c/div\x3e")+(showFavorites?"\x3cdiv id\x3d'ttAllOutfitsIncrement' style\x3d'display:none'\x3e+1\x3c/div\x3e":"");showFsOutfits&&(ttVideoProductsContainerString+="\x3cdiv id\x3d'ttPlayerBg' style\x3d'display:none'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d'ttPlayerContent' style\x3d'display:none'\x3e\x3c/div\x3e\x3cdiv id\x3d'ttFsOutfits' style\x3d'display:none'\x3e\x3cdiv\x3e\x3cbutton id\x3d'ttFsButton'\x3e\x26#10006;\x3c/button\x3e\x3cdiv id\x3d'ttFsOutfitsTitle'\x3e\x3ch2\x3eShop This "+
(isFullEpisode?"Episode":"Video")+"\x3c/h2\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");b(playerRoot).append(b(ttVideoProductsContainerString));optedIn&&b(playerRoot).addClass("ttOptInStart");"Youtube"==analyticsSource&&(playerRoot="#player-api");b(".bubbles-arrow").hide();if(isTouchDevice())b(playerRoot).click(function(a){playingSnipe&&cancelSnipe();animateBubblesIn();temporaryPause&&ttPlayVideo()}),b(playerRoot).on("touchstart",function(a){console.log("[TT] player touch start",a);if(bubblesHidden)unhideBubbles(),
hideBubbles(bubbleHideDelay);else{var d=!1,f=a.originalEvent.touches[0].pageX,h=a.originalEvent.touches[0].pageY;b(".ttBubble, .ttBubbleInfo-inner").each(function(){if(!(f<=b(this).offset().left||f>=b(this).offset().left+b(this).outerWidth()||h<=b(this).offset().top||h>=b(this).offset().top+b(this).outerHeight()))return d=!0,!1});d||(bubblesExpanded?(animateBubblesIn(),b(document).trigger("ttBubblesInHover"),temporaryPause&&ttPlayVideo(),hideBubbles(bubbleHideDelay)):(temporaryPause&&ttPlayVideo(),
hideBubbles(0)))}}),b("#ttVideoProductsContainerInner").on("touchstart",function(a){bubblesExpanded||(playingSnipe&&cancelSnipe(),isPaused||(temporaryPause=!0),ttPauseVideo(),animateBubblesOut(),b(document).trigger("ttBubblesOutTouchstart",[300]))}),b("#ttVideoProductsContainerInner").on("click",function(a){a.preventDefault();a.stopPropagation();if(bubblesExpanded){var d=a.originalEvent.pageX,f=a.originalEvent.pageY,h=!1;b(".ttBubble, .ttBubbleInfo-inner").each(function(){if(!(d<=b(this).offset().left||
d>=b(this).offset().left+b(this).outerWidth()||f<=b(this).offset().top||f>=b(this).offset().top+b(this).outerHeight()))return h=!0,!1});h||(animateBubblesIn(),b(document).trigger("ttBubblesInHover"),temporaryPause&&ttPlayVideo())}hideBubbles(bubbleHideDelay)});else{b("#ttVideoProductsContainerInner").hover(function(){playingSnipe&&cancelSnipe();ttReady&&(isPaused?recordAnalyticsAction("navigation","hover bubble - when paused",{vid:videoId,video_time:videoTime,video_title:productFrames[0].movieName,
fullscreen:document.isFullscreen()}):(recordAnalyticsAction("navigation","hover bubble - while playing",{vid:videoId,video_time:videoTime,video_title:productFrames[0].movieName,fullscreen:document.isFullscreen()}),temporaryPause=!0),bubblesExpanded||animateBubblesOut(),isSafari||disableScrollbar())},function(){ttReady&&(0==b(".ttBubble.selected").length&&(animateBubblesIn(),b(document).trigger("ttBubblesInHover")),temporaryPause&&(temporaryPause=!1),isSafari||enableScrollbar())});var d;b("#ttVideoProductsContainerOuter").on("mousemove",
function(a){if(!playingSnipe&&bubblesExpanded){void 0!=scrollInterval&&(ttClearInterval(scrollInterval),scrollInterval=void 0);d=a.pageY;var e=a.pageY-b(a.currentTarget).offset().top;if(120>e){var f=(120-e)/120;scrollInterval=ttSetInterval(function(){b("#ttVideoProductsContainer").scrollTop(b("#ttVideoProductsContainer").scrollTop()-Math.pow(f+1.5,2))},10)}else 120>a.currentTarget.getBoundingClientRect().height-e&&(f=(120-(a.currentTarget.getBoundingClientRect().height-e))/120,scrollInterval=ttSetInterval(function(){b("#ttVideoProductsContainer").scrollTop(b("#ttVideoProductsContainer").scrollTop()+
Math.pow(f+1.5,2))},10))}});b("#ttVideoProductsContainer").on("scroll",function(){void 0!=scrollInterval&&b(".ttBubble").each(function(a,e){d>b(e).offset().top&&d<b(e).offset().top+b(e).height()&&showBubbleInfoCollapsed.bind(b(e))()})});b(playerRoot).mouseenter(function(){b(playerRoot).addClass("tt-hover");TheTakeMetaOverlay.isAd||unhideBubbles();0<videoId&&recordAnalyticsAction("navigation","player hover in",{vid:videoId,video_time:videoTime,fullscreen:document.isFullscreen()})}).mousemove(function(){b(playerRoot).addClass("tt-hover");
enlargeBubbles();unhideControls();unhideBubbles();document.isFullscreen()&&!playingSnipe&&shrinkBubbles(bubbleShrinkDelayFullscreen);hideBubbles(bubbleHideDelay);hideControls(controlsHideDelay)}).mouseleave(function(){b(playerRoot).removeClass("tt-hover");shrinkBubbles(bubbleShrinkDelay);hideBubbles(bubbleHideDelay);hideControls(controlsMouseOutHideDelay);0<videoId&&recordAnalyticsAction("navigation","player hover out",{vid:videoId,video_time:videoTime,fullscreen:document.isFullscreen()})});b("#ttVideoProductsContainerInner").on("mouseenter",
".ttBubble",function(){0<b(".ttBubble.selected").length||showBubbleInfoCollapsed.bind(this)()})}b("#ttVideoProductsContainer").on("scroll",function(a){10<b(this).scrollTop()?b(".bubbles-arrow").hide():b(".bubbles-arrow").show()});b("body").on("click",".vote-section:not(.voted)",function(){var a=b(this).parent().find(".vote-section.voted");a.find("span").html(parseInt(a.find("span").html())-1);a.removeClass("voted");b(this).find("span").html(parseInt(b(this).find("span").html())+1);b(this).addClass("voted")});
b(".powered-by-bar").click(function(a){recordModalInteraction("powered by - bar",mostRecentModalProduct)});b("#powered-by-thetake").click(function(a){recordAnalyticsAction("navigation","powered by - circle logo",{vid:videoId,video_time:videoTime})});probablyMobile||b("body").append('\x3cimg id\x3d"dotHoverPreviewImage" src\x3d"" style\x3d"display:none;z-index:4;"\x3e');"function"==typeof ttAfterMainInit&&ttAfterMainInit();isIOS&&!isIPad&&window!==window.parent&&window.addEventListener("message",a,
!1)},getScrollBarWidth=function(){var a=jQuery("\x3cdiv\x3e").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),b=jQuery("\x3cdiv\x3e").css({width:"100%"}).appendTo(a).outerWidth(!1);a.remove();return 100-b},perfnow=function(a){"performance"in a||(a.performance={});var b=a.performance;a.performance.now=b.now||b.mozNow||b.msNow||b.oNow||b.webkitNow||Date.now||function(){return(new Date).getTime()}},ttClearInterval=function(a){if(!setInterval.ids||!setInterval.ids[a])return!1;
clearTimeout(setInterval.ids[a]);setInterval.ids[a]=-1;return!0},ttSetInterval=function(a,b){setInterval.ids=setInterval.ids||{};setInterval.idCount=setInterval.idCount||0;var d=setInterval.idCount++,c=arguments.length-2,e=!1;(function h(){var k=[].slice.call(arguments,0,c);e?a.apply(this,k):e=!0;-1!=setInterval.ids[d]&&(k=setTimeout.apply(this,[h,b].concat(k)),setInterval.ids[d]=k)}).apply(this,[].slice.call(arguments,2,arguments.length));return d};window.ttInjectedProdScript=!0;document.isFullscreen=
document.isFullscreen||document.webkitIsFullscreen||document.mozFullscreen||function(){return null==document.msFullscreenElement||void 0==document.msFullscreenElement?!1:!0};document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;HTMLElement.prototype.requestFullscreen=HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullscreen||HTMLElement.prototype.msRequestFullscreen;
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(a){return 0<this.filter(function(b){return b==a}).length}});"function"!==typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(a,b){if(null===a||void 0===a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(null!==e&&void 0!==e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(d[f]=
e[f])}return d},writable:!0,configurable:!0});perfnow(self);!function(a){a(jQuery)}(function(a){var b,d,c,e,f={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1},h=a(window),k=[],g=!1,m=0;a.scrollDepth=function(l){function r(a,f,h,g){e?(e({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:a,eventLabel:f,eventValue:1,eventNonInteraction:l.nonInteraction}),l.pixelDepth&&2<arguments.length&&h>m&&(m=h,e({event:"ScrollDistance",
eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:(250*Math.floor(h/250)).toString(),eventValue:1,eventNonInteraction:l.nonInteraction})),l.userTiming&&3<arguments.length&&e({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:a,eventLabel:f,eventTiming:g})):(b&&(window[c]("send","event","Scroll Depth",a,f,1,{nonInteraction:l.nonInteraction}),l.pixelDepth&&2<arguments.length&&h>m&&(m=h,window[c]("send","event","Scroll Depth","Pixel Depth",(250*Math.floor(h/250)).toString(),
1,{nonInteraction:l.nonInteraction})),l.userTiming&&3<arguments.length&&window[c]("send","timing","Scroll Depth",a,g,f)),d&&(_gaq.push(["_trackEvent","Scroll Depth",a,f,1,l.nonInteraction]),l.pixelDepth&&2<arguments.length&&h>m&&(m=h,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",(250*Math.floor(h/250)).toString(),1,l.nonInteraction])),l.userTiming&&3<arguments.length&&_gaq.push(["_trackTiming","Scroll Depth",a,g,f,100])))}function q(b,c,d){a.each(b,function(b,e){-1===a.inArray(b,k)&&c>=e&&
(r("Percentage",b,c,d),k.push(b))})}function u(b,c,d){a.each(b,function(b,e){-1===a.inArray(e,k)&&a(e).length&&c>=a(e).offset().top&&(r("Elements",e,c,d),k.push(e))})}function B(a,b){var c,d,e,f=null,h=0,g=function(){h=new Date;f=null;e=a.apply(c,d)};return function(){var k=new Date;h||(h=k);var p=b-(k-h);return c=this,d=arguments,0>=p?(clearTimeout(f),f=null,h=k,e=a.apply(c,d)):f||(f=setTimeout(g,p)),e}}function p(){g=!0;h.on("scroll.scrollDepth",B(function(){var b=a(document).height(),c=window.innerHeight?
window.innerHeight:h.height(),c=h.scrollTop()+c,b={"25%":parseInt(.25*b,10),"50%":parseInt(.5*b,10),"75%":parseInt(.75*b,10),"100%":b-5},d=+new Date-s;return k.length>=l.elements.length+(l.percentage?4:0)?(h.off("scroll.scrollDepth"),void(g=!1)):(l.elements&&u(l.elements,c,d),void(l.percentage&&q(b,c,d)))},500))}var s=+new Date;l=a.extend({},f,l);a(document).height()<l.minHeight||(l.gaGlobal?(b=!0,c=l.gaGlobal):"function"==typeof ga?(b=!0,c="ga"):"function"==typeof __gaTracker&&(b=!0,c="__gaTracker"),
"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(d=!0),"function"==typeof l.eventHandler?e=l.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||l.gtmOverride||(e=function(a){dataLayer.push(a)}),a.scrollDepth.reset=function(){k=[];m=0;h.off("scroll.scrollDepth");p()},a.scrollDepth.addElements=function(b){"undefined"!=typeof b&&a.isArray(b)&&(a.merge(l.elements,b),g||p())},a.scrollDepth.removeElements=function(b){"undefined"!=typeof b&&a.isArray(b)&&a.each(b,function(b,
c){var d=a.inArray(c,l.elements),e=a.inArray(c,k);-1!=d&&l.elements.splice(d,1);-1!=e&&k.splice(e,1)})},p())}});"undefined"===typeof Modernizr&&!function(a,b,d){function c(a){var b=q.className,c=l._config.classPrefix||"";if(u&&(b=b.baseVal),l._config.enableJSClass)b=b.replace(new RegExp("(^|\\s)"+c+"no-js(\\s|$)"),"$1"+c+"js$2");l._config.enableClasses&&(b+=" "+c+a.join(" "+c),u?q.className.baseVal=b:q.className=b)}function e(a,b){if("object"==typeof a)for(var d in a)r(a,d)&&e(d,a[d]);else{a=a.toLowerCase();
d=a.split(".");var f=l[d[0]];if(2==d.length&&(f=f[d[1]]),"undefined"!=typeof f)return l;b="function"==typeof b?b():b;1==d.length?l[d[0]]=b:(!l[d[0]]||l[d[0]]instanceof Boolean||(l[d[0]]=new Boolean(l[d[0]])),l[d[0]][d[1]]=b);c([(b&&0!=b?"":"no-")+d.join("-")]);l._trigger(a,b)}return l}function f(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):u?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function h(a,c,d,e){var h,
g,k,r,l=f("div"),m;k=b.body;m=(k||(k=f(u?"svg":"body"),k.fake=!0),k);if(parseInt(d,10))for(;d--;)k=f("div"),k.id=e?e[d]:"modernizr"+(d+1),l.appendChild(k);return h=f("style"),h.type="text/css",h.id="smodernizr",(m.fake?m:l).appendChild(h),m.appendChild(l),h.styleSheet?h.styleSheet.cssText=a:h.appendChild(b.createTextNode(a)),l.id="modernizr",m.fake&&(m.style.background="",m.style.overflow="hidden",r=q.style.overflow,q.style.overflow="hidden",q.appendChild(m)),g=c(l,a),m.fake?(m.parentNode.removeChild(m),
q.style.overflow=r,q.offsetHeight):l.parentNode.removeChild(l),!!g}var k=[],g=[],m={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){g.push({name:a,fn:b,options:c})},addAsyncTest:function(a){g.push({name:null,fn:a})}},l=function(){};l.prototype=m;var l=new l,r,q=b.documentElement,u="svg"===q.nodeName.toLowerCase();!function(){var a={}.hasOwnProperty;r="undefined"===
typeof a||"undefined"===typeof a.call?function(a,b){return b in a&&"undefined"===typeof a.constructor.prototype[b]}:function(b,c){return a.call(b,c)}}();m._l={};m.on=function(a,b){this._l[a]||(this._l[a]=[]);this._l[a].push(b);l.hasOwnProperty(a)&&setTimeout(function(){l._trigger(a,l[a])},0)};m._trigger=function(a,b){if(this._l[a]){var c=this._l[a];setTimeout(function(){var a;for(a=0;a<c.length;a++)(0,c[a])(b)},0);delete this._l[a]}};l._q.push(function(){m.addTest=e});d=function(){var b=a.matchMedia||
a.msMatchMedia;return b?function(a){return(a=b(a))&&a.matches||!1}:function(b){var c=!1;return h("@media "+b+" { #modernizr { position: absolute; } }",function(b){c="absolute"==(a.getComputedStyle?a.getComputedStyle(b,null):b.currentStyle).position}),c}}();m.mq=d;(function(){var a,b,c,d,e,f;for(f in g)if(g.hasOwnProperty(f)){if(a=[],b=g[f],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());
c="function"===typeof b.fn?b.fn():b.fn;for(d=0;d<a.length;d++)e=a[d],e=e.split("."),1===e.length?l[e[0]]=c:(!l[e[0]]||l[e[0]]instanceof Boolean||(l[e[0]]=new Boolean(l[e[0]])),l[e[0]][e[1]]=c),k.push((c?"":"no-")+e.join("-"))}})();c(k);delete m.addTest;delete m.addAsyncTest;for(d=0;d<l._q.length;d++)l._q[d]();a.Modernizr=l}(window,document);"undefined"==typeof jQuery.cookie&&!function(a){a(jQuery)}(function(a){function b(a){a=e.json?JSON.stringify(a):String(a);return e.raw?a:encodeURIComponent(a)}
function d(b,d){var k;if(e.raw)k=b;else a:{var g=b;0===g.indexOf('"')&&(g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{k=(g=decodeURIComponent(g.replace(c," ")),e.json?JSON.parse(g):g);break a}catch(m){}k=void 0}return a.isFunction(d)?d(k):k}var c=/\+/g,e=a.cookie=function(c,h,k){if(1<arguments.length&&!a.isFunction(h)){if(k=a.extend({},e.defaults,k),"number"==typeof k.expires){var g=k.expires,m=k.expires=new Date;m.setMilliseconds(m.getMilliseconds()+864E5*g)}return document.cookie=
[e.raw?c:encodeURIComponent(c),"\x3d",b(h),k.expires?"; expires\x3d"+k.expires.toUTCString():"",k.path?"; path\x3d"+k.path:"",k.domain?"; domain\x3d"+k.domain:"",k.secure?"; secure":""].join("")}for(var g=c?void 0:{},m=document.cookie?document.cookie.split("; "):[],l=0,r=m.length;r>l;l++){var q=m[l].split("\x3d"),u;u=q.shift();u=e.raw?u:decodeURIComponent(u);q=q.join("\x3d");if(c===u){g=d(q,h);break}c||void 0===(q=d(q))||(g[u]=q)}return g};e.defaults={};a.removeCookie=function(b,c){return a.cookie(b,
"",a.extend({},c,{expires:-1})),!a.cookie(b)}});!function(a){a(jQuery)}(function(a){function b(b){var c,d,e,f=arguments.length;e=window[b];c=arguments;var h=c[1];if(2>f)throw Error("Minimum 2 arguments must be given");if(a.isArray(h)){d={};for(var g in h){c=h[g];try{d[c]=JSON.parse(e.getItem(c))}catch(k){d[c]=e.getItem(c)}}return d}if(2!=f){try{d=JSON.parse(e.getItem(h))}catch(l){throw new ReferenceError(h+" is not defined in this storage");}for(g=2;f-1>g;g++)if(d=d[c[g]],void 0===d)throw new ReferenceError([].slice.call(c,
1,g+1).join(".")+" is not defined in this storage");if(a.isArray(c[g])){e=d;d={};for(var m in c[g])d[c[g][m]]=e[c[g][m]];return d}return d[c[g]]}try{return JSON.parse(e.getItem(h))}catch(sa){return e.getItem(h)}}function d(b){var c,d,e=arguments.length,f=window[b],h=arguments,g=h[1];c=h[2];var k={};if(2>e||!a.isPlainObject(g)&&3>e)throw Error("Minimum 3 arguments must be given or second parameter must be an object");if(a.isPlainObject(g)){for(var l in g)c=g[l],a.isPlainObject(c)?f.setItem(l,JSON.stringify(c)):
f.setItem(l,c);return g}if(3==e)return"object"==typeof c?f.setItem(g,JSON.stringify(c)):f.setItem(g,c),c;try{d=f.getItem(g),null!=d&&(k=JSON.parse(d))}catch(m){}d=k;for(l=2;e-2>l;l++)c=h[l],d[c]&&a.isPlainObject(d[c])||(d[c]={}),d=d[c];return d[h[l]]=h[l+1],f.setItem(g,JSON.stringify(k)),k}function c(b){var c,d,e=arguments.length,f=window[b],h=arguments,g=h[1];if(2>e)throw Error("Minimum 2 arguments must be given");if(a.isArray(g)){for(var k in g)f.removeItem(g[k]);return!0}if(2==e)return f.removeItem(g),
!0;try{c=d=JSON.parse(f.getItem(g))}catch(l){throw new ReferenceError(g+" is not defined in this storage");}for(k=2;e-1>k;k++)if(d=d[h[k]],void 0===d)throw new ReferenceError([].slice.call(h,1,k).join(".")+" is not defined in this storage");if(a.isArray(h[k]))for(var m in h[k])delete d[h[k][m]];else delete d[h[k]];return f.setItem(g,JSON.stringify(c)),!0}function e(c){var d=arguments.length,f=arguments,g=(window[c],f[1]);if(1==d)return 0==h(c).length;if(a.isArray(g)){for(var k=0;k<g.length;k++)if(!e(c,
g[k]))return!1;return!0}try{var l=b.apply(this,arguments);a.isArray(f[d-1])||(l={totest:l});for(k in l)if(!(a.isPlainObject(l[k])&&a.isEmptyObject(l[k])||a.isArray(l[k])&&!l[k].length)&&l[k])return!1;return!0}catch(m){return!0}}function f(c){var d=arguments.length,e=arguments,h=(window[c],e[1]);if(2>d)throw Error("Minimum 2 arguments must be given");if(a.isArray(h)){for(var g=0;g<h.length;g++)if(!f(c,h[g]))return!1;return!0}try{var k=b.apply(this,arguments);a.isArray(e[d-1])||(k={totest:k});for(g in k)if(void 0===
k[g]||null===k[g])return!1;return!0}catch(l){return!1}}function h(c){var d=arguments.length,e=window[c],f=arguments,h=(f[1],[]),g={};if(g=1<d?b.apply(this,f):e,g._cookie)for(var k in a.cookie())""!=k&&h.push(k.replace(g._prefix,""));else for(var l in g)h.push(l);return h}function k(b){if(!b||"string"!=typeof b)throw Error("First parameter must be a string");g?(window.localStorage.getItem(b)||window.localStorage.setItem(b,"{}"),window.sessionStorage.getItem(b)||window.sessionStorage.setItem(b,"{}")):
(window.localCookieStorage.getItem(b)||window.localCookieStorage.setItem(b,"{}"),window.sessionCookieStorage.getItem(b)||window.sessionCookieStorage.setItem(b,"{}"));var c={localStorage:a.extend({},a.localStorage,{_ns:b}),sessionStorage:a.extend({},a.sessionStorage,{_ns:b})};return a.cookie&&(window.cookieStorage.getItem(b)||window.cookieStorage.setItem(b,"{}"),c.cookieStorage=a.extend({},a.cookieStorage,{_ns:b})),a.namespaceStorages[b]=c,c}var g=function(a){try{return!!window[a]&&(window[a].setItem("jsapi",
"jsapi"),window[a].removeItem("jsapi"),!0)}catch(b){return!1}}("localStorage"),m={_type:"",_ns:"",_callMethod:function(a,b){var c=[this._type];b=Array.prototype.slice.call(b);var d=b[0];return this._ns&&c.push(this._ns),"string"==typeof d&&-1!==d.indexOf(".")&&(b.shift(),[].unshift.apply(b,d.split("."))),[].push.apply(c,b),a.apply(this,c)},get:function(){return this._callMethod(b,arguments)},set:function(){var b=arguments.length,c=arguments,e=c[0];if(1>b||!a.isPlainObject(e)&&2>b)throw Error("Minimum 2 arguments must be given or first parameter must be an object");
if(a.isPlainObject(e)&&this._ns){for(var f in e)d(this._type,this._ns,f,e[f]);return e}b=this._callMethod(d,c);return this._ns?b[e.split(".")[0]]:b},remove:function(){if(1>arguments.length)throw Error("Minimum 1 argument must be given");return this._callMethod(c,arguments)},removeAll:function(b){if(this._ns)b=(d(this._type,this._ns,{}),!0);else{var e=this._type,f=h(e),g;for(g in f)c(e,f[g]);if(b)for(g in a.namespaceStorages)k(g);b=void 0}return b},isEmpty:function(){return this._callMethod(e,arguments)},
isSet:function(){if(1>arguments.length)throw Error("Minimum 1 argument must be given");return this._callMethod(f,arguments)},keys:function(){return this._callMethod(h,arguments)}};if(a.cookie){window.name||(window.name=Math.floor(1E8*Math.random()));var l={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(b,c){a.cookie(this._prefix+b,c,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(b){return a.cookie(this._prefix+b)},removeItem:function(b){return a.removeCookie(this._prefix+
b)},clear:function(){for(var b in a.cookie())""!=b&&(!this._prefix&&-1===b.indexOf("ls_")&&-1===b.indexOf("ss_")||this._prefix&&0===b.indexOf(this._prefix))&&a.removeCookie(b)},setExpires:function(a){return this._expires=a,this},setPath:function(a){return this._path=a,this},setDomain:function(a){return this._domain=a,this},setConf:function(a){return a.path&&(this._path=a.path),a.domain&&(this._domain=a.domain),a.expires&&(this._expires=a.expires),this},setDefaultConf:function(){this._path=this._domain=
this._expires=null}};g||(window.localCookieStorage=a.extend({},l,{_prefix:"ls_",_expires:3650}),window.sessionCookieStorage=a.extend({},l,{_prefix:"ss_"+window.name+"_"}));window.cookieStorage=a.extend({},l);a.cookieStorage=a.extend({},m,{_type:"cookieStorage",setExpires:function(a){return window.cookieStorage.setExpires(a),this},setPath:function(a){return window.cookieStorage.setPath(a),this},setDomain:function(a){return window.cookieStorage.setDomain(a),this},setConf:function(a){return window.cookieStorage.setConf(a),
this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}a.initNamespaceStorage=function(a){return k(a)};g?(a.localStorage=a.extend({},m,{_type:"localStorage"}),a.sessionStorage=a.extend({},m,{_type:"sessionStorage"})):(a.localStorage=a.extend({},m,{_type:"localCookieStorage"}),a.sessionStorage=a.extend({},m,{_type:"sessionCookieStorage"}));a.namespaceStorages={};a.removeAllStorages=function(b){a.localStorage.removeAll(b);a.sessionStorage.removeAll(b);a.cookieStorage&&
a.cookieStorage.removeAll(b);b||(a.namespaceStorages={})}});var isTouchDeviceCheck=!1;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4)))isTouchDeviceCheck=!0})(navigator.userAgent||navigator.vendor||window.opera);var isTouchDevice=function(){return isTouchDeviceCheck&&probablyMobile};probablyMobile&&(!function(a,b,d,c){function e(a,b,c){return setTimeout(m(a,c),b)}function f(a,b,c){return Array.isArray(a)?(h(a,c[b],c),!0):!1}function h(a,b,d){var e;if(a)if(a.forEach)a.forEach(b,d);else if(a.length!==c)for(e=0;e<a.length;)b.call(d,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(d,a[e],e,a)}function k(b,c,d){var e="DEPRECATED METHOD: "+
c+"\n"+d+" AT \n";return function(){var c=Error("get-stack-trace"),c=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=a.console&&(a.console.warn||a.console.log);return d&&d.call(a.console,e,c),b.apply(this,arguments)}}function g(a,b,c){var d=b.prototype;b=a.prototype=Object.create(d);b.constructor=a;b._super=d;c&&C(b,c)}function m(a,b){return function(){return a.apply(b,arguments)}}function l(a,
b){return typeof a==Ma?a.apply(b?b[0]||c:c,b):a}function r(a,b,c){h(B(b),function(b){a.addEventListener(b,c,!1)})}function q(a,b,c){h(B(b),function(b){a.removeEventListener(b,c,!1)})}function u(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function B(a){return a.trim().split(/\s+/g)}function p(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function n(a,b,c){for(var d=
[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];0>p(e,g)&&d.push(a[f]);e[f]=g;f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function U(a,b){for(var d,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<wa.length;){if(d=wa[g],e=d?d+f:b,e in a)return e;g++}return c}function ra(b){b=b.ownerDocument||b;return b.defaultView||b.parentWindow||a}function x(a,b){var c=this;this.manager=a;this.callback=b;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(b){l(a.options.enable,
[a])&&c.handler(b)};this.init()}function sa(a){var b=a.options.inputClass;return new (b?b:Na?fa:Oa?W:xa?ha:X)(a,La)}function La(a,b,d){var e,f,g=d.pointers.length;e=d.changedPointers.length;var h=b&v&&0===g-e,g=b&(t|w)&&0===g-e;d.isFirst=!!h;d.isFinal=!!g;h&&(a.session={});d.eventType=b;b=a.session;h=d.pointers;g=h.length;b.firstInput||(b.firstInput=ta(d));1<g&&!b.firstMultiple?b.firstMultiple=ta(d):1===g&&(b.firstMultiple=!1);e=b.firstInput;f=(g=b.firstMultiple)?g.center:e.center;var k=d.center=
ua(h);d.timeStamp=ia();d.deltaTime=d.timeStamp-e.timeStamp;d.angle=ja(f,k);d.distance=V(f,k);e=d.center;f=b.offsetDelta||{};var k=b.prevDelta||{},l=b.prevInput||{};d.eventType!==v&&l.eventType!==t||(k=b.prevDelta={x:l.deltaX||0,y:l.deltaY||0},f=b.offsetDelta={x:e.x,y:e.y});d.deltaX=k.x+(e.x-f.x);d.deltaY=k.y+(e.y-f.y);d.offsetDirection=va(d.deltaX,d.deltaY);f=d.deltaTime;e=d.deltaX/f||0;f=d.deltaY/f||0;d.overallVelocityX=e;d.overallVelocityY=f;d.overallVelocity=H(e)>H(f)?e:f;g?(e=g.pointers,e=V(h[0],
h[1],Y)/V(e[0],e[1],Y)):e=1;d.scale=e;g?(g=g.pointers,h=ja(h[1],h[0],Y)+ja(g[1],g[0],Y)):h=0;d.rotation=h;d.maxPointers=b.prevInput?d.pointers.length>b.prevInput.maxPointers?d.pointers.length:b.prevInput.maxPointers:d.pointers.length;f=b.lastInterval||d;h=d.timeStamp-f.timeStamp;d.eventType!=w&&(h>Pa||f.velocity===c)?(e=d.deltaX-f.deltaX,f=d.deltaY-f.deltaY,k=e/h||0,l=f/h||0,h=k,g=l,k=H(k)>H(l)?k:l,e=va(e,f),b.lastInterval=d):(k=f.velocity,h=f.velocityX,g=f.velocityY,e=f.direction);d.velocity=k;d.velocityX=
h;d.velocityY=g;d.direction=e;b=a.element;u(d.srcEvent.target,b)&&(b=d.srcEvent.target);d.target=b;a.emit("hammer.input",d);a.recognize(d);a.session.prevInput=d}function ta(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:L(a.pointers[c].clientX),clientY:L(a.pointers[c].clientY)},c++;return{timeStamp:ia(),pointers:b,center:ua(b),deltaX:a.deltaX,deltaY:a.deltaY}}function ua(a){var b=a.length;if(1===b)return{x:L(a[0].clientX),y:L(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,
e++;return{x:L(c/b),y:L(d/b)}}function va(a,b){return a===b?Z:H(a)>=H(b)?0>a?N:O:0>b?P:Q}function V(a,b,c){c||(c=ya);var d=b[c[0]]-a[c[0]];a=b[c[1]]-a[c[1]];return Math.sqrt(d*d+a*a)}function ja(a,b,c){c||(c=ya);return 180*Math.atan2(b[c[1]]-a[c[1]],b[c[0]]-a[c[0]])/Math.PI}function X(){this.evEl=Qa;this.evWin=Ra;this.pressed=!1;x.apply(this,arguments)}function fa(){this.evEl=za;this.evWin=Aa;x.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function Ba(){this.evTarget=Sa;this.evWin=
Ta;this.started=!1;x.apply(this,arguments)}function W(){this.evTarget=Ua;this.targetIds={};x.apply(this,arguments)}function Va(a,b){var c=s(a.touches),d=this.targetIds;if(b&(v|I)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f=s(a.changedTouches),g=[],h=this.target;if(e=c.filter(function(a){return u(a.target,h)}),b===v)for(c=0;c<e.length;)d[e[c].identifier]=!0,c++;for(c=0;c<f.length;)d[f[c].identifier]&&g.push(f[c]),b&(t|w)&&delete d[f[c].identifier],c++;return g.length?[n(e.concat(g),"identifier",
!0),g]:void 0}function ha(){x.apply(this,arguments);var a=m(this.handler,this);this.touch=new W(this.manager,a);this.mouse=new X(this.manager,a);this.primaryTouch=null;this.lastTouches=[]}function Ca(a){a=a.changedPointers[0];if(a.identifier===this.primaryTouch){var b={x:a.clientX,y:a.clientY};this.lastTouches.push(b);var c=this.lastTouches;setTimeout(function(){var a=c.indexOf(b);-1<a&&c.splice(a,1)},Wa)}}function ka(a,b){this.manager=a;this.set(b)}function Xa(a){if(-1<a.indexOf(J))return J;var b=
-1<a.indexOf(R),c=-1<a.indexOf(S);return b&&c?J:b||c?b?R:S:-1<a.indexOf(la)?la:Da}function D(a){this.options=C({},this.defaults,a||{});this.id=Ya++;this.manager=null;a=this.options.enable;this.options.enable=a===c?!0:a;this.state=aa;this.simultaneous={};this.requireFail=[]}function Ea(a){return a&T?"cancel":a&G?"end":a&M?"move":a&y?"start":""}function Fa(a){return a==Q?"down":a==P?"up":a==N?"left":a==O?"right":""}function ba(a,b){var c=b.manager;return c?c.get(a):a}function z(){D.apply(this,arguments)}
function ca(){z.apply(this,arguments);this.pY=this.pX=null}function ma(){z.apply(this,arguments)}function na(){D.apply(this,arguments);this._input=this._timer=null}function oa(){z.apply(this,arguments)}function pa(){z.apply(this,arguments)}function da(){D.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function E(a,b){b=b||{};var d=b.recognizers;return b.recognizers=d===c?E.defaults.preset:d,new qa(a,b)}function qa(a,b){this.options=C({},E.defaults,b||{});
this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=sa(this);this.touchAction=new ka(this,this.options.touchAction);Ga(this,!0);h(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function Ga(a,b){var c=a.element;if(c.style){var d;h(a.options.cssProps,function(e,f){d=U(c.style,f);b?(a.oldCssProps[d]=c.style[d],c.style[d]=
e):c.style[d]=a.oldCssProps[d]||""});b||(a.oldCssProps={})}}function Za(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0);d.gesture=c;c.target.dispatchEvent(d)}var C,wa=" webkit Moz MS ms o".split(" "),$a=b.createElement("div"),Ma="function",L=Math.round,H=Math.abs,ia=Date.now;C="function"!=typeof Object.assign?function(a){if(a===c||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(e!==c&&null!==e)for(var f in e)e.hasOwnProperty(f)&&
(b[f]=e[f])}return b}:Object.assign;var Ha=k(function(a,b,d){for(var e=Object.keys(b),f=0;f<e.length;)(!d||d&&a[e[f]]===c)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ab=k(function(a,b){return Ha(a,b,!0)},"merge","Use `assign`."),Ya=1,bb=/mobile|tablet|ip(ad|hone|od)|android/i,xa="ontouchstart"in a,Na=U(a,"PointerEvent")!==c,Oa=xa&&bb.test(navigator.userAgent),Pa=25,v=1,I=2,t=4,w=8,Z=1,N=2,O=4,P=8,Q=16,A=N|O,K=P|Q,Ia=A|K,ya=["x","y"],Y=["clientX","clientY"];x.prototype={handler:function(){},
init:function(){this.evEl&&r(this.element,this.evEl,this.domHandler);this.evTarget&&r(this.target,this.evTarget,this.domHandler);this.evWin&&r(ra(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&q(this.element,this.evEl,this.domHandler);this.evTarget&&q(this.target,this.evTarget,this.domHandler);this.evWin&&q(ra(this.element),this.evWin,this.domHandler)}};var cb={mousedown:v,mousemove:I,mouseup:t},Qa="mousedown",Ra="mousemove mouseup";g(X,x,{handler:function(a){var b=cb[a.type];
b&v&&0===a.button&&(this.pressed=!0);b&I&&1!==a.which&&(b=t);this.pressed&&(b&t&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var db={pointerdown:v,pointermove:I,pointerup:t,pointercancel:w,pointerout:w},eb={2:"touch",3:"pen",4:"mouse",5:"kinect"},za="pointerdown",Aa="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(za="MSPointerDown",Aa="MSPointerMove MSPointerUp MSPointerCancel");g(fa,x,{handler:function(a){var b=
this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),d=db[d],e=eb[a.pointerType]||a.pointerType,f="touch"==e,g=p(b,a.pointerId,"pointerId");d&v&&(0===a.button||f)?0>g&&(b.push(a),g=b.length-1):d&(t|w)&&(c=!0);0>g||(b[g]=a,this.callback(this.manager,d,{pointers:b,changedPointers:[a],pointerType:e,srcEvent:a}),c&&b.splice(g,1))}});var fb={touchstart:v,touchmove:I,touchend:t,touchcancel:w},Sa="touchstart",Ta="touchstart touchmove touchend touchcancel";g(Ba,x,{handler:function(a){var b=fb[a.type];
if(b===v&&(this.started=!0),this.started){var c,d=s(a.touches);c=s(a.changedTouches);c=(b&(t|w)&&(d=n(d.concat(c),"identifier",!0)),[d,c]);b&(t|w)&&0===c[0].length-c[1].length&&(this.started=!1);this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}}});var gb={touchstart:v,touchmove:I,touchend:t,touchcancel:w},Ua="touchstart touchmove touchend touchcancel";g(W,x,{handler:function(a){var b=gb[a.type],c=Va.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],
changedPointers:c[1],pointerType:"touch",srcEvent:a})}});var Wa=2500;g(ha,x,{handler:function(a,b,c){var d="touch"==c.pointerType,e="mouse"==c.pointerType;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)b&v?(this.primaryTouch=c.changedPointers[0].identifier,Ca.call(this,c)):b&(t|w)&&Ca.call(this,c);else{if(d=e)a:{for(var d=c.srcEvent.clientX,e=c.srcEvent.clientY,f=0;f<this.lastTouches.length;f++){var g=this.lastTouches[f],h=Math.abs(d-g.x),g=Math.abs(e-g.y);if(25>=h&&25>=
g){d=!0;break a}}d=!1}if(d)return}this.callback(a,b,c)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Ja=U($a.style,"touchAction"),Ka=Ja!==c,Da="auto",la="manipulation",J="none",R="pan-x",S="pan-y",ea=function(){if(!Ka)return!1;var b={},c=a.CSS&&a.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}();ka.prototype={set:function(a){"compute"==a&&(a=this.compute());Ka&&this.manager.element.style&&
ea[a]&&(this.manager.element.style[Ja]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return h(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Xa(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=-1<d.indexOf(J)&&!ea[J],f=-1<d.indexOf(S)&&!ea[S],d=-1<d.indexOf(R)&&
!ea[R];if(e){var g=2>a.distance,h=250>a.deltaTime;if(1===a.pointers.length&&g&&h)return}return d&&f?void 0:e||f&&c&A||d&&c&K?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};var aa=1,y=2,M=4,G=8,F=G,T=16;D.prototype={defaults:{},set:function(a){return C(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=ba(a,this),b[a.id]||(b[a.id]=
a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=ba(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=ba(a,this),-1===p(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=ba(a,this);a=p(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<
this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(d){c.manager.emit(d,a)}var c=this,d=this.state;G>d&&b(c.options.event+Ea(d));b(c.options.event);a.additionalEvent&&b(a.additionalEvent);d>=G&&b(c.options.event+Ea(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|aa)))return!1;a++}return!0},recognize:function(a){a=
C({},a);return l(this.options.enable,[this,a])?(this.state&(F|T|32)&&(this.state=aa),this.state=this.process(a),void(this.state&(y|M|G|T)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},process:function(a){},getTouchAction:function(){},reset:function(){}};g(z,D,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(y|M);a=this.attrTest(a);return d&&(c&w||!a)?b|T:d||a?c&t?b|G:b&y?b|
M:y:32}});g(ca,z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ia},getTouchAction:function(){var a=this.options.direction,b=[];return a&A&&b.push(S),a&K&&b.push(R),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&A?(e=0===f?Z:0>f?N:O,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Z:0>g?P:Q,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return z.prototype.attrTest.call(this,
a)&&(this.state&y||!(this.state&y)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var b=Fa(a.direction);b&&(a.additionalEvent=this.options.event+b);this._super.emit.call(this,a)}});g(ma,z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[J]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&y)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?
"in":"out"));this._super.emit.call(this,a)}});g(na,D,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Da]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(t|w)&&!f)this.reset();else if(a.eventType&v)this.reset(),this._timer=e(function(){this.state=F;this.tryEmit()},b.time,this);else if(a.eventType&t)return F;return 32},reset:function(){clearTimeout(this._timer)},
emit:function(a){this.state===F&&(a&&a.eventType&t?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ia(),this.manager.emit(this.options.event,this._input)))}});g(oa,z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[J]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&y)}});g(pa,z,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:A|K,pointers:1},getTouchAction:function(){return ca.prototype.getTouchAction.call(this)},
attrTest:function(a){var b,c=this.options.direction;return c&(A|K)?b=a.overallVelocity:c&A?b=a.overallVelocityX:c&K&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&H(b)>this.options.velocity&&a.eventType&t},emit:function(a){var b=Fa(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});g(da,D,{defaults:{event:"tap",pointers:1,taps:1,interval:300,
time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[la]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&v&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=t)return this.failTimeout();c=this.pTime?a.timeStamp-this.pTime<b.interval:!0;d=!this.pCenter||V(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;d&&c?this.count+=1:this.count=
1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=F;this.tryEmit()},b.interval,this),y):F}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==F&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});E.VERSION="2.0.8";E.defaults={domEvents:!1,touchAction:"compute",enable:!0,
inputTarget:null,inputClass:null,preset:[[oa,{enable:!1}],[ma,{enable:!1},["rotate"]],[pa,{direction:A}],[ca,{direction:A},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[na]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};qa.prototype={set:function(a){return C(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),
this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&F)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],2===b.stopped||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(y|M|G)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof D)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];
return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers;a=p(b,a);-1!==a&&(b.splice(a,1),this.touchAction.update())}return this},on:function(a,b){if(a!==c&&b!==c){var d=this.handlers;return h(B(a),function(a){d[a]=d[a]||[];d[a].push(b)}),this}},off:function(a,b){if(a!==c){var d=
this.handlers;return h(B(a),function(a){b?d[a]&&d[a].splice(p(d[a],b),1):delete d[a]}),this}},emit:function(a,b){this.options.domEvents&&Za(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a;b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&Ga(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};C(E,{INPUT_START:v,INPUT_MOVE:I,INPUT_END:t,INPUT_CANCEL:w,STATE_POSSIBLE:aa,
STATE_BEGAN:y,STATE_CHANGED:M,STATE_ENDED:G,STATE_RECOGNIZED:F,STATE_CANCELLED:T,STATE_FAILED:32,DIRECTION_NONE:Z,DIRECTION_LEFT:N,DIRECTION_RIGHT:O,DIRECTION_UP:P,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:A,DIRECTION_VERTICAL:K,DIRECTION_ALL:Ia,Manager:qa,Input:x,TouchAction:ka,TouchInput:W,MouseInput:X,PointerEventInput:fa,TouchMouseInput:ha,SingleTouchInput:Ba,Recognizer:D,AttrRecognizer:z,Tap:da,Pan:ca,Swipe:pa,Pinch:ma,Rotate:oa,Press:na,on:r,off:q,each:h,merge:ab,extend:Ha,assign:C,inherit:g,bindFn:m,
prefixed:U});("undefined"!=typeof a?a:"undefined"!=typeof self?self:{}).Hammer=E;"function"==typeof define&&define.amd?define(function(){return E}):"undefined"!=typeof module&&module.exports?module.exports=E:a[d]=E}(window,document,"Hammer"),!function(){var a=window.MutationObserver||window.WebKitMutationObserver,b="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;if(void 0===document.documentElement.style["touch-action"]&&!document.documentElement.style["-ms-touch-action"]&&
b&&a){window.Hammer=window.Hammer||{};var d=/touch-action[:][\s]*(none)[^;'"]*/,c=/touch-action[:][\s]*(manipulation)[^;'"]*/,e=/touch-action/,b=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,f=function(){try{var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){return!1}}()&&b;window.Hammer.time={getTouchAction:function(a){return this.checkStyleString(a.getAttribute("style"))},checkStyleString:function(a){return e.test(a)?
d.test(a)?"none":c.test(a)?"manipulation":!0:void 0},shouldHammer:function(a){var b=this.hasParent(a.target);return b&&(!f||125>Date.now()-a.target.lastStart)?b:!1},touchHandler:function(a){var b=a.target.getBoundingClientRect(),b=b.top!==this.pos.top||b.left!==this.pos.left,c=this.shouldHammer(a);("none"===c||!1===b&&"manipulation"===c)&&("touchend"===a.type&&(a.target.focus(),setTimeout(function(){a.target.click()},0)),a.preventDefault());this.scrolled=!1;delete a.target.lastStart},touchStart:function(a){this.pos=
a.target.getBoundingClientRect();f&&this.hasParent(a.target)&&(a.target.lastStart=Date.now())},styleWatcher:function(a){a.forEach(this.styleUpdater,this)},styleUpdater:function(a){if(a.target.updateNext)return void(a.target.updateNext=!1);var b=this.getTouchAction(a.target);return b?void("none"!==b&&(a.target.hadTouchNone=!1)):void(!b&&(a.oldValue&&this.checkStyleString(a.oldValue)||a.target.hadTouchNone)&&(a.target.hadTouchNone=!0,a.target.updateNext=!1,a.target.setAttribute("style",a.target.getAttribute("style")+
" touch-action: none;")))},hasParent:function(a){for(var b=a;b&&b.parentNode;b=b.parentNode)if(a=this.getTouchAction(b))return a;return!1},installStartEvents:function(){document.addEventListener("touchstart",this.touchStart.bind(this));document.addEventListener("mousedown",this.touchStart.bind(this))},installEndEvents:function(){document.addEventListener("touchend",this.touchHandler.bind(this),!0);document.addEventListener("mouseup",this.touchHandler.bind(this),!0)},installObserver:function(){this.observer=
(new a(this.styleWatcher.bind(this))).observe(document,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})},install:function(){this.installEndEvents();this.installStartEvents();this.installObserver()}};window.Hammer.time.install()}}());var analyticsSource="",gaPropertyId="UA-43023146-1";"84"==getURLParameter("partner")?(analyticsSource="GQ",gaPropertyId="UA-43023146-3"):"80"==getURLParameter("partner")||"undefined"!=typeof movieId&&2471==movieId?(analyticsSource="Hallmark",
gaPropertyId="UA-43023146-4"):"76"==getURLParameter("partner")?(analyticsSource="TheTake",gaPropertyId="UA-43023146-1"):"70"==getURLParameter("partner")?(analyticsSource="Bravo",gaPropertyId="UA-43023146-8"):(analyticsSource="TheTake",gaPropertyId="UA-43023146-1");window.TheTakeMetaOverlay=window.TheTakeMetaOverlay||{};var ttReady=!1,optedOut=!1,optedIn=!1,disabledViaOptOut=!1,getFrameProductsUrl=theTakeBaseUrl+"/movies/listMovieTrailerFrameProductsAroundTimeNew?movieId\x3d",getOutfitsUrl=theTakeBaseUrl+
"/products/listOutfits?movieId\x3d",listProductComps=theTakeBaseUrl+"/comps/listCompsForProduct?start\x3d0\x26limit\x3d9\x26sortParam\x3dprice\x26sortOrder\x3ddesc\x26originalProductId\x3d",listProductAccessories=theTakeBaseUrl+"/products/listProductAccessories?productId\x3d",checkPartnerUrl=theTakeBaseUrl+"/movies/checkPartnerId?partnerId\x3d",listThumbnailsUrl=theTakeBaseUrl+"/frames/listMovieFrameThumbnails?movieId\x3d",videoId=-1,clipOffset,clipLength,products={},outfits,productFrames,productOutfits,
latestFrameIndex=0,latestTimecode=0,isExperienceEnabled=!1,isPaused=!1,introAnimationPlayed=!1,isFacebook=-1<(navigator.userAgent||navigator.vendor||window.opera).indexOf("FBAN"),isIOS=/iphone|ipad|ipod/gi.test(navigator.appVersion),isChrome=-1<navigator.userAgent.indexOf("Chrome"),isExplorer=-1<navigator.userAgent.indexOf("MSIE"),isFirefox=-1<navigator.userAgent.indexOf("Firefox"),isSafari=-1<navigator.userAgent.indexOf("Safari"),isOpera=-1<navigator.userAgent.toLowerCase().indexOf("op");isChrome&&
isSafari&&(isSafari=!1);isChrome&&isOpera&&(isChrome=!1);var playerRoot,ttPlayerDiv="",videoTime=-1,ttCompsTitleText,ttSponsorData=[],ttHasBuyNow=!1,ttBuyNowContainer="",bubblesExpanded=!1,bubblesAnimating=!1,scrollbarWidth=null,temporaryPause=!1,scrollInterval=void 0,bubbleShrinkDelay=5E3,bubbleShrinkDelayFullscreen=5E3,bubbleHideDelay=5E3,controlsHideDelay=5E3,controlsMouseOutHideDelay=5E3,numBubblesPrev=0,delayUpdateForMinimalTransition=!1,useWaterfallFormat=!1,showAllCharactersBubble=!1,universalCart=
!1,ttCart=[],disableSnipes=!1,snipeTimers=[],playingSnipe,currentSnipe,isFullEpisode=!1,autoShowOutfits=!0,ttCropZindexLow=49,changeOutfitProductTiles,ttLoadOutfitModalContent,showFsOutfits=!1,showFavorites=!1,ttVideoPadding=40;TheTakeMetaOverlay.pauseOnModalOpen=!0;TheTakeMetaOverlay.favoriteProducts=[];TheTakeMetaOverlay.favoriteOutfitProducts={};var comps={},thumbnails=[];TheTakeMetaOverlay.doneProgress={};var ttVideoMeta,huluSponsored=!1,isBamPublisher=!1,hidePrices=!1;TheTakeMetaOverlay.user=
TheTakeMetaOverlay.user||{};TheTakeMetaOverlay.user.sessionId="";TheTakeMetaOverlay.util=TheTakeMetaOverlay.util||{};var ttGoogleAnalyticsExperimentId="",ttUserGroupId=function(){var a=-1,a=jQuery.cookieStorage.get("ttExpUserGroupId"),b=jQuery.localStorage.get("ttExpUserGroupId");0===a||0<a||(0===b||0<b?a=b:(a=Math.floor(2*Math.random()),/Version\/\d+\.\d+(\.\d+)?.*Safari/.test(navigator.userAgent)?jQuery.localStorage.set("ttExpUserGroupId",a):jQuery.cookieStorage.setExpires(14).set("ttExpUserGroupId",
a)));return a}(),ttCardsGroupId=function(){var a=-1,a=jQuery.cookieStorage.get("ttCardsExpUserGroupId"),b=jQuery.localStorage.get("ttCardsExpUserGroupId");0===a||0<a||(0===b||0<b?a=b:(a=Math.floor(2*Math.random()),/Version\/\d+\.\d+(\.\d+)?.*Safari/.test(navigator.userAgent)?jQuery.localStorage.set("ttCardsExpUserGroupId",a):jQuery.cookieStorage.setExpires(14).set("ttCardsExpUserGroupId",a)));return a}(),ttIntroGroupId=function(){var a=-1,a=jQuery.cookieStorage.get("ttIntroExpUserGroupId"),b=jQuery.localStorage.get("ttIntroExpUserGroupId");
0===a||0<a||(0===b||0<b?a=b:(a=Math.floor(2*Math.random()),/Version\/\d+\.\d+(\.\d+)?.*Safari/.test(navigator.userAgent)?jQuery.localStorage.set("ttIntroExpUserGroupId",a):jQuery.cookieStorage.setExpires(14).set("ttIntroExpUserGroupId",a)));return a}(),ttClientId="-1";window.ttClientIdListener=function(a){if(!("string"!==typeof a.data||null==a.data.match(/^[a-zA-Z0-9-]*$/g)||"https://d160accw6snlyf.cloudfront.net"!==a.origin&&"https://injector.thetake-api.com"!==a.origin&&"http://thetake-dev.ngrok.io"!==
a.origin&&"https://thetake-dev.ngrok.io"!==a.origin&&0>a.origin.indexOf("://localhost:"))){window.removeEventListener("message",window.ttClientIdListener);ttClientId=a.data;ttClientId&&-1!==ttClientId&&0!==ttClientId.length&&"-1"!==ttClientId||(console.warn("Global client ID not set",ttClientId),getClientId());a=jQuery;a.ajaxSetup({cache:!0});jQuery.scrollDepth({elements:"#tile-container #favoriteOutfits .outfit[data-id\x3d'1'] .outfit[data-id\x3d'2'] .outfit[data-id\x3d'3'] .outfit[data-id\x3d'5'] .outfit[data-id\x3d'10'] .outfit[data-id\x3d'20']".split(" "),
percentage:!1,userTiming:!1,pixelDepth:!1,nonInteraction:!1,eventHandler:function(a){recordAnalyticsAction("navigation","scroll depth",{vid:videoId,video_time:videoTime,element:a.eventLabel,fullscreen:document.isFullscreen()})}});console.log("[TT] First Load");console.log("[TT] Checking for valid website...");var b=window.location.host;TheTakeMetaOverlay.isAd=!1;-1==b.indexOf("bravotv.com")&&(ttIntroGroupId=-1);-1==b.indexOf("watchhallmarktv.com")&&-1==b.indexOf("hallmarkchanneleverywhere.com")&&
-1==b.indexOf("prelive.crownmediadev.com")&&(ttBetaGroupId=-1);-1!=b.indexOf("bravotv.com")?(console.log("[TT] Bravo website detected"),analyticsSource="Bravo",gaPropertyId="UA-43023146-8",ttUserGroupId=-1,-1==window.location.href.indexOf("vanderpump-rules/season-5/ep-7-the-sociopath-test")&&-1==window.location.href.indexOf("vanderpump-rules/season-5/ep-8-no-show")&&-1==window.location.href.indexOf("vanderpump-rules/season-5/ep-9-the-talk-of-montauk")&&(ttCardsGroupId=-1),(-1!=window.location.href.indexOf("staging.bravotv.com")||
0<window.location.href.indexOf("/videos/")||-1!=window.location.href.indexOf("vanderpump-rules/season-5/ep-7-the-sociopath-test")||-1!=window.location.href.indexOf("vanderpump-rules/season-5/ep-8-no-show")||-1!=window.location.href.indexOf("vanderpump-rules/season-5/ep-9-the-talk-of-montauk"))&&a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-bravo.js",function(){ttInit();loadedMiniInjector();ttPostInit()})):-1!=b.indexOf("watchhallmarktv.com")||-1!=b.indexOf("hallmarkchanneleverywhere.com")||
-1!=b.indexOf("prelive.crownmediadev.com")?(console.log("[TT] Hallmark website detected"),analyticsSource="Hallmark",gaPropertyId="UA-43023146-4",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-hallmark.js",function(){TheTakeMetaOverlay.onPopState()})):-1!=b.indexOf("hallmarkchannel.com")||-1!=b.indexOf("hallmark-channel.psdops.com")?(console.log("[TT] Hallmark website detected"),analyticsSource="Hallmark",gaPropertyId="UA-43023146-4",ttUserGroupId=ttCardsGroupId=
-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-hallmark-clips.js",function(){ttInit()})):-1!=b.indexOf("intothegloss.com")?(console.log("[TT] ITG website detected"),hidePrices=isBamPublisher=!0,analyticsSource="ITG",gaPropertyId="UA-43023146-10",ttUserGroupId=1,ttCardsGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-itg.js",function(){ttInit();loadedMiniInjector()})):-1!=b.indexOf("purewow.com")?(console.log("[TT] PW website detected"),hidePrices=isBamPublisher=!0,analyticsSource=
"PW",gaPropertyId="UA-43023146-5",ttUserGroupId=1,ttCardsGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-pw.js",function(){ttInit()})):-1!=b.indexOf("thezoereport.com")?(console.log("[TT] ZR website detected"),hidePrices=isBamPublisher=!0,analyticsSource="ZR",gaPropertyId="UA-43023146-6",ttUserGroupId=1,ttCardsGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-zr.js",function(){ttInit();loadedMiniInjector()})):-1!=b.indexOf("beautyisboring.com")?(console.log("[TT] BIB website detected"),
hidePrices=isBamPublisher=!0,analyticsSource="BIB",gaPropertyId="UA-43023146-9",ttUserGroupId=1,ttCardsGroupId=-1,probablyMobile&&!isIPad?a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-bib-mobile.js",function(){ttInit();loadedMiniInjector()}):a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-bib.js",function(){ttInit();loadedMiniInjector()})):-1!=b.indexOf("cc.com")||0<=window.location.pathname.indexOf("/full-episodes/hc3n9z/")?(console.log("[TT] Comedy website detected"),analyticsSource=
"Comedy",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-comedy.js",function(){ttInit();loadedMiniInjector();ttPostInit()})):-1!=b.indexOf("today.com")?(console.log("[TT] TODAY website detected"),analyticsSource="Today",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-today.js",function(){ttInit();loadedMiniInjector()})):-1!=b.indexOf("teamcoco.com")?(console.log("[TT] Conan website detected"),analyticsSource="TeamCoco",
ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-turner.js",function(){ttInit()})):-1!=b.indexOf("nbc.com")?(console.log("[TT] NBC website detected"),analyticsSource="Today",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-nbc.js",function(){ttInit()})):-1!=b.indexOf("hulu.com")?(console.log("[TT] Hulu website detected"),analyticsSource="Hulu",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-hulu.js",
function(){ttInit();loadedMiniInjector();ttPostInit()})):-1!=b.indexOf("directvnow.com")?(console.log("[TT] DirecTV website detected"),analyticsSource="DirecTV",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-directv.js",function(){ttInit();loadedMiniInjector();ttPostInit()})):-1!=b.indexOf("tvland.com")?(console.log("[TT] TV Land website detected"),analyticsSource="TVLand",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-tvland.js",
function(){ttInit();loadedMiniInjector();ttPostInit()})):-1!=b.indexOf("video.gq.com")?(console.log("[TT] GQ website detected"),isBamPublisher=!0,analyticsSource="GQ",gaPropertyId="UA-43023146-3",ttUserGroupId=1,ttCardsGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-gq.js",function(){ttInit()})):-1!=b.indexOf("gq.com")?gaPropertyId="UA-43023146-3":-1!=b.indexOf("nymag.com")&&-1!=window.location.pathname.indexOf("/thecut/2016/02/velvet-noir-nuit-burlesque-bombshell.html")?(console.log("[TT] NY Mag website detected"),
analyticsSource="NYMag",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-nymag.js",function(){ttInit();loadedMiniInjector();ttPostInit()})):-1==b.indexOf("d160accw6snlyf.cloudfront.net")&&-1==b.indexOf("injector.thetake-api.com")&&-1==b.indexOf("thetake-injector")&&-1==b.indexOf("localhost")&&-1==b.indexOf("thetake-dev.ngrok.io")||-1==window.location.pathname.indexOf("/demo-page.html")?-1==b.indexOf("thetake.com")&&-1==b.indexOf("thetake-injector.herokuapp.net")&&
-1==b.indexOf("d160accw6snlyf.cloudfront.net")&&-1==b.indexOf("localhost")&&-1==b.indexOf("thetake-dev.ngrok.io")||-1==window.location.pathname.indexOf("/ytEmbed")&&-1==window.location.pathname.indexOf("/zalora")?-1==b.indexOf("thetake.com")&&-1==b.indexOf("d160accw6snlyf.cloudfront.net")&&-1==b.indexOf("localhost")||-1==window.location.pathname.indexOf("/embed")?-1==b.indexOf("thetake.com")&&-1==b.indexOf("d160accw6snlyf.cloudfront.net")&&-1==b.indexOf("localhost")||-1==window.location.pathname.indexOf("/twitter_embed")?
-1==b.indexOf("thetake.com")&&-1==b.indexOf("d160accw6snlyf.cloudfront.net")&&-1==b.indexOf("localhost")||-1==window.location.pathname.indexOf("/video_embed")?-1!=b.indexOf("youtube.com")?(analyticsSource="Youtube",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-youtube.js",function(){ttInit();loadedMiniInjector()})):console.error("Website not recognized"):(console.log("[TT] tt embed website detected"),ttCardsGroupId=ttUserGroupId=-1,isFacebook=!0,probablyMobile?
a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-embed-mobile.js",function(){ttInit();loadedMiniInjector()}):(a("#playOverlay").css("display","none"),a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-embed.js",function(){ttInit();loadedMiniInjector()}))):(console.log("[TT] tt twitter embed detected"),ttCardsGroupId=ttUserGroupId=-1,isFacebook=!0,probablyMobile?a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-twitter-mobile.js",function(){ttInit();loadedMiniInjector()}):a.getScript(theTakeBaseUrl+
"/public/js/thetake-injector-twitter.js",function(){ttInit();loadedMiniInjector()})):(console.log("[TT] tt embed website detected"),ttCardsGroupId=ttUserGroupId=-1,isFacebook=!0,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-fb-mobile.js",function(){ttInit();loadedMiniInjector()})):(console.log("[TT] tt yt embed website detected"),-1!=document.referrer.indexOf("purewow.com")?(console.log("[TT] PW website detected"),hidePrices=isBamPublisher=!0,analyticsSource="PW",gaPropertyId="UA-43023146-5",
ttUserGroupId=1,ttCardsGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-pw-embed.js",function(){ttInit();loadedMiniInjector()})):(analyticsSource="Zalora",gaPropertyId="UA-43023146-13",ttCardsGroupId=ttUserGroupId=-1,a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-zalora.js",function(){ttInit();loadedMiniInjector()}))):(ttCardsGroupId=ttUserGroupId=-1,console.log("[TT] tt demo page detected"),a.getScript(theTakeBaseUrl+"/public/js/thetake-injector-demo.js",function(){ttInit();
loadedMiniInjector();ttPostInit()}));(function(a,b,e,f,h,k,g){a.GoogleAnalyticsObject=h;a[h]=a[h]||function(){(a[h].q=a[h].q||[]).push(arguments)};a[h].l=1*new Date;k=b.createElement(e);g=b.getElementsByTagName(e)[0];k.async=1;k.src=f;g.parentNode.insertBefore(k,g)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga(function(){void 0==ga.getByName("TheTakeTracker")&&ga("create",gaPropertyId,"auto",{name:"TheTakeTracker",storage:"none",clientId:ttClientId});if(-1==window.location.host.indexOf("thetake.com")&&
-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&-1==window.location.host.indexOf("localhost")||-1==window.location.pathname.indexOf("/embed"))if(-1==window.location.host.indexOf("thetake.com")&&-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&-1==window.location.host.indexOf("localhost")||-1==window.location.pathname.indexOf("/twitter_embed"))-1==window.location.host.indexOf("thetake.com")&&-1==window.location.host.indexOf("d160accw6snlyf.cloudfront.net")&&-1==
window.location.host.indexOf("localhost")&&-1==window.location.host.indexOf("thetake-dev.ngrok.io")||-1==window.location.pathname.indexOf("/video_embed")&&-1==window.location.pathname.indexOf("/ytEmbed")||ga("TheTakeTracker.set","location",0<window.document.referrer.length?window.document.referrer:window.location.href);else{var a="",a="USA"==analyticsSource?"https://usanetwork.com":"UPHE"==analyticsSource?"https://uphe.com":"TheTake"==analyticsSource?"https://thetake.com":"https://bravotv.com";probablyMobile?
ga("TheTakeTracker.set","location",a+"/twitter-mobile"):ga("TheTakeTracker.set","location",a+"/twitter")}else"GQ"==analyticsSource?ga("TheTakeTracker.set","location","https://gq.com/facebook-mobile"):"USA"==analyticsSource?ga("TheTakeTracker.set","location","https://usanetwork.com/facebook-mobile"):"UPHE"==analyticsSource?ga("TheTakeTracker.set","location","https://uphe.com/facebook-mobile"):"Hallmark"==analyticsSource?ga("TheTakeTracker.set","location","https://hallmarkchannel.com/facebook-mobile"):
"Bravo"==analyticsSource?ga("TheTakeTracker.set","location","https://bravotv.com/facebook-mobile"):ga("TheTakeTracker.set","location","https://thetake.com/facebook-mobile");ga("TheTakeTracker.require","displayfeatures");ga("TheTakeTracker.send","pageview")});recordAnalyticsAction("navigation","pageview")}};window.addEventListener("message",window.ttClientIdListener);var bodyWaitInterval=ttSetInterval(function(){if(void 0!=document.body&&null!=document.body){ttClearInterval(bodyWaitInterval);var a=
document.createElement("iframe");a.style.display="none";a.style.height="0px";a.style.width="0px";document.body.appendChild(a).src=theTakeBaseUrl+"/public/xdStorage.html"}},100),ttVideoProductsContainerString="",hoverTime=void 0;TheTakeMetaOverlay.contains=function(a,b){for(var d=a.length;d--;)if(a[d]===b)return!0;return!1};TheTakeMetaOverlay.OnPlay=function(a){a=jQuery;console.log("[TT] Play");isPaused=!1;temporaryPause||recordAnalyticsAction("video player","play",{vid:videoId,video_time:videoTime,
fullscreen:document.isFullscreen()});temporaryPause=!1;playingSnipe&&(cancelSnipe(),animateBubblesIn(),a(document).trigger("ttBubblesInPlay"));a("#ttVideoProductsContainerOuter").css("visibility","visible");bubblesExpanded&&!bubblesAnimating&&(animateBubblesIn(),a(document).trigger("ttBubblesInPlay"));a(playerRoot).hasClass("tt-hover")||shrinkBubbles(bubbleShrinkDelay)};TheTakeMetaOverlay.OnPause=function(a){isPaused=!0;console.log("[TT] Pause \x3d "+a);temporaryPause||(bubblesAnimating||showBubblesForFrame(a),
recordAnalyticsAction("video player","pause",{vid:videoId,video_time:videoTime,fullscreen:document.isFullscreen()}),enlargeBubbles())};TheTakeMetaOverlay.OnSeek=function(a){var b=jQuery;console.log("[TT] Seek \x3d "+a);isFacebook&&0<parseInt(a)&&(window.location.hash=JSON.stringify({time:parseInt(a)}));isPaused&&(b("#ttVideoProductsContainerOuter").css("visibility","visible"),videoTime=a,showBubblesForFrame(a));recordAnalyticsAction("video player","seek",{vid:videoId,video_time:videoTime,fullscreen:document.isFullscreen()})};
TheTakeMetaOverlay.TimeUpdate=function(a){var b=jQuery;videoTime=a;if(!isPaused&&!bubblesAnimating&&!bubblesExpanded&&(showBubblesForFrame(a),isFacebook&&0<parseInt(videoTime)&&(window.location.hash=JSON.stringify({time:parseInt(videoTime)})),0<b(".ttBubble").length&&!disableSnipes||isBamPublisher&&useWaterfallFormat&&1E3<=a))for(b=0;b<ttVideoMeta.snipes.length;b++){var d=ttVideoMeta.snipes[b],c=3E4;"Bravo"===analyticsSource&&(c=9E4);videoTime>=d.time&&videoTime<d.time+c&&playSnipe(d)}0<ttDuration()&&
(TheTakeMetaOverlay.doneProgress[videoId]=TheTakeMetaOverlay.doneProgress[videoId]||{},TheTakeMetaOverlay.doneProgress[videoId]["0"]||(TheTakeMetaOverlay.doneProgress[videoId]["0"]=!0,recordAnalyticsAction("video player","progress",{vid:videoId,percent:"0",fullscreen:document.isFullscreen()})),.25<=a/ttDuration()&&!TheTakeMetaOverlay.doneProgress[videoId]["25"]&&(TheTakeMetaOverlay.doneProgress[videoId]["25"]=!0,recordAnalyticsAction("video player","progress",{vid:videoId,percent:"25",fullscreen:document.isFullscreen()})),
.5<=a/ttDuration()&&!TheTakeMetaOverlay.doneProgress[videoId]["50"]&&(TheTakeMetaOverlay.doneProgress[videoId]["50"]=!0,recordAnalyticsAction("video player","progress",{vid:videoId,percent:"50",fullscreen:document.isFullscreen()})),.75<=a/ttDuration()&&!TheTakeMetaOverlay.doneProgress[videoId]["75"]&&(TheTakeMetaOverlay.doneProgress[videoId]["75"]=!0,recordAnalyticsAction("video player","progress",{vid:videoId,percent:"75",fullscreen:document.isFullscreen()})),(.99<=a/ttDuration()||3E3>ttDuration()-
a)&&!TheTakeMetaOverlay.doneProgress[videoId]["100"]&&(TheTakeMetaOverlay.doneProgress[videoId]["100"]=!0,recordAnalyticsAction("video player","progress",{vid:videoId,percent:"100",fullscreen:document.isFullscreen()})))};TheTakeMetaOverlay.OnMediaStart=function(a,b,d){if(!optedOut){var c=videoId,e=clipOffset,f=clipLength;0<a?(videoId=a,clipOffset=b,clipLength=d,c!=videoId&&(recordAnalyticsAction("navigation","video load",{vid:videoId}),"undefined"!=typeof ttVideosMeta&&null!=ttVideosMeta[a]?ttVideoMeta=
ttVideosMeta[a]:void 0!==ttVideoMeta&&ttVideoMeta.snipes&&ttVideoMeta.snipes.length||(ttVideoMeta={snipes:[{type:"intro",time:0}]})),c!=videoId||e!=clipOffset||f!=clipLength?(hideControls(controlsHideDelay),hideBubbles(bubbleHideDelay),getVideoData(videoId,clipOffset,clipLength)):console.log("[TT] same video")):(ttVideoMeta=void 0,videoId=-1,resetPage())}};TheTakeMetaOverlay.OnMediaStartPartner=function(a,b,d,c){var e=jQuery;"2990605"==a?(a=videoId,videoId=2204,ttVideoMeta={snipes:[{type:"intro",
time:0}]},a!=videoId?(recordAnalyticsAction("navigation","video load",{vid:videoId}),getVideoData(videoId,b,d)):console.log("[TT] same video")):e.get(checkPartnerUrl+a,function(a){huluSponsored&&2668==a&&(a=2759);TheTakeMetaOverlay.OnMediaStart(a,b,d);e.isFunction(c)&&c(a)})};TheTakeMetaOverlay.displayStoredProductFavorites=function(){if(showFavorites){try{var a=window.localStorage.getItem("ttFavorites");TheTakeMetaOverlay.favoriteOutfitProducts=void 0==a?{}:JSON.parse(a)}catch(b){TheTakeMetaOverlay.favoriteOutfitProducts=
{}}for(var d in TheTakeMetaOverlay.favoriteOutfitProducts)if(TheTakeMetaOverlay.favoriteOutfitProducts.hasOwnProperty(d)&&!(0>TheTakeMetaOverlay.getOutfitStackingOrder(d)))for(a=0;a<TheTakeMetaOverlay.favoriteOutfitProducts[d].length;a++)TheTakeMetaOverlay.addProductFavorite(d,TheTakeMetaOverlay.favoriteOutfitProducts[d][a],!0)}};TheTakeMetaOverlay.getOutfitStackingOrder=function(a){if(!showFavorites)return-1;var b=-1;a=parseInt(a,10);for(var d=0;d<outfits.length;d++)if(outfits[d][0].outfit_id===
a){b=d;break}return b};TheTakeMetaOverlay.getOutfitIdFromBubbles=function(a){if(!showFavorites)return-1;var b=[];jQuery(".ttBubble[data-actor\x3d'"+a.characterName+"'] a[data-id]").each(function(a){b.push(parseInt(jQuery(this).attr("data-id"),10))});a=outfits.slice(0);for(var d=0;d<b.length;d++)for(var c=0;c<a.length;c++){for(var e=!1,f=0;f<a[c].length;f++)if(a[c][f].product_id===b[d]){e=!0;break}e||(a[c]=[])}for(d=0;d<a.length;d++)0===a[d].length&&(a.splice(d,1),d--);return 0<a.length?a[0][0].outfit_id:
-1};TheTakeMetaOverlay.addProductFavorite=function(a,b,d){if(showFavorites){var c=jQuery;a=parseInt(a,10);b=parseInt(b,10);var e=TheTakeMetaOverlay.getOutfitStackingOrder(a);if(0>e||0>a||0>b)console.warn("TT: addProductFavorite - invalid input");else{if(!d){try{var f=window.localStorage.getItem("ttFavorites");TheTakeMetaOverlay.favoriteOutfitProducts=void 0==f?{}:JSON.parse(f)}catch(h){TheTakeMetaOverlay.favoriteOutfitProducts={},console.warn("TT: exception - addProductFavorite - get",h)}try{if("undefined"===
typeof TheTakeMetaOverlay.favoriteOutfitProducts[a])TheTakeMetaOverlay.favoriteOutfitProducts[a]=[];else if("undefined"!==typeof TheTakeMetaOverlay.favoriteOutfitProducts[a][b])return;TheTakeMetaOverlay.favoriteOutfitProducts[a].push(b);window.localStorage.setItem("ttFavorites",JSON.stringify(TheTakeMetaOverlay.favoriteOutfitProducts))}catch(k){console.warn("TT: exception - addProductFavorite - store",k)}}0>c.inArray(b,TheTakeMetaOverlay.favoriteProducts)&&TheTakeMetaOverlay.favoriteProducts.push(b);
a=c(".outfit[data-id\x3d'"+e+"'] .product-thumb-container[data-id\x3d'"+b+"']").clone();a.css({height:"",width:""}).children(".product").css({height:"",width:""});a.children("svg").click(function(a){a.stopPropagation();a=parseInt(c(this).parent().attr("data-outfit-id"),10);a=outfits[a][0].outfit_id;var b=parseInt(c(this).parent().attr("data-id"),10);TheTakeMetaOverlay.removeProductFavorite(a,b,!1);recordFavorite("remove favorite",products[b],{location:"tiles favorites"})});a.addClass("favorite").attr("data-outfit-id",
e).click(function(){var a=parseInt(c(this).attr("data-outfit-id"),10),b=parseInt(c(this).attr("data-id"),10),d=parseInt(c("#tile-container .outfit[data-id\x3d'"+a+"'] .product-thumb-container[data-id\x3d'"+b+"']").index(),10);c(this).siblings(".showMore").length&&c(this).siblings(".showMore").index()<d&&d--;b=outfits[a][d];showFsOutfits&&0<c("#ttFsOutfits .multipleOutfits").length||(ttPauseVideo(),c("#tilesExpand").click());recordModalInteraction("overlay open - click favorite product",b,{to_index:d,
outfit_index:a});c(".outfit .outfit-crop-container").css("z-index","");450<c(this).position().top?(c("#outfitProductModal").css("top",c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top+"px"),c("a.outfit-modal-close").css("top",c(window).scrollTop()+(c(window).height()-c("#outfitProductModal").height())/2-c("#tile-container").offset().top-5+"px")):(c("#outfitProductModal").css("top",c("#favoriteOutfits \x3e .products").offset().top+1-c("#outfitProductModal").closest(".multipleOutfits").offset().top+
"px"),c("a.outfit-modal-close").css("top",c("#favoriteOutfits \x3e .products").offset().top-c("#outfitProductModal").closest(".multipleOutfits").offset().top-4+"px"));c("#outfitProductModal").attr("data-id",b.product_id);c("#outfitProductModal").attr("data-outfit-id",a);ttLoadOutfitModalContent(a,b);c("#outfitProductModal").attr("data-favtile",!0);c("#outfitProductModal .outfitList").empty();for(d=0;d<outfits[a].length;d++)c("#outfitProductModal .outfitList").append("\x3cdiv"+(TheTakeMetaOverlay.isProductFavorite(outfits[a][d].product_id,
a)?' class\x3d"favorite"':"")+'\x3e\x3cimg class\x3d"outfit-product'+(outfits[a][d].product_id===b.product_id?" selected":"")+'" data-id\x3d"'+outfits[a][d].product_id+'" src\x3d"'+outfits[a][d].productImageLarge+'"\x3e'+getFavoriteSvg()+"\x3c/div\x3e");c("#outfitProductModal .outfitList .outfit-product").click(function(){c(this).hasClass("selected")||(recordModalInteraction("overlay open - favorite outfit thumbnail",outfits[a][c(this).parent().index()],{from_index:c(".outfit-product.selected").index(),
to_index:c(this).parent().index(),outfit_index:a}),ttLoadOutfitModalContent(c("#outfitProductModal").attr("data-outfit-id"),outfits[a][c(this).parent().index()]))});c("#outfitGreyBackground").fadeIn();c("#at4-share").css("z-index","1");c("#outfitProductModal,.outfit-modal-close").addClass("modal-visible")});c("#favoriteOutfits \x3e .products").append(a);c(".ttBubble a[data-id\x3d'"+b+"']").parent().addClass("favorite");c("#outfitProductModal[data-id\x3d'"+b+"'][data-outfit-id\x3d'"+e+"']").addClass("favorite");
c("#outfitProductModal[data-outfit-id\x3d'"+e+"'] .outfitList .outfit-product[data-id\x3d'"+b+"']").parent().addClass("favorite");c(".outfit[data-id\x3d'"+e+"'] .product-thumb-container[data-id\x3d'"+b+"']").addClass("favorite");c("#ttAllOutfitsBtn .ttFavorite").show();d||(c("#ttAllOutfitsBtn .ttFavorite").animate({width:"+\x3d4",top:"-\x3d2",height:"+\x3d3",right:"-\x3d2"},200).animate({width:"-\x3d4",top:"+\x3d2",height:"-\x3d3",right:"+\x3d2"},200),(c(playerRoot).hasClass("tt-wrapper-fullscreen")||
c(playerRoot).hasClass("ttPseudoFs"))&&c("#ttAllOutfitsIncrement").css({display:"block"}).animate({opacity:1,"font-size":"21px",top:"-\x3d17",left:"+\x3d5"},500).animate({left:"+\x3d9",opacity:0},600,function(){c(this).css({display:"",left:"",opacity:"","font-size":"",top:""})}));b=c("#favoriteOutfits \x3e .products .product-thumb-container").length;c("#ttAllOutfitsBtn .count").text(0<b?9<b?"9+":b:"");0<TheTakeMetaOverlay.favoriteProducts.length?c("#favoriteOutfits,#tile-container \x3e h2").css({display:"block"}):
c("#favoriteOutfits,#tile-container \x3e h2").css({display:"none"});c(".outfit-crop-container").css({"z-index":""});return!0}}};TheTakeMetaOverlay.removeProductFavorite=function(a,b){if(showFavorites){var d=jQuery;a=parseInt(a,10);b=parseInt(b,10);var c=TheTakeMetaOverlay.getOutfitStackingOrder(a);try{var e=window.localStorage.getItem("ttFavorites");TheTakeMetaOverlay.favoriteOutfitProducts=JSON.parse(e)}catch(f){console.warn("TT: exception - removeProductFavorite - get",f)}try{for(e=0;e<TheTakeMetaOverlay.favoriteOutfitProducts[a].length;e++)if(TheTakeMetaOverlay.favoriteOutfitProducts[a][e]===
b){TheTakeMetaOverlay.favoriteOutfitProducts[a].splice(e,1);1>TheTakeMetaOverlay.favoriteOutfitProducts[a].length&&delete TheTakeMetaOverlay.favoriteOutfitProducts[a];break}window.localStorage.setItem("ttFavorites",JSON.stringify(TheTakeMetaOverlay.favoriteOutfitProducts))}catch(h){console.warn("TT: exception - removeProductFavorite - delete",h)}var e=!1,k;for(k in TheTakeMetaOverlay.favoriteOutfitProducts)if(TheTakeMetaOverlay.favoriteOutfitProducts.hasOwnProperty(k)&&!(0>TheTakeMetaOverlay.getOutfitStackingOrder(k))){for(var g=
0;g<TheTakeMetaOverlay.favoriteOutfitProducts[k].length;g++)if(TheTakeMetaOverlay.favoriteOutfitProducts[k][g].product_id===b){e=!0;break}if(e)break}if(!e)for(g=0;g<TheTakeMetaOverlay.favoriteProducts.length;g++)if(TheTakeMetaOverlay.favoriteProducts[g]===b){TheTakeMetaOverlay.favoriteProducts.splice(g,1);break}k=d("#favoriteOutfits \x3e .products .product-thumb-container").length-1;d("#favoriteOutfits \x3e .products .product-thumb-container[data-id\x3d'"+b+"'][data-outfit-id\x3d'"+c+"'],#favoriteOutfits \x3e .products .product-thumb-container[data-id\x3d'"+
b+"'][data-outfit-id\x3d'"+c+"'] .more-info-btn,#favoriteOutfits \x3e .products .product-thumb-container[data-id\x3d'"+b+"'][data-outfit-id\x3d'"+c+"'] .product").animate({opacity:0,width:0},150,function(){d(this).remove()});d(".ttBubble a[data-id\x3d'"+b+"']").parent().removeClass("favorite");d("#outfitProductModal[data-id\x3d'"+b+"'][data-outfit-id\x3d'"+c+"']").removeClass("favorite");d("#outfitProductModal[data-outfit-id\x3d'"+c+"'] .outfitList .outfit-product[data-id\x3d'"+b+"']").parent().removeClass("favorite");
d(".outfit[data-id\x3d'"+c+"'] .product-thumb-container[data-id\x3d'"+b+"']").removeClass("favorite");d("#ttAllOutfitsIncrement").stop().animate({opacity:0},100,function(){d(this).css({display:"",left:"",opacity:"","font-size":"",top:""})});0<k?d("#ttAllOutfitsBtn .count").text(9<k?"9+":k):(d("#ttAllOutfitsBtn .ttFavorite").hide(),d("#ttAllOutfitsBtn .count").text(""));0<k?d("#favoriteOutfits,#tile-container \x3e h2").css({display:"block"}):d("#favoriteOutfits,#tile-container \x3e h2").animate({opacity:0,
height:0},150,function(){d(this).css({display:"none",opacity:"",height:""})});d(".outfit-crop-container").css({"z-index":""});return!0}};TheTakeMetaOverlay.isProductFavorite=function(a,b){if(!showFavorites)return!1;var d=jQuery;a=parseInt(a,10);if("undefined"===typeof b||isNaN(b)||0>b)return 0<=d.inArray(a,TheTakeMetaOverlay.favoriteProducts);if("undefined"===typeof TheTakeMetaOverlay.favoriteOutfitProducts[outfits[b][0].outfit_id])return!1;for(d=0;d<TheTakeMetaOverlay.favoriteOutfitProducts[outfits[b][0].outfit_id].length;d++)if(TheTakeMetaOverlay.favoriteOutfitProducts[outfits[b][0].outfit_id][d]===
a)return!0;return!1};var bubbleHeight=70,unexpandedBubbleHeight=5,bubbleSpacing=10,dividerExtraSpacing=30;0<ttUserGroupId&&(bubbleHeight=65,bubbleSpacing=5);var bamNeedToClearProductsAfterIntro=!1,shrinkBubblesTimer=void 0,hideBubblesTimer=void 0,bubblesHidden=!0,hideControlsTimer=void 0,controlsHidden=!1;jQuery(window).resize(function(){var a=jQuery;null==scrollbarWidth&&(scrollbarWidth=getScrollBarWidth());a(this).width()});var mostRecentModalProduct=null;TheTakeMetaOverlay.util.getCookie=function(a){for(var b=
a+"\x3d",d=document.cookie.split(";"),c=0;c<d.length;c++){for(var e=d[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b)){if(navigator.cookieEnabled)return e.substring(b.length,e.length);TheTakeMetaOverlay.util.setCookie(a,-1,!1,0);break}}return-1};TheTakeMetaOverlay.util.isCookieSessionOnly=function(a){for(var b=a+"\x3d",d=document.cookie.split(";"),c=0;c<d.length;c++){for(var e=d[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return d.length>c+1?0>d[c+1].indexOf("expires\x3d"):
!0}throw a;};TheTakeMetaOverlay.util.setCookie=function(a,b,d,c){if(navigator.cookieEnabled){var e="";"undefined"!==typeof d&&d||("undefined"===typeof c&&1825===c,d=new Date,d.setTime(d.getTime()+864E5*c),e="; expires\x3d"+d.toGMTString());document.cookie=a+"\x3d"+b+e+"; path\x3d/"}};TheTakeMetaOverlay.util.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};window.addEventListener("orientationchange",
function(a){probablyMobile&&"undefined"!=typeof ttMobilePlayer&&null!=ttMobilePlayer&&"function"==typeof updateControlDisplay&&updateControlDisplay()});window.addEventListener("pagehide",function(a){!TheTakeMetaOverlay.isAd&&temporaryPause&&(temporaryPause=!1)});var ttPreviousWidth=0;setInterval(function(){var a=jQuery;!window.document.hasFocus()&&document.hidden&&!TheTakeMetaOverlay.isAd&&temporaryPause&&(temporaryPause=!1);ttPreviousWidth!=a("#ttVideoPlayer").width()&&probablyMobile&&"undefined"!=
typeof ttMobilePlayer&&null!=ttMobilePlayer&&"function"==typeof updateControlDisplay&&updateControlDisplay();ttPreviousWidth=a("#ttVideoPlayer").width()},250);jQuery.fn.fixWidth=function(){var a=jQuery;a(this).each(function(){for(var b=a(this),d=function(c){var d=new a("\x3cspan /\x3e");" "==c?d.html("\x26nbsp;"):d.text(c);b.append(d);var e=d.width();console.log(c+" length: "+e);d.remove();return e},c=b.text().replace("-"," ").split(" "),e=d(" "),f=0,h=b.width(),k=0,g=0;g<c.length;g++)if(""!=c[g]){var m=
d(c[g]);f+(0==g?0:e)+m>h?f>k&&(k=f,f=0):f+=(0==g?0:e)+m}0!=k&&(console.log("[TT] adjust width: "+k),b.css({width:k+"px"}))})};TheTakeMetaOverlay.localizedPrice=function(a){return a}};