/* Copyright (c) 2016 comScore, Inc.
 * All rights reserved.
 * By using this software, you are agreeing to be bound by the
 * terms of these policies: http://www.comscore.com/About_comScore/Privacy_Policy
 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b=b||{};b.indexOf=function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},b.forEach=function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;f<g;f++)b.call(c,a[f],f)}catch(h){}};var b=b||{};b.parseBoolean=function(a,b){return b=b||!1,a?"0"!=a:b},b.parseInteger=function(a,b){return null==a||isNaN(a)?b||0:parseInt(a)},b.parseLong=function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},b.toString=function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if(a instanceof Array)return a.join(",");var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b||a.toString()};var b=b||{};b.filter=function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},b.extend=function(a){var b,c=arguments.length;a=a||{};for(var d=1;d<c;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a};var b=b||{};b.cloneObject=function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document||"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;d<c;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)};var b=b||{};b.getNamespace=function(){return a.ns_||a},b.uid=function(){var a=1;return function(){return+new Date+"_"+a++}}(),b.isEmpty=function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},b.isNotEmpty=function(a){return!this.isEmpty(a)},b.safeGet=function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},b.isTrue=function(a){return"undefined"!=typeof a&&("string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a)},b.regionMatches=function(a,b,c,d,e){if(b<0||d<0||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},b.exists=function(a){return"undefined"!=typeof a&&null!=a};var b=b||{};b.hasPageVisibilityAPISupport=function(){if("undefined"==typeof document)return!1;var a=!1;return"undefined"!=typeof document.hidden?a=!0:"undefined"!=typeof document.mozHidden?a=!0:"undefined"!=typeof document.msHidden?a=!0:"undefined"!=typeof document.webkitHidden&&(a=!0),function(){return a}}(),b.getPageVisibilityAPI=function(){if("undefined"==typeof document)return null;var a,b,c;"undefined"!=typeof document.hidden?(a="hidden",b="visibilitychange",c="visibilityState"):"undefined"!=typeof document.mozHidden?(a="mozHidden",b="mozvisibilitychange",c="mozVisibilityState"):"undefined"!=typeof document.msHidden?(a="msHidden",b="msvisibilitychange",c="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(a="webkitHidden",b="webkitvisibilitychange",c="webkitVisibilityState");var d={hidden:a,visibilityChange:b,state:c};return function(){return d}}(),b.isTabInBackground=function(){if("undefined"==typeof document)return null;var a=b.getPageVisibilityAPI();return function(){return document[a.hidden]}}(),b.getBrowserName=function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return(b=c.indexOf("Opera"))!=-1||(b=c.indexOf("OPR/"))!=-1?d="Opera":(b=c.indexOf("Android"))!=-1?d="Android":(b=c.indexOf("Chrome"))!=-1?d="Chrome":(b=c.indexOf("Safari"))!=-1?d="Safari":(b=c.indexOf("Firefox"))!=-1?d="Firefox":(b=c.indexOf("IEMobile"))!=-1?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},b.getBrowserFullVersion=function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return(b=e.indexOf("Opera"))!=-1?(g=e.substring(b+6),(b=e.indexOf("Version"))!=-1&&(g=e.substring(b+8))):(b=e.indexOf("OPR/"))!=-1?g=e.substring(b+4):(b=e.indexOf("Android"))!=-1?g=e.substring(b+11):(b=e.indexOf("Chrome"))!=-1?g=e.substring(b+7):(b=e.indexOf("Safari"))!=-1?(g=e.substring(b+7),(b=e.indexOf("Version"))!=-1&&(g=e.substring(b+8))):(b=e.indexOf("Firefox"))!=-1?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),(c=g.indexOf(";"))!=-1&&(g=g.substring(0,c)),(c=g.indexOf(" "))!=-1&&(g=g.substring(0,c)),(c=g.indexOf(")"))!=-1&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},b.browserAcceptsLargeURLs=function(){return"undefined"==typeof window||(null!==window.ActiveXObject,!0)},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document};var c=function(){var a=1e4;return function(b,c){function d(a){a=a||[];var c=[h,+new Date];return b&&c.push(b),a=Array.prototype.slice.call(a),c=c.concat(a)}function e(a){var b,d,e;if("boolean"==typeof c||!c)return!!c;if(e=a.join(" "),c instanceof Array&&c.length>0){for(b=0;b<c.length;++b)if(d=c[b],d instanceof RegExp&&d.test(e))return!0;return!1}if("object"==typeof c){var f=!1;if(c.hide instanceof Array)for(b=0;b<c.hide.length;++b)if(d=c.hide[b],d instanceof RegExp&&d.test(e)){f=!0;break}if(c.show instanceof Array)for(b=0;b<c.show.length;++b)if(d=c.show[b],d instanceof RegExp&&d.test(e))return!0;return!f&&!c.show}return!0}function f(b){var d=i.length;(d>a||c&&c.max&&d>c.max)&&(i=i.slice(-Math.floor(c.max/2)),i.push("Previous logs: "+d)),i.push(b)}var g=this,h="comScore",i=[];g.log=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.log&&e(a)&&console.log.apply(console,a)},g.warn=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.warn&&e(a)&&console.warn.apply(console,a)},g.error=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.error&&e(a)&&console.error.apply(console,a)},g.apiCall=function(a){for(var b=["API call to:",a],c=1;c<arguments.length;++c)b.push("arg"+c+":",arguments[c]);this.log.apply(this,b)},g.infoLog=function(){var a=["Trace log:"];a.push.apply(a,Array.prototype.slice.call(arguments)),this.log.apply(this,a)},g.deprecation=function(a,b){var c=["Deprecated API:",a,"is deprecated and will be eventually removed."];b&&c.push("Use",b,"instead."),this.warn.apply(this,c)},g.getLogHistory=function(){return i}}}();return a.StreamingAnalytics=a.StreamingAnalytics||function(){var d=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),e=function(a,b){if("undefined"==typeof Image)return void("function"==typeof setTimeout?b&&setTimeout(b,0):b&&b());var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a},f=function(a,b,c){"function"==typeof setTimeout?c&&setTimeout(function(){c(200)},0):c&&c(200)},g=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),h=function(){return{PLATFORM:"generic",httpGet:e,httpPost:f,Storage:d,IO:g,onDataFetch:function(a){a()},getCrossPublisherId:function(){return null},getAppName:function(){return i.UNKNOWN_VALUE},getAppVersion:function(){return i.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return i.UNKNOWN_VALUE},getPlatformVersion:function(){return i.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return i.UNKNOWN_VALUE},getRuntimeVersion:function(){return i.UNKNOWN_VALUE},getDisplayResolution:function(){return i.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return i.UNKNOWN_RESOLUTION},getLanguage:function(){return i.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return i.UNKNOWN_VALUE},getConnectionType:function(){return i.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return i.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),i={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=b+"",b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)},b.stateToString=function(a){var b=I.InternalStates;for(var c in b)if(b.hasOwnProperty(c)&&b[c]==a)return c};var j=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),k=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),l=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),m={STREAMINGANALYTICS_VERSION:"6.0.0a",STREAMINGANALYTICS_V5_VERSION:"5.4.0.161011",MODEL_VERSION:"5.6",LOG_NAMESPACE:"STA",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},n=function(){function a(){function a(){f={},f.ns_st_cl="0",f.ns_st_pn="1",f.ns_st_tp="0",f.ns_st_cn="1",f.ns_st_skd="0",f.ns_st_ci="0",f.c3="*null",f.c4="*null",f.c6="*null",f.ns_st_st="*null",f.ns_st_pu="*null",f.ns_st_pr="*null",f.ns_st_ep="*null",f.ns_st_sn="*null",f.ns_st_en="*null",f.ns_st_ct="*null",g={},e=!1,d=!1,c=i.UNKNOWN_VALUE,h=0,j=NaN,o=0,l=0,k=NaN,p=0,q=NaN,s=0,r=0,n=0,v=NaN,t=[],u=[],w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=NaN,E=0,F=0,G=0,H=!1,I=NaN,M=!1,L=0,P=0,J=0,K=0,N=0,O=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,Q=!1}var c,d,e,f,g,h,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$=this,_=m.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return c},setHash:function(a){c=a},setPlaybackIntervalMergeTolerance:function(a){_=a},getPlaybackIntervalMergeTolerance:function(){return _},setInternalLabel:function(a,b){f[a]=b},getInternalLabel:function(a){return f[a]},hasInternalLabel:function(a){return null!=f[a]},setLabels:function(a){a&&b.extend(g,a)},getLabels:function(){return g},setLabel:function(a,b){g[a]=b},getLabel:function(a){return g[a]},hasLabel:function(a){return a in g},getClipNumber:function(){return parseInt($.getInternalLabel("ns_st_cn"))},setClipNumber:function(a){$.setInternalLabel("ns_st_cn",a+"")},getPartNumber:function(){return $.hasLabel("ns_st_pn")?parseInt($.getLabel("ns_st_pn")):parseInt($.getInternalLabel("ns_st_pn"))},createLabels:function(a,c){var d=a||{},h=b.isEmpty(d.ns_st_pt)?$.getPlaybackTime():parseInt(d.ns_st_pt);d.ns_st_pt=h+(isNaN(j)?0:c-j)+"",d.ns_st_dpt=h+(isNaN(j)?0:c-j)-l+"",d.ns_st_ipt=h+(isNaN(j)?0:c-j)-n+"";var i=b.isEmpty(d.ns_st_et)?$.getElapsedTime():parseInt(d.ns_st_et);d.ns_st_et=i+(isNaN(q)?0:c-q)+"",d.ns_st_det=i+(isNaN(q)?0:c-q)-r+"";var k=b.isEmpty(d.ns_st_bt)?$.getBufferingTime():parseInt(d.ns_st_bt);d.ns_st_bt=k+"",d.ns_st_dbt=k+(isNaN(D)?0:c-D)-E+"";for(var m,o=parseInt(d.ns_st_po),p=b.addNewPlaybackInterval(b.cloneObject($.getSegmentPlaybackIntervals()),v,o,_),s=b.addNewPlaybackInterval(b.cloneObject($.getAssetPlaybackIntervals()),v,o,_),t=0,u=0,C=0;C<p.length;C++)m=Math.abs(p[C].end-p[C].start),t+=m,m>u&&(u=m);var F=0,H=0;for(C=0,m;C<s.length;C++)m=Math.abs(s[C].end-s[C].start),F+=m,m>H&&(H=m);d.ns_st_upc=t+"",d.ns_st_dupc=t-w+"",d.ns_st_iupc=t-x+"",t>x?d.ns_st_iupc=t-x+"":d.ns_st_iupc="0",d.ns_st_lpc=u+"",d.ns_st_dlpc=u-y+"",d.ns_st_upa=F+"",d.ns_st_dupa=F-z+"",F>A?d.ns_st_iupa=F-A+"":d.ns_st_iupa="0",d.ns_st_lpa=H+"",d.ns_st_dlpa=H-B+"";var I=b.isEmpty(d.ns_st_pc)?$.getPauses():parseInt(d.ns_st_pc);d.ns_st_pc=I+"",d.ns_st_dpc=I-S+"";var J=b.isEmpty(d.ns_st_skc)?$.getSeeks():parseInt(d.ns_st_skc);d.ns_st_skc=J+"",d.ns_st_dskc=J-U+"";var L=b.isEmpty(d.ns_st_bc)?$.getBuffers():parseInt(d.ns_st_bc);d.ns_st_bc=L+"",d.ns_st_dbc=L-G+"";var M=b.isEmpty(d.ns_st_skt)?$.getSeekingTime():parseInt(d.ns_st_skt);d.ns_st_skt=M+"",d.ns_st_dskt=M-K+"";var N=b.isEmpty(d.ns_st_ska)?$.getSeekingAmount():parseInt(d.ns_st_ska);return d.ns_st_ska=N+"",d.ns_st_dska=N-O+"",e&&(d.ns_st_spc=V+"",d.ns_st_apc=W+"",d.ns_st_sq=X+"",d.ns_st_asq=Y+""),e||0!=Z?d.ns_st_sc=Z+"":d.ns_st_sc="1",b.extend(d,f,g),d},updateDeltaLabels:function(a){l=parseInt(a.ns_st_pt),r=parseInt(a.ns_st_et),E=parseInt(a.ns_st_bt),w=parseInt(a.ns_st_upc),y=parseInt(a.ns_st_lpc),z=parseInt(a.ns_st_upa),B=parseInt(a.ns_st_lpa),S=parseInt(a.ns_st_pc),U=parseInt(a.ns_st_skc),G=parseInt(a.ns_st_bc),K=parseInt(a.ns_st_skt),O=parseInt(a.ns_st_ska),$.setSeekingDirection(0)},updateIndependentLabels:function(a){n=parseInt(a.ns_st_pt),x=parseInt(a.ns_st_upc),A=parseInt(a.ns_st_upa)},getVideoTrack:function(){return $.getInternalLabel("ns_st_vt")},setVideoTrack:function(a){$.setInternalLabel("ns_st_vt",a+"")},getAudioTrack:function(){return $.getInternalLabel("ns_st_at")},setAudioTrack:function(a){$.setInternalLabel("ns_st_at",a+"")},getSubtitleTrack:function(){return $.getInternalLabel("ns_st_tt")},setSubtitleTrack:function(a){$.setInternalLabel("ns_st_tt",a+"")},getCDN:function(){return $.getInternalLabel("ns_st_cdn")},setCDN:function(a){$.setInternalLabel("ns_st_cdn",a+"")},getSegmentPlaybackIntervals:function(){return t},setAssetPlaybackIntervals:function(a){t=a},getAssetPlaybackIntervals:function(){return u},incrementPauses:function(){R++},incrementSeeks:function(){T++},incrementPlayCounter:function(){X++},getPlayCounter:function(){return X},getBufferingTime:function(){return C},setBufferingTime:function(a){C=a},addBufferingTime:function(a){if(!isNaN(D)){var b=$.getBufferingTime();b+=a-D,$.setBufferingTime(b),D=NaN}},setPlaybackStartPosition:function(a){v=parseInt(a)},getPlaybackStartPosition:function(){return v},addInterval:function(a){isNaN(v)||isNaN(a)||(t=b.addNewPlaybackInterval(t,v,a,_),u=b.addNewPlaybackInterval(u,v,a,_),v=NaN)},getElapsedTime:function(){return p},setElapsedTime:function(a){p=a},addElapsedTime:function(a){if(!isNaN(q)){var b=$.getElapsedTime();b+=a-q,$.setElapsedTime(b),q=NaN}},getElapsedTimestamp:function(){return q},setElapsedTimestamp:function(a){q=a},addPlaybackTime:function(a){if(!isNaN(j)){var b=$.getPlaybackTime();b+=a-j,$.setPlaybackTime(b),j=NaN}},getPlaybackTime:function(){return h},getExpectedPlaybackPosition:function(a){return isNaN(j)?o:o+(a-j)},setPlaybackTimeOffset:function(a){o=a},getPlaybackTimeOffset:function(){return o},setPlaybackTime:function(a){h=a},getPlaybackTimestamp:function(){return j},setPlaybackTimestamp:function(a){j=a},setPreviousPlaybackTime:function(a){l=a},setPreviousPlaybackTimestamp:function(a){k=a},getBufferingTimestamp:function(){return D},setBufferingTimestamp:function(a){D=a},getPauses:function(){return R},setPauses:function(a){R=a},getSeeks:function(){return T},setSeeks:function(a){T=a},setSeeking:function(a){H=a},isSeeking:function(){return H},setCollectingSeekingTime:function(a){M=a},isCollectingSeekingTime:function(){return M},setAssetStarted:function(a){d=a},isAssetStarted:function(){return d},setPlaybackStarted:function(a){e=a},isPlaybackStarted:function(){return e},setSeekingTimestamp:function(a){I=a},getSeekingTimestamp:function(){return I},addSeekingTime:function(a){if(!isNaN(I)){var b=$.getSeekingTime();b+=a-I,$.setSeekingTime(b),I=NaN}},getSeekingTime:function(){return J},setSeekingTime:function(a){J=a},setSeekingTimeBeforeEnd:function(a){P=a},getSeekingTimeBeforeEnd:function(){return P},setSeekStartPosition:function(a){L=a},getSeekStartPosition:function(){return L},setSeekingAmount:function(a){N=a},getSeekingAmount:function(){return N},addSeekingAmount:function(a){var b=$.getSeekingAmount();b+=Math.abs(a-L),$.setSeekingAmount(b);var c;L==a?c=0:L>a?c=-1:L<a&&(c=1),$.setSeekingDirection(c),L=0},getSeekingDirection:function(){return parseInt($.getInternalLabel("ns_st_skd"))},setSeekingDirection:function(a){$.setInternalLabel("ns_st_skd",a+"")},resetAssetLifecycleLabels:function(){h=0,l=0,n=0,C=0,E=0,F=0,G=0,R=0,S=0,X=0,u=[],z=0,A=0,B=0,p=0,r=0,J=0,K=0,N=0,O=0,T=0,U=0},incrementSegmentPlaybackCounter:function(){V++},incrementAssetLoadCounter:function(){Z++},incrementAssetPlaybackCounter:function(){W++},getPreviousUniquePlaybackInterval:function(){return w},setPreviousUniquePlaybackInterval:function(a){w=a},getPreviousEventIndependentUniquePlaybackInterval:function(){return x},setPreviousEventIndependentUniquePlaybackInterval:function(a){x=a},setPreviousLongestPlaybackInterval:function(a){y=a},getPreviousLongestPlaybackInterval:function(){return y},resetAssetPlaybackIntervals:function(){u=[],z=0,A=0,B=0},setSegmentPlaybackCounter:function(a){V=a},setAssetLoadCounter:function(a){Z=a},setAssetPlaybackCounter:function(a){W=a},setLowestPartNumberPlayed:function(a){s=a},getSegmentPlaybackCounter:function(){return V},getAssetLoadCounter:function(){return Z},getAssetPlaybackCounter:function(){return W},getLowestPartNumberPlayed:function(){return s},getBuffers:function(){return F},incrementBufferCount:function(){F++},getPreviousBufferingTime:function(){return E},setPlaySequenceCounter:function(a){Y=a},incrementPlaySequenceCounter:function(){Y++},getPlaySequenceCounter:function(){return Y},isPlaybackSessionLooping:function(){return Q},setPlaybackSessionLooping:function(a){Q=a}}),a()}return a.resetAsset=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),o=function(){function a(a){function c(){d=new n,h={},h.ns_st_id=+new Date+"",i={},e=NaN,f=0,g=NaN,o={},p=0,l=!1,q=!1,r=0,t=0,s=0,u=1,v=0}var d,e,f,g,h,i,l,o,p,q,r,s,t,u,v,w=this;b.extend(this,{resetAsset:function(){var a=d;d=new n,n.resetAsset(a,d)},hashExists:function(a){return null!=o[a]},storeHash:function(a){o[a]={}},removeHash:function(a){delete o[a]},storeAssetPlaybackCounters:function(){for(var a in o)if(o.hasOwnProperty(a)&&o[a].clipNumber===d.getClipNumber()){b.extend(o[a],{segmentPlaybackCounter:d.getSegmentPlaybackCounter(),assetLoadCounter:d.getAssetLoadCounter(),assetPlaybackCounter:d.getAssetPlaybackCounter(),lowestPartNumberPlayed:d.getLowestPartNumberPlayed(),seeking:d.isSeeking(),seekingTimeBeforeEnd:d.getSeekingTimeBeforeEnd(),seekingStartPosition:d.getSeekStartPosition(),segmentPlaybackIntervals:d.getSegmentPlaybackIntervals(),videoTrack:d.getVideoTrack(),audioTrack:d.getAudioTrack(),subtitleTrack:d.getSubtitleTrack(),cdn:d.getCDN(),playSequenceCounter:d.getPlaySequenceCounter(),previousUniquePlaybackInterval:d.getPreviousUniquePlaybackInterval(),previousEventIndependentUniquePlaybackInterval:d.getPreviousEventIndependentUniquePlaybackInterval(),previousLongestPlaybackInterval:d.getPreviousLongestPlaybackInterval()});break}},getStoredAssetRegisters:function(a){return o[a]},getClipNumber:function(a){return o[a].clipNumber},getMaxClipNumber:function(){return p},storeClipNumber:function(a,b){o[a].clipNumber=b,b>p&&(p=b)},setLabels:function(a){null!=a&&b.extend(i,a)},getLabels:function(){return i},setLabel:function(a,b){var c={};c[a]=b,w.setLabels(c)},getLabel:function(a){return i[a]},getAsset:function(){return d},createLabels:function(a,c){var e=a||{},f=b.isEmpty(e.ns_st_pa)?w.getPlaybackTime():parseInt(e.ns_st_pa);return e.ns_st_pa=f+(isNaN(g)?0:c-g)+"",e.ns_st_pp=t+"",e.ns_st_sp=u+"",e.ns_st_bp=v+"",q||(e.ns_st_pb=null!=e.ns_st_pb?e.ns_st_pb:"1"),d.isPlaybackStarted()&&(e.ns_st_ppc=r+"",e.ns_st_psq=s+""),b.extend(e,h,i),e},incrementPlayCounter:function(){u++},incrementPauses:function(){t++},addPlaybackTime:function(a){if(!isNaN(g)){var b=w.getPlaybackTime();b+=a-g,w.setPlaybackTime(b),g=NaN}},addBufferingTime:function(a){if(!isNaN(e)){var b=w.getBufferingTime();b+=a-e,w.setBufferingTime(b),e=NaN}},getBufferingTime:function(){return v},setBufferingTime:function(a){v=a},getPlaybackTime:function(){return f},setBufferingTimestamp:function(a){e=a},getBufferingTimestamp:function(){return e},setPlaybackTime:function(a){f=a},setPlaybackTimestamp:function(a){g=a},getPlaybackTimestamp:function(){return g},getPauses:function(){return t},setPauses:function(a){t=a},isPlaybackSessionStarted:function(){return l},setPlaybackSessionStarted:function(a){l=a},getPlaybackCounter:function(){return r},incrementPlaybackCounter:function(){r++},setFirstEventSent:function(a){q=a},setPlaySequenceCounter:function(a){s=a},incrementPlaySequenceCounter:function(){s++},getPlaybackSessionID:function(){return h.ns_st_id},setAsset:function(c,d){a.getLogging().apiCall("setAsset",c,d),c=b.jsonObjectToStringDictionary(c);var e=a.getStateMachine().getCurrentState();if(e!=k.IDLE){a.getLogging().infoLog("Ending the current Clip. It was in state:",b.stateToString(e));var f={};a.getStaCore().newEvent(j.END,b.fixEventTime(f),f)}var g="",h=0;if(null!=c.ns_st_cn)g=c.ns_st_cn;else for(var i=0;i<m.STANDARD_METADATA_LABELS.length;i++)c[m.STANDARD_METADATA_LABELS[i]]&&(g+=m.STANDARD_METADATA_LABELS[i]+":"+c[m.STANDARD_METADATA_LABELS[i]]+";");var l=w,n=l.getAsset();n.isAssetStarted()?(l.hashExists(n.getHash())||(l.storeHash(n.getHash()),l.storeClipNumber(n.getHash(),n.getClipNumber())),l.storeAssetPlaybackCounters(),h=l.hashExists(g)?l.getClipNumber(g):b.exists(c.ns_st_cn)?parseInt(c.ns_st_cn):l.getMaxClipNumber()+1):h=l.hashExists(g)?l.getClipNumber(g):n.getClipNumber(),l.resetAsset(),n=l.getAsset(),n.setHash(g),n.setClipNumber(h),n.setLabels(c);var o=l.getStoredAssetRegisters(g);o&&(n.setAssetStarted(!0),n.setSegmentPlaybackCounter(o.segmentPlaybackCounter),n.setAssetLoadCounter(o.assetLoadCounter),n.setAssetPlaybackCounter(o.assetPlaybackCounter),n.setLowestPartNumberPlayed(o.lowestPartNumberPlayed),n.setSeeking(o.seeking),n.setSeekingTimeBeforeEnd(o.seekingTimeBeforeEnd),n.setSeekStartPosition(o.seekingStartPosition),n.setAssetPlaybackIntervals(o.segmentPlaybackIntervals),o.videoTrack&&n.setVideoTrack(o.videoTrack),o.audioTrack&&n.setAudioTrack(o.audioTrack),o.subtitleTrack&&n.setSubtitleTrack(o.subtitleTrack),o.cdn&&n.setCDN(o.cdn),n.setPlaySequenceCounter(o.playSequenceCounter),n.setPreviousUniquePlaybackInterval(o.previousUniquePlaybackInterval),n.setPreviousEventIndependentUniquePlaybackInterval(o.previousEventIndependentUniquePlaybackInterval),n.setPreviousLongestPlaybackInterval(o.previousLongestPlaybackInterval)),n.incrementAssetLoadCounter(),n.isAssetStarted()&&d&&l.incrementPlayCounter(),d&&(l.setPlaySequenceCounter(0),n.setPlaybackSessionLooping(!0)),!b.exists(c.ns_st_tp)&&b.exists(c.ns_st_ad)&&b.isNotEmpty(c.ns_st_ad)&&"0"!==c.ns_st_ad&&n.setInternalLabel("ns_st_tp","1")}}),c(),function(a){var b=a;b.getClip=function(){return b._log.deprecation("playlist.getClip()","playbackSession.getAsset()"),b.getAsset()}}(w)}return a.resetPlaybackSession=function(a,b,c){for(var d=b.getAsset(),e=b.getLabels(),f={},g=0;c&&g<c.length;g++)e.hasOwnProperty(c[g])&&(f[c[g]]=e[c[g]]);a.getPlaybackSession().setLabels(f),n.resetAsset(d,a.getPlaybackSession().getAsset(),c)},function(a){a.resetPlaybackSession=function(a){return function(b,c,d){var e=this;a.apply(e,Array.prototype.slice.call(arguments)),b.getPlaybackSession()._log=c._log}}(a.resetPlaybackSession)}(a),a}(),p=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getStaCore().getLiveEndpointURL();if(a.getAppCore()){
if(a.getStaCore().isProperlyInitialized()){var e=a.getStaCore().getExports().et;if("function"==typeof a.getAppCore().getMeasurementDispatcher){var g=a.getAppCore().getMeasurementDispatcher();g.send(e.HIDDEN,c,d)}else{var h=a.getStaCore().getExports().am,i=h.newApplicationMeasurement(a.getAppCore(),e.HIDDEN,c,d);a.getAppCore().getQueue().offer(i)}}}else d&&a.getStaCore().getPlatformAPI().httpGet(a.getStaCore().prepareUrl(d,c))}var e,f,g=this,h=[];b.extend(this,{newEvent:function(a){for(var b=0;b<h.length;++b)h[b](a.eventLabels);d(a.eventLabels),a.eventType!=j.HEARTBEAT&&g.incrementEventCounter()},addMeasurementListener:function(a){"function"==typeof a&&h.push(a)},removeMeasurementListener:function(a){for(var b=NaN,c=0;c<h.length;++c)if(h[c]==a){b=c;break}isNaN(b)||h.splice(b,1)},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),q=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=a.getPlaybackSession().getAsset().getExpectedPlaybackPosition(d)+"",c.ns_st_hc=a.getHeartbeat().getCount()+"";var e=a.getStaCore().createLabels(j.HEARTBEAT,c,d);a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),g=0,i.resume()}function e(){null!=f&&(a.getStaCore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,i=this,k=m.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){k=a},getInterval:function(a){var b=0;if(null!=k)for(var c=0;c<k.length;c++){var d=k[c],e=d.playingtime;if(!e||a<e){b=d.interval;break}}return b},getIntervals:function(){return k},resume:function(){e();var b=i.getInterval(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getStaCore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=i.getInterval(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()));g=b-(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()))%b}}),c()}}(),r=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);a.getStaCore().newPseudoEvent(j.KEEPALIVE,d,c),g.start()}function e(){null!=f&&(a.getStaCore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=m.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{start:function(){e(),f=a.getStaCore().getPlatformAPI().setTimeout(d,h)},stop:e,setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),s=function(){return function(a){function c(){f=k.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==k.IDLE){if(a==j.PLAY)return k.PLAYING;if(a==j.SEEK_START)return k.SEEKING_BEFORE_PLAYBACK;if(a==j.BUFFER)return k.BUFFERING_BEFORE_PLAYBACK}else if(f==k.PLAYBACK_NOT_STARTED){if(a==j.PLAY)return k.PLAYING;if(a==j.SEEK_START)return k.SEEKING_BEFORE_PLAYBACK;if(a==j.BUFFER)return k.BUFFERING_BEFORE_PLAYBACK;if(a==j.END||a==j.AD_SKIP)return k.IDLE}else if(f==k.PLAYING){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.BUFFER)return k.BUFFERING_DURING_PLAYBACK;if(a==j.PAUSE)return k.PAUSED;if(a==j.SEEK_START)return k.SEEKING_DURING_PLAYBACK}else if(f==k.PAUSED){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.BUFFER)return k.BUFFERING_DURING_PAUSE;if(a==j.PLAY)return k.PLAYING;if(a==j.SEEK_START)return k.SEEKING_DURING_PAUSE}else if(f==k.BUFFERING_BEFORE_PLAYBACK){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PAUSE||a==j.BUFFER_STOP)return k.PLAYBACK_NOT_STARTED;if(a==j.PLAY)return k.PLAYING;if(a==j.SEEK_START)return k.SEEKING_BEFORE_PLAYBACK}else if(f==k.BUFFERING_DURING_PLAYBACK){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY||a==j.BUFFER_STOP)return k.PLAYING;if(a==j.PAUSE_ON_BUFFERING)return k.PAUSED_DURING_BUFFERING;if(a==j.SEEK_START)return k.SEEKING_DURING_BUFFERING;if(a==j.PAUSE)return k.PAUSED}else if(f==k.BUFFERING_DURING_SEEKING){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY)return k.PLAYING;if(a==j.BUFFER_STOP)return k.SEEKING_DURING_PLAYBACK;if(a==j.PAUSE)return k.PAUSED}else if(f==k.BUFFERING_DURING_PAUSE){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY)return k.PLAYING;if(a==j.SEEK_START)return k.SEEKING_DURING_PAUSE;if(a==j.BUFFER_STOP||a==j.PAUSE)return k.PAUSED}else if(f==k.SEEKING_BEFORE_PLAYBACK){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PAUSE)return k.PLAYBACK_NOT_STARTED;if(a==j.PLAY)return k.PLAYING;if(a==j.BUFFER)return k.BUFFERING_BEFORE_PLAYBACK}else if(f==k.SEEKING_DURING_PLAYBACK){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY)return k.PLAYING;if(a==j.PAUSE)return k.PAUSED;if(a==j.BUFFER)return k.BUFFERING_DURING_SEEKING}else if(f==k.SEEKING_DURING_BUFFERING){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY)return k.PLAYING;if(a==j.PAUSE||a==j.BUFFER_STOP)return k.PAUSED;if(a==j.BUFFER)return k.BUFFERING_DURING_SEEKING}else if(f==k.SEEKING_DURING_PAUSE){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.PLAY)return k.PLAYING;if(a==j.PAUSE||a==j.BUFFER_STOP)return k.PAUSED;if(a==j.BUFFER)return k.BUFFERING_DURING_PAUSE}else if(f==k.PAUSED_DURING_BUFFERING){if(a==j.END||a==j.AD_SKIP)return k.IDLE;if(a==j.SEEK_START)return k.SEEKING_DURING_BUFFERING;if(a==j.PAUSE)return k.PAUSED;if(a==j.PLAY||a==j.BUFFER_STOP)return k.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),t=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStop:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var d=a.getStaCore().createLabels(j.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(d.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(d.eventLabels),a.getEventManager().newEvent(d),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onBufferStop:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b)},onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(j.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onPause:function(b,c){parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var d=a.getStaCore().createLabels(j.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(d.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(d.eventLabels),a.getEventManager().newEvent(d)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start()}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses(),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1));var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().setSeekingTimestamp(b):a.getPlaybackSession().getAsset().incrementSeeks(),
a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().setPlaybackSessionStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(c),a.getPlaybackSession().getAsset().addPlaybackTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c),a.getPlaybackSession().getAsset().addInterval(e);var f=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(f.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(f.eventLabels),a.getEventManager().newEvent(f),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBuffer:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getStaCore().isPauseOnBufferingEnabled()&&a.getStaCore().startPausedOnBufferingTimer(b,c),a.getPlaybackSession().getAsset().incrementBufferCount(),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(j.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(j.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b,c){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses(),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))}})}}(),F=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po);a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(j.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(j.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),G=function(){return function(a){function d(){if(n=new H(ba),b.getNamespace().comScore?(ca=b.getNamespace().comScore.exports,n.setAppCore(ca.c())):n.setAppCore(null),a.publisherId){var d=a.secure?"https://sb":"http"+("undefined"!=typeof document&&"s"==document.location.href.charAt(4)?"s://sb":"://b");ba.setLiveEndpointURL(d+".scorecardresearch.com/p?c1=2"),ba.setLabel("c2",a.publisherId)}n.setKeepAlive(new r(n)),n.setHeartbeat(new q(n)),n.setEventManager(new p(n)),n.setStateMachine(new s),n.setLogging(new c(m.LOG_NAMESPACE,a.debug)),a.liveEndpointURL&&ba.setLiveEndpointURL(a.liveEndpointURL),n.setPlaybackSession(new o(n)),G=new y(n),I=new z(n),J=new B(n),K=new C(n),L=new u(n),M=new w(n),N=new x(n),O=new v(n),P=new A(n),Q=new D(n),R=new E(n),S=new F(n),T=new t(n),U=!1,V=0,W=+new Date,X=!0,Z=!1,_=[]}function e(a){var b=n.getStateMachine().getCurrentState();if(b==k.IDLE||b==k.PLAYBACK_NOT_STARTED||b==k.BUFFERING_BEFORE_PLAYBACK||b==k.SEEKING_BEFORE_PLAYBACK){if(a==j.PLAY)return!0}else if(b==k.PLAYING){if(a==j.END||a==j.AD_SKIP||a==j.SEEK_START||a==j.PAUSE)return!0}else if(b==k.PAUSED||b==k.BUFFERING_DURING_PAUSE||b==k.SEEKING_DURING_PLAYBACK||b==k.SEEKING_DURING_BUFFERING||b==k.SEEKING_DURING_PAUSE){if(a==j.END||a==j.AD_SKIP||a==j.PLAY)return!0}else if(b==k.BUFFERING_DURING_PLAYBACK){if(a==j.PAUSE_ON_BUFFERING||a==j.END||a==j.AD_SKIP||a==j.SEEK_START||a==j.PAUSE||a==j.PLAY)return!0}else if(b==k.BUFFERING_DURING_SEEKING){if(a==j.END||a==j.AD_SKIP||a==j.PAUSE||a==j.PLAY)return!0}else if(b==k.PAUSED_DURING_BUFFERING&&(a==j.END||a==j.AD_SKIP||a==j.BUFFER_STOP||a==j.PLAY))return!0;return!1}function f(a,b,c){var d=n.getStateMachine().getCurrentState();a==j.AD_SKIP&&!c.hasOwnProperty("ns_st_ui")&&e(a)?c.ns_st_ui="skip":a==j.SEEK_START&&!c.hasOwnProperty("ns_st_ui")&&e(a)&&(c.ns_st_ui="seek"),d==k.IDLE?a==j.BUFFER?G.onBuffer(b,c):a==j.SEEK_START?G.onSeekStart(b,c):a==j.PLAY&&G.onPlay(b,c):d==k.PLAYBACK_NOT_STARTED?a==j.END||a==j.AD_SKIP?J.onEndOrAdSkip(b,c):a==j.SEEK_START?J.onSeekStart(b,c):a==j.PLAY?J.onPlay(b,c):a==j.BUFFER&&T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):d==k.PLAYING?a==j.END||a==j.AD_SKIP?K.onEndOrAdSkip(b,c):a==j.BUFFER?K.onBuffer(b,c):a==j.SEEK_START?K.onSeekStart(b,c):a==j.PAUSE&&K.onPause(b,c):d==k.PAUSED?a==j.END||a==j.AD_SKIP?I.onEndOrAdSkip(b,c):a==j.PLAY?I.onPlay(b,c):a==j.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):a==j.SEEK_START&&T.onSeekStartWhenPausedOrBufferingDuringPause(b,c):d==k.BUFFERING_BEFORE_PLAYBACK?a==j.END||a==j.AD_SKIP?L.onEndOrAdSkip(b,c):a==j.BUFFER_STOP?L.onBufferStop(b,c):a==j.SEEK_START?L.onSeekStart(b,c):a==j.PAUSE?L.onPause(b,c):a==j.PLAY&&L.onPlay(b,c):d==k.BUFFERING_DURING_PLAYBACK?a==j.PAUSE_ON_BUFFERING?M.onPauseOnBuffering(b,c):a==j.BUFFER_STOP?M.onBufferStop(b,c):a==j.END||a==j.AD_SKIP?M.onEndOrAdSkip(b,c):a==j.SEEK_START?M.onSeekStart(b,c):a==j.PAUSE?M.onPause(b,c):a==j.PLAY&&M.onPlay(b,c):d==k.BUFFERING_DURING_SEEKING?a==j.END||a==j.AD_SKIP?N.onEndOrAdSkip(b,c):a==j.PAUSE?N.onPause(b,c):a==j.PLAY?N.onPlay(b,c):a==j.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,c):d==k.BUFFERING_DURING_PAUSE?a==j.END||a==j.AD_SKIP?O.onEndAndSkip(b,c):a==j.PAUSE?O.onPause(b,c):a==j.PLAY?O.onPlay(b,c):a==j.SEEK_START?T.onSeekStartWhenPausedOrBufferingDuringPause(b,c):a==j.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,c):d==k.SEEKING_BEFORE_PLAYBACK?a==j.END||a==j.AD_SKIP?Q.onEndOrAdSkip(b,c):a==j.PAUSE?Q.onPause(b,c):a==j.PLAY?Q.onPlay(b,c):a==j.BUFFER&&T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):d==k.SEEKING_DURING_PLAYBACK?a==j.END||a==j.AD_SKIP?S.onEndOrAdSkip(b,c):a==j.PLAY?S.onPlay(b,c):a==j.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):a==j.PAUSE&&T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,c):d==k.SEEKING_DURING_BUFFERING?a==j.PAUSE?R.onPause(b,c):a==j.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):a==j.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==j.END||a==j.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==j.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):d==k.PAUSED_DURING_BUFFERING?a==j.END||a==j.AD_SKIP?P.onEndOrAdSkip(b,c):a==j.BUFFER_STOP?P.onBufferStop(b,c):a==j.SEEK_START?P.onSeekStart(b,c):a==j.PAUSE?P.onPause(b,c):a==j.PLAY&&P.onPlay(b,c):d==k.SEEKING_DURING_PAUSE&&(a==j.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,c):a==j.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==j.PAUSE?T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,c):a==j.END||a==j.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==j.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,c)),e(a)&&n.getPlaybackSession().setFirstEventSent(!0)}function g(a,c){for(var d,e=ga.encodeURIComponent||escape,f=[],g=m.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),l=0,n=k.length;l<n;l++){var o=k[l].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;s<t;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(ha.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(ha.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(ha.referrer):"");var y=b.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var n,G,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba=this,ca={},da=m.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,ea=m.THROTTLING_DELAY,fa={};b.extend(ba,{getConfiguration:function(){return a||{}},createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var f=document;e.c7=f.URL,e.c8=f.title,e.c9=f.referrer}return e.ns_ts=+new Date+"",e.ns_st_ev=j.toString(a),e.ns_st_mp=m.DEFAULT_PLAYERNAME,e.ns_st_mv=m.STREAMINGANALYTICS_VERSION,e.ns_st_ub="0",e.ns_st_br="0",e.ns_st_pn="1",e.ns_st_tp="0",e.ns_st_it=l.toString(l.SINGLE_CLIP),e.ns_st_sv=m.STREAMINGANALYTICS_VERSION,e.ns_st_smv=m.MODEL_VERSION,e.ns_type="hidden",e.ns_st_ec=n.getEventManager().getEventCounter()+"",e.ns_st_po=n.getPlaybackSession().getAsset().getExpectedPlaybackPosition(d)+"",e.ns_st_ki=n.getKeepAlive().getInterval()+"",b.extend(e,ba.getLabels()),n.getPlaybackSession().createLabels(e,d),n.getPlaybackSession().getAsset().createLabels(e,d),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,c,d,e){ba.stopDelayedTransitionTimer();var g=n.getStateMachine().getCurrentState(),h=n.getStateMachine().eventTypeToState(a);if(null==h||h==g)return void n.getLogging().infoLog("Ignored event:",j.toString(a),"during state",b.stateToString(g),d);if(!ba.isThrottlingEnabled()||g!=k.PLAYING&&g!=k.PAUSED||h!=k.PLAYING&&h!=k.PAUSED||e){d.ns_st_po||(n.getStateMachine().getCurrentState()==k.IDLE?d.ns_st_po="0":d.ns_st_po=n.getPlaybackSession().getAsset().getExpectedPlaybackPosition(c)+""),n.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(d.ns_st_po)),f(a,c,d);var i=0;isNaN(n.getStateMachine().getLastStateChangeTimestamp())||(i=c-n.getStateMachine().getLastStateChangeTimestamp()),n.getStateMachine().newEvent(a,c),n.getLogging().log("Transition from",b.stateToString(g),"to",b.stateToString(h),"due to event:",j.toString(a));for(var l=0,m=_.length;l<m;l++)_[l](g,h,d,i)}else{n.getLogging().infoLog("Throttled event:",j.toString(a),"during state",b.stateToString(g),d,ba.getThrottlingDelay(),"ms");var o=function(a,b,d){return function(){ba.newEvent(a,c,d,!0)}}(a,h,d);$=n.getPlatformAPI().setTimeout(o,ba.getThrottlingDelay())}},newPseudoEvent:function(a,c,d){if((a==j.LOAD||a==j.ENGAGE)&&n.getStateMachine().getCurrentState()!=k.IDLE)return void n.getLogging().infoLog("Ignored pseudo-event:",j.toString(a),"during state",b.stateToString(n.getStateMachine().getCurrentState()),d);a==j.ERROR&&null==d.ns_st_er&&(d.ns_st_er=i.UNKNOWN_VALUE),a==j.TRANSFER&&null==d.ns_st_rp&&(d.ns_st_rp=i.UNKNOWN_VALUE),n.getStateMachine().getCurrentState()!=k.IDLE&&n.getStateMachine().getCurrentState()!=k.PLAYBACK_NOT_STARTED&&n.getStateMachine().getCurrentState()!=k.SEEKING_BEFORE_PLAYBACK&&n.getStateMachine().getCurrentState()!=k.BUFFERING_BEFORE_PLAYBACK&&(n.getPlaybackSession().getAsset().addElapsedTime(c),n.getPlaybackSession().getAsset().setElapsedTimestamp(c));var e,f,g,h=!0,l=!1;switch(a){case j.BIT_RATE:e="ns_st_br",f="ns_st_pbr",l=!0;break;case j.PLAYBACK_RATE:e="ns_st_rt",f="ns_st_prt",l=!0;break;case j.VOLUME:e="ns_st_vo",f="ns_st_pvo",l=!0;break;case j.WINDOW_STATE:e="ns_st_ws",f="ns_st_pws",l=!0;break;case j.AUDIO:e="ns_st_at",f="ns_st_pat",l=!1;break;case j.VIDEO:e="ns_st_vt",f="ns_st_pvt",l=!1;break;case j.SUBS:e="ns_st_tt",f="ns_st_ptt",l=!1;break;case j.CDN:e="ns_st_cdn",f="ns_st_pcdn",l=!1;break;default:h=!1}if(h&&d.hasOwnProperty(e)&&(l?(ba.getLabels().hasOwnProperty(e)&&(g=ba.getLabels()[e],d[f]=g),ba.setLabel(e,d[e])):(n.getPlaybackSession().getAsset().hasInternalLabel(e)&&(g=n.getPlaybackSession().getAsset().getInternalLabel(e),d[f]=g),n.getPlaybackSession().getAsset().setInternalLabel(e,d[e]))),h&&n.getStateMachine().getCurrentState()!=k.PLAYING&&n.getStateMachine().getCurrentState()!=k.BUFFERING_DURING_PLAYBACK)return void n.getLogging().infoLog("No measurement send for the pseudo-event:",j.toString(a),"during state",b.stateToString(n.getStateMachine().getCurrentState()),d);d.ns_st_po||(d.ns_st_po=n.getPlaybackSession().getAsset().getExpectedPlaybackPosition(c)+""),n.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(d.ns_st_po)),n.getStateMachine().getCurrentState()!=k.PLAYING&&n.getStateMachine().getCurrentState()!=k.BUFFERING_DURING_PLAYBACK||(n.getPlaybackSession().addPlaybackTime(c),n.getPlaybackSession().setPlaybackTimestamp(c),n.getPlaybackSession().getAsset().addPlaybackTime(c),n.getPlaybackSession().getAsset().setPlaybackTimestamp(c),n.getPlaybackSession().getAsset().addInterval(parseInt(d.ns_st_po)),n.getPlaybackSession().getAsset().setPlaybackStartPosition(parseInt(d.ns_st_po))),n.getStateMachine().getCurrentState()!=k.BUFFERING_BEFORE_PLAYBACK&&n.getStateMachine().getCurrentState()!=k.BUFFERING_DURING_PAUSE&&n.getStateMachine().getCurrentState()!=k.BUFFERING_DURING_PLAYBACK&&n.getStateMachine().getCurrentState()!=k.BUFFERING_DURING_SEEKING||(n.getPlaybackSession().addBufferingTime(c),n.getPlaybackSession().setBufferingTimestamp(c),n.getPlaybackSession().getAsset().addBufferingTime(c),n.getPlaybackSession().getAsset().setBufferingTimestamp(c));var m=ba.createLabels(a,d,c);n.getPlaybackSession().getAsset().updateDeltaLabels(m.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(m.eventLabels),n.getEventManager().newEvent(m)},getState:function(){return n.getStateMachine().getCurrentState()},addListener:function(a){_.push(a)},removeListener:function(a){_.splice(b.indexOf(a,_),1)},getLabel:function(a){return fa[a]},getLabels:function(){return fa},setLabel:function(a,b){null==b?delete fa[a]:fa[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&ba.setLabel(b,a[b])},getPlatformAPI:function(){return n.getAppCore()?n.getAppCore().getPlatformAPI():h},getExports:function(){return ca},isProperlyInitialized:function(){var a=n.getAppCore().getAppContext(),b=n.getAppCore().getSalt(),c=n.getAppCore().getPixelURL();return a&&c&&b},setThrottlingDelay:function(a){ea=a},getThrottlingDelay:function(){return ea},isThrottlingEnabled:function(){return Z},setThrottlingEnabled:function(a){Z=a},isLoadingTimeSent:function(){return U},setLoadingTimeSent:function(a){U=a},getLoadTimeOffset:function(){return V},setLoadTimeOffset:function(a){V=a},getInitTimestamp:function(){return W},setPauseOnBufferingInterval:function(a){da=a},getPauseOnBufferingInterval:function(){return da},isPauseOnBufferingEnabled:function(){return X},setPauseOnBufferingEnabled:function(a){X=a},startPausedOnBufferingTimer:function(a,c){ba.stopPausedOnBufferingTimer(),Y=ba.getPlatformAPI().setTimeout(function(){var a={},d=b.fixEventTime(a),e=parseInt(c.ns_st_po);a.ns_st_po=e+"",ba.newEvent(j.PAUSE_ON_BUFFERING,d,a)},da)},stopPausedOnBufferingTimer:function(){null!=Y&&(ba.getPlatformAPI().clearTimeout(Y),Y=null)},stopDelayedTransitionTimer:function(){$&&(ba.getPlatformAPI().clearTimeout($),$=null)},setLiveEndpointURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;e<f;e++){var g=d[e],h=g.split("=");2==h.length?ba.setLabel(h[0],b(h[1])):1==h.length&&ba.setLabel(m.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return aa=a},getLiveEndpointURL:function(){return aa?aa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?aa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?aa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getStaSM:function(){return n},resetPlaybackSession:function(a){var b=n.getPlaybackSession();n.setPlaybackSession(new o(n)),o.resetPlaybackSession(n,b,a)},resetHeartbeat:function(){n.getHeartbeat().pause();var a=n.getHeartbeat().getIntervals();n.setHeartbeat(new q(n)),n.getHeartbeat().setIntervals(a)}});var ga,ha;b.isBrowser()?(ga=window,ha=document):(ga={},ha={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(ba,{prepareUrl:g}),d()}}(),H=function(){return function(a){var c,d,e,f,g,h,i,j=this;b.extend(j,{getAppCore:function(){return c},getStaCore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaybackSession:function(){return h},getLogging:function(){return i},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaybackSession:function(a){h=a},setLogging:function(a){i=a}})}}(),I=function(){return function(a){function d(){a=b.extend({},a),g=new G(a),g.getStaSM().getLogging().log("New StreamingAnalytics instance with configuration",a)}function e(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,j.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.parseInteger(d,0)+""),a==j.PLAY||a==j.PAUSE||a==j.BUFFER||a==j.END||a==j.SEEK_START||a==j.AD_SKIP||a==j.BUFFER_STOP?g.newEvent(a,e,c):g.newPseudoEvent(a,e,c)}}function f(){i&&g.getStaSM().getStateMachine().getCurrentState()!=k.IDLE&&h.notifyEnd()}var g,h=this,i=!0,n=arguments;b.extend(this,{isProperlyInitialized:function(){return g.isProperlyInitialized()},reset:function(a){e(j.END);var b=g;b.getStaSM().getKeepAlive().stop(),b.getStaSM().getHeartbeat().pause(),g=new G(b.getConfiguration()),o.resetPlaybackSession(g.getStaSM(),b.getStaSM().getPlaybackSession(),a)},setPauseOnBufferingInterval:function(a){g.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return g.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){g.getStaSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return g.getStaSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){g.getStaSM().getHeartbeat().setIntervals(a)},notifyPlay:function(a,b){g.getStaSM().getLogging().apiCall("notifyPlay",a,b),e(j.PLAY,a,b)},notifyPause:function(a,b){g.getStaSM().getLogging().apiCall("notifyPause",a,b),e(j.PAUSE,a,b)},notifyEnd:function(a,b){g.getStaSM().getLogging().apiCall("notifyEnd",a,b),e(j.END,a,b)},notifyBufferStart:function(a,b){g.getStaSM().getLogging().apiCall("notifyBufferStart",a,b),e(j.BUFFER,a,b)},notifyBufferStop:function(a,b){g.getStaSM().getLogging().apiCall("notifyBufferStop",a,b),e(j.BUFFER_STOP,a,b)},notifyLoad:function(a,b){g.getStaSM().getLogging().apiCall("notifyLoad",a,b),e(j.LOAD,a,b)},notifyEngage:function(a,b){g.getStaSM().getLogging().apiCall("notifyEngage",a,b),e(j.ENGAGE,a,b)},notifySeekStart:function(a,b){g.getStaSM().getLogging().apiCall("notifySeekStart",a,b),e(j.SEEK_START,a,b)},notifySkipAd:function(a,b){g.getStaSM().getLogging().apiCall("notifySkipAd",a,b),e(j.AD_SKIP,a,b)},notifyCallToAction:function(a,b){g.getStaSM().getLogging().apiCall("notifyCallToAction",a,b),e(j.CTA,a,b)},notifyError:function(a,b){g.getStaSM().getLogging().apiCall("notifyError",a,b),e(j.ERROR,a,b)},notifyTransferPlayback:function(a,b){g.getStaSM().getLogging().apiCall("notifyTransferPlayback",a,b),e(j.TRANSFER,a,b)},notifyDrmFail:function(a,b){g.getStaSM().getLogging().apiCall("notifyDrmFail",a,b),e(j.DRM_FAILED,a,b)},notifyDrmApprove:function(a,b){g.getStaSM().getLogging().apiCall("notifyDrmApprove",a,b),e(j.DRM_APPROVED,a,b)},notifyDrmDeny:function(a,b){g.getStaSM().getLogging().apiCall("notifyDrmDeny",a,b),e(j.DRM_DENIED,a,b)},notifyChangeBitrate:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeBitrate",a,b,c),null!=a){var d=c||{};d.ns_st_br=a+"",e(j.BIT_RATE,d,b)}},notifyChangePlaybackRate:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangePlaybackRate",a,b,c),null!=a){var d=c||{};d.ns_st_rt=a+"",e(j.PLAYBACK_RATE,d,b)}},notifyChangeVolume:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeVolume",a,b,c),null!=a){var d=c||{};d.ns_st_vo=a+"",e(j.VOLUME,d,b)}},notifyChangeWindowState:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeWindowState",a,b,c),null!=a){var d=c||{};d.ns_st_ws=a+"",e(j.WINDOW_STATE,d,b)}},notifyChangeAudioTrack:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeAudioTrack",a,b,c),null!=a){var d=c||{};d.ns_st_at=a+"",e(j.AUDIO,d,b)}},notifyChangeVideoTrack:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeVideoTrack",a,b,c),null!=a){var d=c||{};d.ns_st_vt=a+"",e(j.VIDEO,d,b)}},notifyChangeSubtitleTrack:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeSubtitleTrack",a,b,c),null!=a){var d=c||{};d.ns_st_tt=a+"",e(j.SUBS,d,b)}},notifyChangeCdn:function(a,b,c){if(g.getStaSM().getLogging().apiCall("notifyChangeCdn",a,b,c),null!=a){var d=c||{};d.ns_st_cdn=a+"",e(j.CDN,d,b)}},notifyCustomEvent:function(a,b){g.getStaSM().getLogging().apiCall("notifyCustomEvent",a,b),h.notify(j.CUSTOM,a,b)},getLabels:function(){return g.getLabels()},getState:function(){return g.getStaSM().getStateMachine().getCurrentState()},setLabels:function(a){g.setLabels(a)},getLabel:function(a){return g.getLabel(a)},setLabel:function(a,b){g.setLabel(a,b)},getLoadTimeOffset:function(){return g.getLoadTimeOffset()},setLoadTimeOffset:function(a){g.setLoadTimeOffset(a)},setLiveEndpointURL:function(a){return g.setLiveEndpointURL(a)},getLiveEndpointURL:function(){return g.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return g.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){g.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return g.isThrottlingEnabled()},setThrottlingEnabled:function(a){g.setThrottlingEnabled(a)},setThrottlingDelay:function(a){g.setThrottlingDelay(a)},getThrottlingDelay:function(){return g.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){g.getStaSM().getPlaybackSession().getAsset().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return g.getStaSM().getPlaybackSession().getAsset().getPlaybackIntervalMergeTolerance()},createPlaybackSession:function(a){g.getStaSM().getLogging().apiCall("createPlaybackSession",a),a=b.jsonObjectToStringDictionary(a);var c=g.getStaSM().getStateMachine().getCurrentState();c!=k.IDLE&&(g.getStaSM().getLogging().infoLog("Ending the current Clip. It was in state:",b.stateToString(c)),h.notifyEnd()),g.getStaSM().getPlaybackSession().isPlaybackSessionStarted()&&g.resetPlaybackSession(),g.getStaSM().getPlaybackSession().setLabels(a)},getVersion:function(){return m.STREAMINGANALYTICS_VERSION},addListener:function(a){g.addListener(a)},removeListener:function(a){g.removeListener(a)},addMeasurementListener:function(a){g.getStaSM().getEventManager().addMeasurementListener(a)},removeMeasurementListener:function(a){g.getStaSM().getEventManager().removeMeasurementListener(a)},getPlaybackSession:function(){return g.getStaSM().getPlaybackSession()},setHttpGet:function(a){"function"==typeof a&&(g.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(g.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){i=a},isExitEndEventEnabled:function(){return i},getPlatformAPI:function(){return g.getPlatformAPI()},_getLogHistory:function(){return g.getStaSM().getLogging().getLogHistory()}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d(),function(d,e,f){var h=d,i=e,j={play:"notifyPlay",pause:"notifyPause",end:"notifyEnd",bufferStart:"notifyBufferStart",bufferStop:"notifyBufferStop",load:"notifyLoad",
start:"notifyEngage",seekStart:"notifySeekStart",skipAd:"notifySkipAd",callToAction:"notifyCallToAction",error:"notifyError",transferPlayback:"notifyTransferPlayback",drmFail:"notifyDrmFail",drmApprove:"notifyDrmApprove",drmDeny:"notifyDrmDeny",changeBitrate:"notifyChangeBitrate",changePlaybackRate:"notifyChangePlaybackRate",changeVolume:"notifyChangeVolume",changeWindowState:"notifyChangeWindowState",changeAudio:"notifyChangeAudioTrack",changeVideo:"notifyChangeVideoTrack",changeSubtitle:"notifyChangeSubtitleTrack",changeCDN:"notifyChangeCdn",customNotify:"notifyCustomEvent",setPixelURL:"setLiveEndpointURL",getPixelURL:"getLiveEndpointURL",getPlaylist:"getPlaybackSession"},n=new c("SSE",a.debug);h._log=n,g._log=n,g.getStaSM().getPlaybackSession()._log=n;for(var o in j)j.hasOwnProperty(o)&&!function(a,b){h[a]=function(){return h._log.apiCall.apply(h._log,[a].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics."+a+"(...)","streamingAnalytics."+b+"(..)"),h[b].apply(h,Array.prototype.slice.call(arguments))}}(o,j[o]);h.getClip=function(){return h._log.apiCall.apply(h._log,["getClip"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.getClip(...)","streamingAnalytics.getPlaybackSession().getClip()"),h.getPlaybackSession().getClip.apply(h,Array.prototype.slice.call(arguments))},h.setClip=function(){return h._log.apiCall.apply(h._log,["setClip"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.setClip(...)","streamingAnalytics.getPlaybackSession().setAsset(...)"),h.getPlaybackSession().setAsset.apply(h,Array.prototype.slice.call(arguments)),!0},h.setPlaylist=function(){return h._log.apiCall.apply(h._log,["setPlaylist"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.setPlaylist(...)","streamingAnalytics.createPlaybackSession(...)"),h.createPlaybackSession.apply(h,Array.prototype.slice.call(arguments)),!0},h.notify=function(){h._log.apiCall.apply(h._log,["notify"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.notify(...)"),i.apply(h,Array.prototype.slice.call(arguments))},h.importState=function(){h._log.apiCall.apply(h._log,["importState"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.importState(...)")},h.exportState=function(){return h._log.apiCall.apply(h._log,["exportState"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.exportState(...)"),{}},h.setImplementationType=function(){h._log.apiCall.apply(h._log,["setImplementationType"].concat(Array.prototype.slice.call(arguments))),h._log.deprecation("streamingAnalytics.setImplementationType(...)"),sseSM.getStateMachine().getCurrentState()!=k.IDLE||type!=l.SINGLE_CLIP&&type!=l.SEGMENTED&&type!=l.REDUCED||h.getPlaybackSession().setLabel("ns_st_it",l.toString(type))},h.viewNotify=function(a,c){this._log.deprecation("streamingAnalytics.viewNotify(...)");var d,e;b.isBrowser()?(d=window,e=document):(d={},e={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var f=a||h.getLiveEndpointURL(),g="undefined",i=d.comScore||d.sitestat||function(a){var c,f,i,j,k,l="comScore=",n=e.cookie,o="",p="indexOf",q="substring",r="length",s=b.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT,t="&ns_",u="&",v=d.encodeURIComponent||escape;if(n[p](l)+1)for(j=0,i=n.split(";"),k=i[r];j<k;j++)f=i[j][p](l),f+1&&(o=u+unescape(i[j][q](f+l[r])));a+=t+"_t="+ +new Date+t+"c="+(e.characterSet||e.defaultCharset||"")+o,a.length>s&&a.indexOf(u)>0&&(c=a.substr(0,s-8).lastIndexOf(u),a=(a.substring(0,c)+t+"cut="+v(a.substring(c+1))).substr(0,s)),h.getPlatformAPI().httpGet(a),typeof d.ns_p===g&&(d.ns_p={src:a}),d.ns_p.lastMeasurement=a};if(typeof c!==g){var j=[],k=d.encodeURIComponent||escape;for(var l in c)c.hasOwnProperty(l)&&j.push(k(l)+"="+k(c[l]));/[\?\&]$/.test(f)||(f+="&"),f+=j.join("&")}return i(f)},f[1]&&g.setLiveEndpointURL(f[1])}(h,e,n)}}();return I.PlayerEvents=j,I.InternalStates=k,I.ImplementationType=l,I.Constants=m,m.STREAMINGANALYTICS_VERSION=m.STREAMINGANALYTICS_V5_VERSION,function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;b<=y;b++)if(x.hasOwnProperty(b+"")){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(c+"")&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().createPlaybackSession(a),d().getPlaybackSession()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=b+""),d().getPlaybackSession().setAsset(a,c),d().getPlaybackSession().getAsset()}function j(a,b,c){return"undefined"!=typeof a&&(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaybackSession().setLabels(a)}function n(){return d().getPlaybackSession().getLabels()}function o(a){"undefined"!=typeof a&&d().getPlaybackSession().getAsset().setLabels(a)}function p(){return d().getPlaybackSession().getAsset().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaybackSession().reset(a||{})}function s(a){return d().getPlaybackSession().getAsset().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=b+""),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(I),I}(),a.ReducedRequirementsStreamingAnalytics=a.ReducedRequirementsStreamingAnalytics||function(){var d={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},e={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},f=a.StreamingAnalytics,g=a.StreamingAnalytics.InternalStates||null,h=a.StreamingAnalytics.ImplementationType||null,i=null!=a.StreamingAnalytics.InternalStates&&null!=a.StreamingAnalytics.ImplementationType,j=a.StreamingAnalytics.Constants,k=function(a){function k(){i&&(b.exists(a)&&(a.customerC2||a.publisherId)||b.getNamespace().comScore?t=new f(a):w.error("Cannot instantiate StreamingAnalytics","The property publisherId was not provided (or incorrectly provided) in the StreamingAnalytics configuration."),t&&t.setLabel("ns_st_it",h.toString(h.REDUCED)))}function l(a){for(var b in j.STANDARD_METADATA_LABELS)if(j.STANDARD_METADATA_LABELS.hasOwnProperty(b)&&!m(j.STANDARD_METADATA_LABELS[b],q,a))return!1;return!0}function m(a,c,d){return!!(b.exists(a)&&b.exists(c)&&b.exists(d)&&(c.hasOwnProperty(a)&&d.hasOwnProperty(a)&&c[a]===d[a]||!c.hasOwnProperty(a)&&!d.hasOwnProperty(a)))}function n(a){t.getPlaybackSession().setAsset(a),q=a,t.notifyPlay()}function o(a){var b=a||{};b.ns_st_ad="1",b.ns_st_an=++r+"",t.getPlaybackSession().setAsset(b),t.notifyPlay(),s=!1}function p(a,b){v==u.None&&(v=b),s&&v==b&&l(a)?(t.getPlaybackSession().getAsset().setLabels(a),t.getState()!=g.PLAYING&&t.notifyPlay()):n(a),s=!0,v=b}var q=null,r=0,s=!1,t=null,u={None:0,AudioContent:1,VideoContent:2},v=u.None,w=new c("TTSTA",(a||{}).debug);b.extend(this,{playVideoAdvertisement:function(a,c){if(t){w.apiCall("playVideoAdvertisement",a,c);var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:w.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),c!=e.LinearLive&&c!=e.BrandedOnDemandLive||(d.ns_st_li="1"),a&&b.extend(d,a),o(d)}},playAudioAdvertisement:function(a,c){if(t){w.apiCall("playAudioAdvertisement",a,c);var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:w.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),c!=e.LinearLive&&c!=e.BrandedOnDemandLive||(d.ns_st_li="1"),a&&b.extend(d,a),o(d)}},playVideoContentPart:function(a,c){if(t){w.apiCall("playVideoContentPart",a,c);var e={ns_st_ct:"vc"};c?e.ns_st_ct="vc"+c:w.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),c!=d.Live&&c!=d.UserGeneratedLive||(e.ns_st_li="1"),a&&b.extend(e,a),p(e,u.VideoContent)}},playAudioContentPart:function(a,c){if(t){w.apiCall("playAudioContentPart",a,c);var e={ns_st_ct:"ac"};c?e.ns_st_ct="ac"+c:w.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),c!=d.Live&&c!=d.UserGeneratedLive||(e.ns_st_li="1"),a&&b.extend(e,a),p(e,u.AudioContent)}},stop:function(){t&&(w.apiCall("stop"),t.notifyPause())}}),k()};return k.ContentType=d,k.AdType=e,k}(),a.StreamSense=a.StreamSense||function(b,c){var d=Array.prototype.slice.call(arguments),e=new(a.StreamingAnalytics.bind.apply(a.StreamingAnalytics,[this].concat(d)));return e._log.deprecation("new ns_.StreamSense(...)","ns_.StreamingAnalytics(...)"),e},a.StreamSense.prototype=a.StreamingAnalytics.prototype,a.StreamSense.PlayerEvents=a.StreamingAnalytics.PlayerEvents,a.StreamSense.InternalStates=a.StreamingAnalytics.InternalStates,a.StreamSense.ImplementationType=a.StreamingAnalytics.ImplementationType,a.StreamSense.Constants=a.StreamingAnalytics.Constants,a.StreamingTag=a.StreamingTag||function(){var b=new c("SSETag",(arguments[0]||{}).debug);b.deprecation("new ns_.StreamingTag(...)","new ns_.ReducedRequirementsStreamingAnalytics(...)");var d=Array.prototype.slice.call(arguments);return new(a.ReducedRequirementsStreamingAnalytics.bind.apply(a.ReducedRequirementsStreamingAnalytics,[this].concat(d)))},a.StreamingTag.prototype=a.ReducedRequirementsStreamingAnalytics.prototype,a.StreamingTag.ContentType=a.ReducedRequirementsStreamingAnalytics.ContentType,a.StreamingTag.AdType=a.ReducedRequirementsStreamingAnalytics.AdType,a});